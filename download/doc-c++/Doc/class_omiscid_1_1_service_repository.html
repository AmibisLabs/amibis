<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>OMiSCID(aka O3MiSCID): Omiscid::ServiceRepository Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>Omiscid</b>::<a class="el" href="class_omiscid_1_1_service_repository.html">ServiceRepository</a>
  </div>
</div>
<div class="contents">
<h1>Omiscid::ServiceRepository Class Reference<br>
<small>
[<a class="el" href="group___user_friendly.html">User friendly high-level API for Omiscid</a>,&nbsp;<a class="el" href="group___service_control.html">Layer 2 : Omiscid multiplateform Service Control layer.</a>]</small>
</h1><!-- doxytag: class="Omiscid::ServiceRepository" -->High level user friendly class to browse Omiscid services.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_service_repository_8h-source.html">ServiceControl/ServiceRepository.h</a>&gt;</code>
<p>

<p>
<a href="class_omiscid_1_1_service_repository-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_service_repository.html#c856b7b1f830e59730cf49cbd6053593">AddListener</a> (<a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a> *Listener, bool NotifyOnlyNewEvents=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_service_repository.html#34d24e26c40097ce5d63b7cb1edf25e7">AddListener</a> (<a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a> *Listener, <a class="el" href="class_omiscid_1_1_service_filter.html">ServiceFilter</a> *Filter, bool NotifyOnlyNewEvents=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_service_repository.html#b8bbbe57e417f045c7ce2bf1142808e6">RemoveListener</a> (<a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a> *Listener, bool NotifyAsIfExistingServicesDisappear=false)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
High level user friendly class to browse Omiscid services. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Dominique Vaufreydaz </dd></dl>

<p>Definition at line <a class="el" href="_service_repository_8h-source.html#l00027">27</a> of file <a class="el" href="_service_repository_8h-source.html">ServiceRepository.h</a>.</p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c856b7b1f830e59730cf49cbd6053593"></a><!-- doxytag: member="Omiscid::ServiceRepository::AddListener" ref="c856b7b1f830e59730cf49cbd6053593" args="(ServiceRepositoryListener *Listener, bool NotifyOnlyNewEvents=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ServiceRepository::AddListener           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a> *&nbsp;</td>
          <td class="paramname"> <em>Listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>NotifyOnlyNewEvents</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a listener to be notified of service apparitions and disapparitions. Apparition notifications will only happen for all services. Disapparition notifications will only happen for all services.<p>
From this addition, the listener will be notified of each service event (see <a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a>). When a listener is added to the repository, this latter can already contain some services. The boolean parameter tells whether the listener should be notified of these services as if they were appearing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Listener</em>&nbsp;</td><td>the listener that will be notified of service events </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NotifyOnlyNewEvents</em>&nbsp;</td><td>a boolean used to ignore services running at the time of listener addition. Setting it to false (default value) will cause the listener to be immediately notified of services already present in the repository </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_service_repository_8cpp-source.html#l00045">45</a> of file <a class="el" href="_service_repository_8cpp-source.html">ServiceRepository.cpp</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00046"></a>00046 {
<a name="l00047"></a>00047     <span class="keywordflow">return</span> <a class="code" href="class_omiscid_1_1_service_repository.html#c856b7b1f830e59730cf49cbd6053593">AddListener</a>( Listener, (<a class="code" href="class_omiscid_1_1_service_filter.html">ServiceFilter</a>*)NULL, NotifyOnlyNewEvents );
<a name="l00048"></a>00048 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="34d24e26c40097ce5d63b7cb1edf25e7"></a><!-- doxytag: member="Omiscid::ServiceRepository::AddListener" ref="34d24e26c40097ce5d63b7cb1edf25e7" args="(ServiceRepositoryListener *Listener, ServiceFilter *Filter, bool NotifyOnlyNewEvents=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ServiceRepository::AddListener           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a> *&nbsp;</td>
          <td class="paramname"> <em>Listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_service_filter.html">ServiceFilter</a> *&nbsp;</td>
          <td class="paramname"> <em>Filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>NotifyOnlyNewEvents</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a listener to be notified of service apparitions and disapparitions. Apparition notifications will only happen for services matching given filter. Disapparition notifications will only happen for services that have been notified of apparition.<p>
From this addition, the listener will be notified of each service event (see <a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a>). When a listener is added to the repository, this latter can already contain some services. The boolean parameter tells whether the listener should be notified of these services as if they were appearing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Listener</em>&nbsp;</td><td>the listener that will be notified of service events </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Filter</em>&nbsp;</td><td>the filter to apply to service apparition/removal </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NotifyOnlyNewEvents</em>&nbsp;</td><td>a boolean used to ignore services running at the time of listener addition. Setting it to false (default value) will cause the listener to be immediately notified of services already present in the repository </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_service_repository_8cpp-source.html#l00021">21</a> of file <a class="el" href="_service_repository_8cpp-source.html">ServiceRepository.cpp</a>.</p>

<p>References <a class="el" href="_service_repository_listener_8cpp-source.html#l00030">Omiscid::ServiceRepositoryListener::SetFilter()</a>, and <a class="el" href="_lock_management_8cpp-source.html#l00075">Omiscid::SmartLocker::Unlock()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00022"></a>00022 {
<a name="l00023"></a>00023     <span class="keywordflow">if</span> ( Listener != (<a class="code" href="class_omiscid_1_1_service_repository_listener.html" title="High level user friendly class to collect browse Omiscid services.">ServiceRepositoryListener</a>*)NULL )
<a name="l00024"></a>00024     {
<a name="l00025"></a>00025         <a class="code" href="class_omiscid_1_1_smart_locker.html" title="SmartLocker can check the lock is removed and them unlock it when destroyed. This...">SmartLocker</a> SL_RepoListeners(RepoListeners);
<a name="l00026"></a>00026 
<a name="l00027"></a>00027         <span class="comment">// Add listener and start its browse</span>
<a name="l00028"></a>00028         RepoListeners.AddTail(Listener);
<a name="l00029"></a>00029 
<a name="l00030"></a>00030         <span class="keywordflow">if</span> ( Filter != (<a class="code" href="class_omiscid_1_1_service_filter.html">ServiceFilter</a> *)NULL )
<a name="l00031"></a>00031         {
<a name="l00032"></a>00032             Listener-&gt;<a class="code" href="class_omiscid_1_1_service_repository_listener.html#b03e99118fa46ad093e88918b4eb2514">SetFilter</a>( Filter );
<a name="l00033"></a>00033         }
<a name="l00034"></a>00034 
<a name="l00035"></a>00035         SL_RepoListeners.Unlock();
<a name="l00036"></a>00036 
<a name="l00037"></a>00037         Listener-&gt;StartBrowse( NotifyOnlyNewEvents );
<a name="l00038"></a>00038 
<a name="l00039"></a>00039         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00040"></a>00040     }
<a name="l00041"></a>00041 
<a name="l00042"></a>00042     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00043"></a>00043 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b8bbbe57e417f045c7ce2bf1142808e6"></a><!-- doxytag: member="Omiscid::ServiceRepository::RemoveListener" ref="b8bbbe57e417f045c7ce2bf1142808e6" args="(ServiceRepositoryListener *Listener, bool NotifyAsIfExistingServicesDisappear=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ServiceRepository::RemoveListener           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a> *&nbsp;</td>
          <td class="paramname"> <em>Listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>NotifyAsIfExistingServicesDisappear</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a listener from the notification process. Disapparition notifications will only happen if NotifyAsIfExistingServicesDisappear is set to true.<p>
From this removal, the listener will no longer be notified of each service event (see <a class="el" href="class_omiscid_1_1_service_repository_listener.html">ServiceRepositoryListener</a>). It can be reused later maybe with another filter. The boolean parameter tells whether the listener should be notified of current running services as if they were disappearing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Listener</em>&nbsp;</td><td>the listener that will be notified of service events </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NotifyAsIfExistingServicesDisappear</em>&nbsp;</td><td>a boolean used to asked to be notified as if services were disappearing (default value = false) </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_service_repository_8cpp-source.html#l00050">50</a> of file <a class="el" href="_service_repository_8cpp-source.html">ServiceRepository.cpp</a>.</p>

<p>References <a class="el" href="_lock_management_8cpp-source.html#l00075">Omiscid::SmartLocker::Unlock()</a>, and <a class="el" href="_service_repository_listener_8cpp-source.html#l00040">Omiscid::ServiceRepositoryListener::UnsetFilter()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00051"></a>00051 {
<a name="l00052"></a>00052     <span class="keywordtype">bool</span> Found;
<a name="l00053"></a>00053 
<a name="l00054"></a>00054     <span class="keywordflow">if</span> ( Listener == (<a class="code" href="class_omiscid_1_1_service_repository_listener.html" title="High level user friendly class to collect browse Omiscid services.">ServiceRepositoryListener</a>*)NULL )
<a name="l00055"></a>00055     {
<a name="l00056"></a>00056         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00057"></a>00057     }
<a name="l00058"></a>00058 
<a name="l00059"></a>00059     <a class="code" href="class_omiscid_1_1_smart_locker.html" title="SmartLocker can check the lock is removed and them unlock it when destroyed. This...">SmartLocker</a> SL_RepoListeners(RepoListeners);
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     Found = <span class="keyword">false</span>;
<a name="l00062"></a>00062     <span class="keywordflow">for</span>( RepoListeners.First(); RepoListeners.NotAtEnd(); RepoListeners.Next() )
<a name="l00063"></a>00063     {
<a name="l00064"></a>00064         <span class="keywordflow">if</span> ( RepoListeners.GetCurrent() == Listener )
<a name="l00065"></a>00065         {
<a name="l00066"></a>00066             Found = <span class="keyword">true</span>;
<a name="l00067"></a>00067             RepoListeners.RemoveCurrent();
<a name="l00068"></a>00068             <span class="keywordflow">break</span>;
<a name="l00069"></a>00069         }
<a name="l00070"></a>00070     }
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     SL_RepoListeners.Unlock();
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="keywordflow">if</span> ( Found == <span class="keyword">true</span> )
<a name="l00075"></a>00075     {
<a name="l00076"></a>00076         <span class="comment">// Stop browse</span>
<a name="l00077"></a>00077         Listener-&gt;StopBrowse( NotifyAsIfExistingServicesDisappear );
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         <span class="comment">// Remove its listener</span>
<a name="l00080"></a>00080         Listener-&gt;<a class="code" href="class_omiscid_1_1_service_repository_listener.html#05393d0d8c8738d337e239593018f9f1">UnsetFilter</a>();
<a name="l00081"></a>00081         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00082"></a>00082     }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00085"></a>00085 }
</pre></div>
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>ServiceControl/ServiceControl/<a class="el" href="_service_repository_8h-source.html">ServiceRepository.h</a><li>ServiceControl/<a class="el" href="_service_repository_8cpp-source.html">ServiceRepository.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 1 08:17:02 2008 for OMiSCID(aka O3MiSCID) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
