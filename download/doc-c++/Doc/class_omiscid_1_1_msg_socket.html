<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OMiSCID(aka O3MiSCID): Omiscid::MsgSocket Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespace_omiscid.html">Omiscid</a>::<a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a></div>
<h1>Omiscid::MsgSocket Class Reference</h1><!-- doxytag: class="Omiscid::MsgSocket" --><!-- doxytag: inherits="Omiscid::Thread" --><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> with an implementation of Basic Interconnection Protocol to exchange message.
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_msg_socket_8h-source.html">Com/MsgSocket.h</a>&gt;</code>
<p>
<p>Inheritance diagram for Omiscid::MsgSocket:
<p><center><img src="class_omiscid_1_1_msg_socket.png" usemap="#Omiscid::MsgSocket_map" border="0" alt=""></center>
<map name="Omiscid::MsgSocket_map">
<area href="class_omiscid_1_1_thread.html" alt="Omiscid::Thread" shape="rect" coords="259,0,422,24">
<area href="class_omiscid_1_1_tcp_client.html" alt="Omiscid::TcpClient" shape="rect" coords="0,112,163,136">
<area href="class_omiscid_1_1_tcp_server.html" alt="Omiscid::TcpServer" shape="rect" coords="259,112,422,136">
<area href="class_omiscid_1_1_udp_exchange.html" alt="Omiscid::UdpExchange" shape="rect" coords="519,112,682,136">
<area href="class_omiscid_1_1_control_client.html" alt="Omiscid::ControlClient" shape="rect" coords="0,168,163,192">
<area href="class_omiscid_1_1_connector.html" alt="Omiscid::Connector" shape="rect" coords="173,168,336,192">
<area href="class_omiscid_1_1_control_server.html" alt="Omiscid::ControlServer" shape="rect" coords="346,168,509,192">
<area href="class_omiscid_1_1_connector.html" alt="Omiscid::Connector" shape="rect" coords="519,168,682,192">
<area href="class_omiscid_1_1_service_proxy.html" alt="Omiscid::ServiceProxy" shape="rect" coords="0,224,163,248">
<area href="class_omiscid_1_1_service.html" alt="Omiscid::Service" shape="rect" coords="259,224,422,248">
<area href="class_omiscid_1_1_service_from_x_m_l.html" alt="Omiscid::ServiceFromXML" shape="rect" coords="432,224,595,248">
</map>
<a href="class_omiscid_1_1_msg_socket-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">MsgSocketKind</a> { , <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a> =  0,
<a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>,
<a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Kind of use of a <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> object.  <a href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="655de1799aa9e3f8e8c54e7dfa1dffec"></a><!-- doxytag: member="Omiscid::MsgSocket::Callback_SyncLink" ref="655de1799aa9e3f8e8c54e7dfa1dffec" args="(MsgSocketCallBackData *, MsgSocket *)" -->
typedef void(FUNCTION_CALL_TYPE *)&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a> (<a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a> *, <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback for the message reception. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7ce223225245ecb8b90d7344f86c2bd6">MsgSocket</a> (<a class="el" href="class_omiscid_1_1_socket.html">Socket</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#7ce223225245ecb8b90d7344f86c2bd6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#9954697cc56589a9d9e4a2d5adbd60f0">MsgSocket</a> (<a class="el" href="class_omiscid_1_1_socket.html#534fbf67274aee620617b048b84ff86a">Socket::SocketKind</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#9954697cc56589a9d9e4a2d5adbd60f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b5b28d057094d058c5445069f087bd93"></a><!-- doxytag: member="Omiscid::MsgSocket::~MsgSocket" ref="b5b28d057094d058c5445069f087bd93" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#b5b28d057094d058c5445069f087bd93">~MsgSocket</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#c04b57b1d0c89fe9c24ee667ba838ddb">InitForTcpClient</a> (const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> addr, int port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization for TCP Client.  <a href="#c04b57b1d0c89fe9c24ee667ba838ddb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#91aca9a8ded8f7a4801aa4c6e462bdda">InitForTcpServer</a> (int port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization for TCP Server.  <a href="#91aca9a8ded8f7a4801aa4c6e462bdda"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#568d6346baef454c48105712e402d6bd">InitForUdpExchange</a> (int port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization for UDP Exchange.  <a href="#568d6346baef454c48105712e402d6bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#e6a4e463d7f2b49842a19ef632607b91">AddCallbackObject</a> (<a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *CallbackObject)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">define callback function called in receive  <a href="#e6a4e463d7f2b49842a19ef632607b91"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#749006fded14bc52f629ffa9cccdacf8">RemoveCallbackObject</a> (<a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *CallbackObject)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove the callback for message reception.  <a href="#749006fded14bc52f629ffa9cccdacf8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cdc438cbf9829f9faceea68bd2535f67"></a><!-- doxytag: member="Omiscid::MsgSocket::RemoveAllCallbackObjects" ref="cdc438cbf9829f9faceea68bd2535f67" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#cdc438cbf9829f9faceea68bd2535f67">RemoveAllCallbackObjects</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove all the callback object for notification. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#dcae5a3be1bbfd31d4cbbe820d68a970">SetCallbackSyncLink</a> (<a class="el" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a> cr, void *user_data1=NULL, void *user_data2=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">define callback function called in receive  <a href="#dcae5a3be1bbfd31d4cbbe820d68a970"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void FUNCTION_CALL_TYPE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#01ceb5ec9a28d28fcf402acf5c35fbef">Run</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">method call when the <a class="el" href="class_omiscid_1_1_thread.html">Thread</a> is started  <a href="#01ceb5ec9a28d28fcf402acf5c35fbef"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7496fe09ce10bd84eac5ea6e44c8bc31">Send</a> (int len, const char *buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a message (on TCP) by using the BIP protocol.  <a href="#7496fe09ce10bd84eac5ea6e44c8bc31"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#b80c9ed1145f7d4e42240f6b8de09c0f">SendPreparedBuffer</a> (int len, char *buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a preformated BIP message (on TCP) by using the BIP protocol.  <a href="#b80c9ed1145f7d4e42240f6b8de09c0f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bd49aef27290642697e6428ec2e07597"></a><!-- doxytag: member="Omiscid::MsgSocket::PrepareBufferForBip" ref="bd49aef27290642697e6428ec2e07597" args="(char *buf, const char *data, int datalen, bool OnlyHeader=false)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#bd49aef27290642697e6428ec2e07597">PrepareBufferForBip</a> (char *buf, const char *data, int datalen, bool OnlyHeader=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4cf50d6658d62b2d4302c81fa634a89e"></a><!-- doxytag: member="Omiscid::MsgSocket::WriteHeaderForBip" ref="4cf50d6658d62b2d4302c81fa634a89e" args="(char *buf, int service_id, int message_id)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a> (char *buf, int service_id, int message_id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0e59a668c2605cd4fae73fdb679dd615"></a><!-- doxytag: member="Omiscid::MsgSocket::PrepareBufferForBipFromCuttedMsg" ref="0e59a668c2605cd4fae73fdb679dd615" args="(char *buf, int *tab_length, const char **tab_buf, int nb_buf)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#0e59a668c2605cd4fae73fdb679dd615">PrepareBufferForBipFromCuttedMsg</a> (char *buf, int *tab_length, const char **tab_buf, int nb_buf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#4a2314b70a47858c24edbaa8636bcbe6">SendCuttedMsg</a> (int *tab_len, const char **tab_buf, int nb_buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a message in several part (on TCP) by using the BIP protocol.  <a href="#4a2314b70a47858c24edbaa8636bcbe6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#5c449b68e25f5cf173d0a69a699a975b">SendTo</a> (int len, const char *buf, <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> *udp_dest)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#88c3e7dacbc2ad86040f7e5af0a0a043">GetSocket</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access to the socket object.  <a href="#88c3e7dacbc2ad86040f7e5af0a0a043"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#3086ca374b34ad3981a351cb75a21e4d">GetPortNb</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access to Port number.  <a href="#3086ca374b34ad3981a351cb75a21e4d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#21e5b5ec66ef490dec3d957711b91c90">IsConnected</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test if the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> is in usage.  <a href="#21e5b5ec66ef490dec3d957711b91c90"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#36d29279121e5b48c35df617c095734b">Stop</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>.  <a href="#36d29279121e5b48c35df617c095734b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7567f7b5736b8363e464cec76a978276">SetServiceId</a> (unsigned int pid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the service Id.  <a href="#7567f7b5736b8363e464cec76a978276"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#57d1272213afd2f1efef7c01fae4705e">GetServiceId</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access to the service Id.  <a href="#57d1272213afd2f1efef7c01fae4705e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#3426f728c7e5b7e37376dc9ccc0f4d42">GetPeerPid</a> () const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#ed776388f004399875e8629248d4f655">ReceivedSyncLinkMsg</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received the link message  <a href="#ed776388f004399875e8629248d4f655"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7d87ebb3ed18bb10f3074e2730feb9e6">WaitSyncLinkMsg</a> (unsigned int TimeToWait=250)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wait for a synclink message  <a href="#7d87ebb3ed18bb10f3074e2730feb9e6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#0c9670fc8f69a764e176629754f42ce9">SyncLinkMsgSent</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has sent the link message  <a href="#0c9670fc8f69a764e176629754f42ce9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e77ffd60b132475148b513da8191757f"></a><!-- doxytag: member="Omiscid::MsgSocket::SendSyncLinkMsg" ref="e77ffd60b132475148b513da8191757f" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#e77ffd60b132475148b513da8191757f">SendSyncLinkMsg</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#05bbc4fe3091f53c7cf3e9c940267c93">GetMaxMessageSizeForTCP</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">size max for message on TCP  <a href="#05bbc4fe3091f53c7cf3e9c940267c93"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="88ed9e61763cf158e962a9f5cd342f5f"></a><!-- doxytag: member="Omiscid::MsgSocket::SetMaxMessageSizeForTCP" ref="88ed9e61763cf158e962a9f5cd342f5f" args="(int max)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#88ed9e61763cf158e962a9f5cd342f5f">SetMaxMessageSizeForTCP</a> (int max)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">size max for message on TCP Define the size max accepted for exchange on TCP (by default the value is 1&lt;&lt;16) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#d6fbef2fd54d63f8ac18d9711de35b84">operator==</a> (unsigned int peer_id) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compare the peer id.  <a href="#d6fbef2fd54d63f8ac18d9711de35b84"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="853ad7a7a3b7ea7afa9dff79a74ddc1a"></a><!-- doxytag: member="Omiscid::MsgSocket::SetTcpNoDelay" ref="853ad7a7a3b7ea7afa9dff79a74ddc1a" args="(bool Set=true)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#853ad7a7a3b7ea7afa9dff79a74ddc1a">SetTcpNoDelay</a> (bool Set=true)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the undelying socket in non buffering mode if possible. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="82d7f03e8a3acbfdd82bc35d3c1589f3"></a><!-- doxytag: member="Omiscid::MsgSocket::SetSyncLinkData" ref="82d7f03e8a3acbfdd82bc35d3c1589f3" args="(SimpleString DataForSL)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#82d7f03e8a3acbfdd82bc35d3c1589f3">SetSyncLinkData</a> (<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> DataForSL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="506ead22a9cd791637fdf9b72c936fae"></a><!-- doxytag: member="Omiscid::MsgSocket::GetSyncLinkData" ref="506ead22a9cd791637fdf9b72c936fae" args="()" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#506ead22a9cd791637fdf9b72c936fae">GetSyncLinkData</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="00e2aba97c10608f208f69f58c953735"></a><!-- doxytag: member="Omiscid::MsgSocket::GetPeerSyncLinkData" ref="00e2aba97c10608f208f69f58c953735" args="()" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#00e2aba97c10608f208f69f58c953735">GetPeerSyncLinkData</a> ()</td></tr>

<tr><td colspan="2"><div class="groupHeader">Naming connecting points</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#e23f86137b974c4b6aea0d07997a0bc3">SetName</a> (const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> NewName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#b0c5b480cb6cfbe936453014348e203e">GetName</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#626bf84517ed66dd14358ba09da0dac4">AcceptConnection</a> (<a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accept new TCP connection.  <a href="#626bf84517ed66dd14358ba09da0dac4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#0a89a1c77bf9ff30f5fe2c130191429b">AcceptConnection</a> (const <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> &amp;udp_connect, bool msg_empty)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accept new UDP connection.  <a href="#0a89a1c77bf9ff30f5fe2c130191429b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_mutexed_simple_list.html">MutexedSimpleList</a>&lt; <a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#deba601f8dc26650cf4168a4bcc2c03a">callbackData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_mutex.html">Mutex</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bb8e5097944097a27947a933ca86b2af"></a><!-- doxytag: member="Omiscid::MsgSocket::callbackSyncLinkData" ref="bb8e5097944097a27947a933ca86b2af" args="" -->
<a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dc2366e1f8bd98228d4b21d9b752610a"></a><!-- doxytag: member="Omiscid::MsgSocket::SyncLinkData" ref="dc2366e1f8bd98228d4b21d9b752610a" args="" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#dc2366e1f8bd98228d4b21d9b752610a">SyncLinkData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="51c73d04bd18488cd80d5d792114b6cf"></a><!-- doxytag: member="Omiscid::MsgSocket::PeerSyncLinkData" ref="51c73d04bd18488cd80d5d792114b6cf" args="" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#51c73d04bd18488cd80d5d792114b6cf">PeerSyncLinkData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8ef83dfae782b01709b496d2e6901ff2"></a><!-- doxytag: member="Omiscid::MsgSocket::udpConnection" ref="8ef83dfae782b01709b496d2e6901ff2" args="" -->
<a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#8ef83dfae782b01709b496d2e6901ff2">udpConnection</a></td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3ecf3132e8c4bf890c07853cfab7619c"></a><!-- doxytag: member="Omiscid::MsgSocket::TcpServer" ref="3ecf3132e8c4bf890c07853cfab7619c" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#3ecf3132e8c4bf890c07853cfab7619c">TcpServer</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="class_omiscid_1_1_socket.html">Socket</a> with an implementation of Basic Interconnection Protocol to exchange message.
<p>
The 'size' bytes of the message are between : BIP\1.0 pid(8 bytes) mid(8 bytes) size(8 bytes)\r\n and \r\n When a new message arrives, the callback function 'callbackReceive' is called with the object 'callbackData' which contains the data.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Sebastien Pesnel <p>
Dominique Vaufreydaz </dd></dl>

<p>

<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00122">122</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b"></a><!-- doxytag: member="Omiscid::MsgSocket::MsgSocketKind" ref="4d9ba56644652acfe0e4f6ade0e9659b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">Omiscid::MsgSocket::MsgSocketKind</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Kind of use of a <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> object.
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f"></a><!-- doxytag: member="TCP_CLIENT_KIND" ref="4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f" args="" -->TCP_CLIENT_KIND</em>&nbsp;</td><td>
for TCP connection : client side </td></tr>
<tr><td valign="top"><em><a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5"></a><!-- doxytag: member="TCP_SERVER_KIND" ref="4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5" args="" -->TCP_SERVER_KIND</em>&nbsp;</td><td>
for TCP connection : server side </td></tr>
<tr><td valign="top"><em><a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb"></a><!-- doxytag: member="UDP_EXCHANGE_KIND" ref="4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb" args="" -->UDP_EXCHANGE_KIND</em>&nbsp;</td><td>
for UDP connection </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00144">144</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.<div class="fragment"><pre class="fragment"><a name="l00145"></a>00145     {
<a name="l00146"></a>00146       NONE_KIND = -1,
<a name="l00147"></a>00147       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a> = 0,
<a name="l00148"></a>00148       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>,
<a name="l00149"></a>00149       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>
<a name="l00150"></a>00150     };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="7ce223225245ecb8b90d7344f86c2bd6"></a><!-- doxytag: member="Omiscid::MsgSocket::MsgSocket" ref="7ce223225245ecb8b90d7344f86c2bd6" args="(Socket *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MsgSocket::MsgSocket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor.
<p>
Create an object <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> built on the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> s. Used in TcpConnection to manage a new connection. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> creates for the new tcp connection. (example : <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> returned by Accept method) </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00085">85</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_system_2_system_2_config_8h-source.html#l00209">OMISCID_TLM</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01562">SetMaxMessageSizeForTCP()</a>, and <a class="el" href="_socket_8h-source.html#l00019">TCP_BUFFER_SIZE</a>.<div class="fragment"><pre class="fragment"><a name="l00085"></a>00085                               :
<a name="l00086"></a>00086 <span class="preprocessor">#ifdef DEBUG_THREAD</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>    <a class="code" href="class_omiscid_1_1_thread.html#95c703fb8f2f27cb64f475a8c940864a">Thread</a>( <span class="keyword">false</span>, <span class="stringliteral">"MsgSocket"</span> ),
<a name="l00088"></a>00088 <span class="preprocessor">#endif</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a>(NULL),
<a name="l00090"></a>00090 socket(s),
<a name="l00091"></a>00091 bufferSize(<a class="code" href="_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>),
<a name="l00092"></a>00092 buffer(NULL),
<a name="l00093"></a>00093 occupiedSize(0),
<a name="l00094"></a>00094 connected(<span class="keyword">true</span>),
<a name="l00095"></a>00095 start_tag(NULL),
<a name="l00096"></a>00096 buffer_udp_send(NULL),
<a name="l00097"></a>00097 kind(<a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>),
<a name="l00098"></a>00098 SendBuffer(NULL),
<a name="l00099"></a>00099 service_id(0),
<a name="l00100"></a>00100 message_id(0),
<a name="l00101"></a>00101 peer_pid(0),
<a name="l00102"></a>00102 receivedSyncLinkMsg(<span class="keyword">false</span>),
<a name="l00103"></a>00103 sendSyncLinkMsg(<span class="keyword">false</span>)
<a name="l00104"></a>00104 {
<a name="l00105"></a>00105     buffer = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[bufferSize];
<a name="l00106"></a>00106     SendBuffer = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[<a class="code" href="_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>];
<a name="l00107"></a>00107
<a name="l00108"></a>00108     start_tag = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">char</span>[tag_size+1];
<a name="l00109"></a>00109     <a class="code" href="class_omiscid_1_1_msg_socket.html#88ed9e61763cf158e962a9f5cd342f5f">SetMaxMessageSizeForTCP</a>(<a class="code" href="_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>-1);
<a name="l00110"></a>00110 }

</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9954697cc56589a9d9e4a2d5adbd60f0"></a><!-- doxytag: member="Omiscid::MsgSocket::MsgSocket" ref="9954697cc56589a9d9e4a2d5adbd60f0" args="(Socket::SocketKind type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MsgSocket::MsgSocket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_socket.html#534fbf67274aee620617b048b84ff86a">Socket::SocketKind</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor.
<p>
Create an <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> for TCP or UDP communication. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>gives the kind of socket :<ul>
<li>Socket::TCP for TCP connection,</li><li>Socket::UDP for UDP connection. </li></ul>
</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00112">112</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_system_2_system_2_config_8h-source.html#l00209">OMISCID_TLM</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01562">SetMaxMessageSizeForTCP()</a>, and <a class="el" href="_socket_8h-source.html#l00019">TCP_BUFFER_SIZE</a>.<div class="fragment"><pre class="fragment"><a name="l00112"></a>00112                                           :
<a name="l00113"></a>00113 <span class="preprocessor">#ifdef DEBUG_THREAD</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>    <a class="code" href="class_omiscid_1_1_thread.html#95c703fb8f2f27cb64f475a8c940864a">Thread</a>( <span class="keyword">false</span>, <span class="stringliteral">"MsgSocket"</span> ),
<a name="l00115"></a>00115 <span class="preprocessor">#endif</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span><a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a>(NULL),
<a name="l00117"></a>00117 socket(NULL),
<a name="l00118"></a>00118 bufferSize(0),
<a name="l00119"></a>00119 buffer(NULL),
<a name="l00120"></a>00120 occupiedSize(0),
<a name="l00121"></a>00121 connected(<span class="keyword">false</span>),
<a name="l00122"></a>00122 start_tag(NULL),
<a name="l00123"></a>00123 buffer_udp_send(NULL),
<a name="l00124"></a>00124 kind(NONE_KIND),
<a name="l00125"></a>00125 SendBuffer(NULL),
<a name="l00126"></a>00126 service_id(0),
<a name="l00127"></a>00127 message_id(0),
<a name="l00128"></a>00128 peer_pid(0),
<a name="l00129"></a>00129 receivedSyncLinkMsg(<span class="keyword">false</span>),
<a name="l00130"></a>00130 sendSyncLinkMsg(<span class="keyword">false</span>)
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132     socket = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <a class="code" href="class_omiscid_1_1_socket.html">Socket</a>(type);
<a name="l00133"></a>00133     <a class="code" href="class_omiscid_1_1_msg_socket.html#88ed9e61763cf158e962a9f5cd342f5f">SetMaxMessageSizeForTCP</a>(<a class="code" href="_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>-1);
<a name="l00134"></a>00134 }

</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c04b57b1d0c89fe9c24ee667ba838ddb"></a><!-- doxytag: member="Omiscid::MsgSocket::InitForTcpClient" ref="c04b57b1d0c89fe9c24ee667ba838ddb" args="(const SimpleString addr, int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgSocket::InitForTcpClient           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialization for TCP Client.
<p>
Connection to a TCP server <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>[in] host where find the server </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>[in] port where listen the server </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00366">366</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00273">Omiscid::Socket::Connect()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00209">OMISCID_TLM</a>, <a class="el" href="_socket_8h-source.html#l00019">TCP_BUFFER_SIZE</a>, and <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>.
<p>
Referenced by <a class="el" href="_tcp_client_8cpp-source.html#l00021">Omiscid::TcpClient::ConnectToServer()</a>.<div class="fragment"><pre class="fragment"><a name="l00367"></a>00367 {
<a name="l00368"></a>00368     socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#b211f8e5b45761f775d2735652174c98">Connect</a>(addr, port);
<a name="l00369"></a>00369     bufferSize = <a class="code" href="_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>;
<a name="l00370"></a>00370     buffer = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[bufferSize];
<a name="l00371"></a>00371     <span class="keywordflow">if</span> ( buffer == NULL )
<a name="l00372"></a>00372     {
<a name="l00373"></a>00373         <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>( <span class="stringliteral">"Not enougth memory"</span> );
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375     SendBuffer = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[<a class="code" href="_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>];
<a name="l00376"></a>00376     <span class="keywordflow">if</span> ( SendBuffer == NULL )
<a name="l00377"></a>00377     {
<a name="l00378"></a>00378         <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>( <span class="stringliteral">"Not enougth memory"</span> );
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380     start_tag = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">char</span>[tag_size+1];
<a name="l00381"></a>00381     <span class="keywordflow">if</span> ( start_tag == NULL )
<a name="l00382"></a>00382     {
<a name="l00383"></a>00383         <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>( <span class="stringliteral">"Not enougth memory"</span> );
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385     kind = <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>;
<a name="l00386"></a>00386     connected = <span class="keyword">true</span>;
<a name="l00387"></a>00387     occupiedSize = 0;
<a name="l00388"></a>00388 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="91aca9a8ded8f7a4801aa4c6e462bdda"></a><!-- doxytag: member="Omiscid::MsgSocket::InitForTcpServer" ref="91aca9a8ded8f7a4801aa4c6e462bdda" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgSocket::InitForTcpServer           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialization for TCP Server.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>[in] port number where the server must listen (if null a free port is chosen) </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00390">390</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00115">Omiscid::Socket::Bind()</a>, <a class="el" href="_simple_string_8h-source.html#l00249">Omiscid::SimpleString::EmptyString</a>, <a class="el" href="_socket_8cpp-source.html#l00156">Omiscid::Socket::Listen()</a>, and <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00033">Omiscid::TcpServer::Create()</a>.<div class="fragment"><pre class="fragment"><a name="l00391"></a>00391 {
<a name="l00392"></a>00392     socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#309a0816cad7f62b0b3a3d9dafe03b89">Bind</a>(<a class="code" href="class_omiscid_1_1_simple_string.html#c6fd8dc249665e634760ba47fe32e983">SimpleString::EmptyString</a>, port);
<a name="l00393"></a>00393     socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#4ddc75d91bf3ec294902523aa570357e">Listen</a>();
<a name="l00394"></a>00394     kind = <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>;
<a name="l00395"></a>00395     connected = <span class="keyword">true</span>;
<a name="l00396"></a>00396
<a name="l00397"></a>00397     <span class="comment">//   unsigned short port_nb = socket-&gt;GetPortNb();</span>
<a name="l00398"></a>00398     <span class="comment">//   char hostname[256];</span>
<a name="l00399"></a>00399     <span class="comment">//   socket-&gt;GetHostName(hostname, 256);</span>
<a name="l00400"></a>00400
<a name="l00401"></a>00401     <span class="comment">//   printf("Server Connected on : %s:%d", hostname, (int)port_nb);</span>
<a name="l00402"></a>00402 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="568d6346baef454c48105712e402d6bd"></a><!-- doxytag: member="Omiscid::MsgSocket::InitForUdpExchange" ref="568d6346baef454c48105712e402d6bd" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgSocket::InitForUdpExchange           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialization for UDP Exchange.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>[in] port where wait for connections </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00405">405</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00115">Omiscid::Socket::Bind()</a>, <a class="el" href="_simple_string_8h-source.html#l00249">Omiscid::SimpleString::EmptyString</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00209">OMISCID_TLM</a>, <a class="el" href="_socket_8h-source.html#l00019">TCP_BUFFER_SIZE</a>, <a class="el" href="_msg_socket_8h-source.html#l00149">UDP_EXCHANGE_KIND</a>, and <a class="el" href="_socket_8h-source.html#l00020">UDP_MAX_MSG_SIZE</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00024">Omiscid::UdpExchange::Create()</a>.<div class="fragment"><pre class="fragment"><a name="l00406"></a>00406 {
<a name="l00407"></a>00407     socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#309a0816cad7f62b0b3a3d9dafe03b89">Bind</a>(<a class="code" href="class_omiscid_1_1_simple_string.html#c6fd8dc249665e634760ba47fe32e983">SimpleString::EmptyString</a>, port);
<a name="l00408"></a>00408     bufferSize = <a class="code" href="_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>;
<a name="l00409"></a>00409     buffer = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[bufferSize];
<a name="l00410"></a>00410     buffer_udp_send = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">char</span>[<a class="code" href="_socket_8h.html#ab35bfe248d0a277ab80183fcf9c8aa4">UDP_MAX_MSG_SIZE</a>];
<a name="l00411"></a>00411     kind = <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>;
<a name="l00412"></a>00412     connected = <span class="keyword">true</span>;
<a name="l00413"></a>00413     occupiedSize = 0;
<a name="l00414"></a>00414 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e6a4e463d7f2b49842a19ef632607b91"></a><!-- doxytag: member="Omiscid::MsgSocket::AddCallbackObject" ref="e6a4e463d7f2b49842a19ef632607b91" args="(MsgSocketCallbackObject *CallbackObject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::AddCallbackObject           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *&nbsp;</td>
          <td class="paramname"> <em>CallbackObject</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
define callback function called in receive
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>a</em>&nbsp;</td><td>callback object to notify </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#580c5205fd1516a5f508ab9cc39a7eb1">Omiscid::Connector</a>, and <a class="el" href="class_omiscid_1_1_tcp_server.html#d1c7a4f33733a8a33c7580d2f96ac1d4">Omiscid::TcpServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00417">417</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00392">CallbackObjects</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00343">Omiscid::TcpServer::AddCallbackObject()</a>, <a class="el" href="_connector_8cpp-source.html#l00352">Omiscid::Connector::AddCallbackObject()</a>, <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>, and <a class="el" href="_control_client_8cpp-source.html#l00252">Omiscid::ControlClient::ControlClient()</a>.<div class="fragment"><pre class="fragment"><a name="l00418"></a>00418 {
<a name="l00419"></a>00419     <span class="comment">// lock the list</span>
<a name="l00420"></a>00420     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Lock();
<a name="l00421"></a>00421
<a name="l00422"></a>00422     <span class="comment">// Is the Callback object already in the list ?</span>
<a name="l00423"></a>00423     <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.First(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.NotAtEnd(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Next() )
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425         <span class="keywordflow">if</span> ( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.GetCurrent() == CallbackObject )
<a name="l00426"></a>00426         {
<a name="l00427"></a>00427             <span class="comment">// unlock the list</span>
<a name="l00428"></a>00428             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l00429"></a>00429
<a name="l00430"></a>00430             <span class="comment">// Could not add trice the same listener</span>
<a name="l00431"></a>00431             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00432"></a>00432         }
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434
<a name="l00435"></a>00435     <span class="comment">// Add the listener</span>
<a name="l00436"></a>00436     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Add( CallbackObject );
<a name="l00437"></a>00437
<a name="l00438"></a>00438     <span class="comment">// unlock the list</span>
<a name="l00439"></a>00439     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l00440"></a>00440
<a name="l00441"></a>00441     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00442"></a>00442 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="749006fded14bc52f629ffa9cccdacf8"></a><!-- doxytag: member="Omiscid::MsgSocket::RemoveCallbackObject" ref="749006fded14bc52f629ffa9cccdacf8" args="(MsgSocketCallbackObject *CallbackObject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::RemoveCallbackObject           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *&nbsp;</td>
          <td class="paramname"> <em>CallbackObject</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove the callback for message reception.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>a</em>&nbsp;</td><td>callback object to remove from notification list </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#f22b8e86e1a4768b9f78a7fa2304b58d">Omiscid::Connector</a>, and <a class="el" href="class_omiscid_1_1_tcp_server.html#4e34be9756270406e5cad5ef1e6c988f">Omiscid::TcpServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00448">448</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00392">CallbackObjects</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00370">Omiscid::TcpServer::RemoveCallbackObject()</a>, and <a class="el" href="_connector_8cpp-source.html#l00381">Omiscid::Connector::RemoveCallbackObject()</a>.<div class="fragment"><pre class="fragment"><a name="l00449"></a>00449 {
<a name="l00450"></a>00450     <span class="comment">// lock the list</span>
<a name="l00451"></a>00451     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Lock();
<a name="l00452"></a>00452
<a name="l00453"></a>00453     <span class="comment">// Is the Callback object already in the list ?</span>
<a name="l00454"></a>00454     <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.First(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.NotAtEnd(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Next() )
<a name="l00455"></a>00455     {
<a name="l00456"></a>00456         <span class="keywordflow">if</span> ( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.GetCurrent() == CallbackObject )
<a name="l00457"></a>00457         {
<a name="l00458"></a>00458             <span class="comment">// Found ! Remove it</span>
<a name="l00459"></a>00459             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.RemoveCurrent();
<a name="l00460"></a>00460
<a name="l00461"></a>00461             <span class="comment">// unlock the list</span>
<a name="l00462"></a>00462             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l00463"></a>00463
<a name="l00464"></a>00464             <span class="comment">// ok, we remove it</span>
<a name="l00465"></a>00465             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00466"></a>00466         }
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468
<a name="l00469"></a>00469     <span class="comment">// unlock the list</span>
<a name="l00470"></a>00470     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l00471"></a>00471
<a name="l00472"></a>00472     <span class="comment">// We did not find it</span>
<a name="l00473"></a>00473     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00474"></a>00474 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e23f86137b974c4b6aea0d07997a0bc3"></a><!-- doxytag: member="Omiscid::MsgSocket::SetName" ref="e23f86137b974c4b6aea0d07997a0bc3" args="(const SimpleString NewName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgSocket::SetName           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td>
          <td class="paramname"> <em>NewName</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to set names on <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>
<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#5723d5976e777a330a152ec8f13bbbe4">Omiscid::Connector</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00172">172</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>, and <a class="el" href="_connector_8cpp-source.html#l00054">Omiscid::Connector::SetName()</a>.<div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 {
<a name="l00174"></a>00174     Name = NewName;
<a name="l00175"></a>00175 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b0c5b480cb6cfbe936453014348e203e"></a><!-- doxytag: member="Omiscid::MsgSocket::GetName" ref="b0c5b480cb6cfbe936453014348e203e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> MsgSocket::GetName           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to set names on <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>
<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#5e22460fe080d9818cb6dd3accc0a121">Omiscid::Connector</a>, <a class="el" href="class_omiscid_1_1_service.html#8a23c9630d2db2128e36ada08fee6429">Omiscid::Service</a>, and <a class="el" href="class_omiscid_1_1_service_proxy.html#941d508da01ac820390cb154f693c2e1">Omiscid::ServiceProxy</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00177">177</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_simple_string_8cpp-source.html#l00931">Omiscid::SimpleString::IsEmpty()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>, <a class="el" href="_control_client_8cpp-source.html#l00854">Omiscid::ControlClient::FindInOutput()</a>, <a class="el" href="_control_client_8cpp-source.html#l00836">Omiscid::ControlClient::FindInput()</a>, <a class="el" href="_control_client_8cpp-source.html#l00845">Omiscid::ControlClient::FindOutput()</a>, <a class="el" href="_control_client_8cpp-source.html#l00826">Omiscid::ControlClient::FindVariable()</a>, and <a class="el" href="_connector_8cpp-source.html#l00068">Omiscid::Connector::GetName()</a>.<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178 {
<a name="l00179"></a>00179     <span class="keywordflow">if</span> ( Name.<a class="code" href="class_omiscid_1_1_simple_string.html#62904c6a00fc34787091a1fa1e119956">IsEmpty</a>() )
<a name="l00180"></a>00180     {
<a name="l00181"></a>00181         <span class="keywordflow">return</span> DefaultMsgSocketName;
<a name="l00182"></a>00182     }
<a name="l00183"></a>00183     <span class="keywordflow">return</span> Name;
<a name="l00184"></a>00184 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dcae5a3be1bbfd31d4cbbe820d68a970"></a><!-- doxytag: member="Omiscid::MsgSocket::SetCallbackSyncLink" ref="dcae5a3be1bbfd31d4cbbe820d68a970" args="(Callback_SyncLink cr, void *user_data1=NULL, void *user_data2=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgSocket::SetCallbackSyncLink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a>&nbsp;</td>
          <td class="paramname"> <em>cr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data1</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data2</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
define callback function called in receive
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cr</em>&nbsp;</td><td>the callback call on receive message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data1</em>&nbsp;</td><td>pointer on data (will be found in the callback parameter) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data2</em>&nbsp;</td><td>pointer on data (will be found in the callback parameter) </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00488">488</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_message_8h-source.html#l00077">Omiscid::Message::buffer</a>, <a class="el" href="_msg_socket_8h-source.html#l00397">callbackSyncLinkData</a>, <a class="el" href="_msg_socket_8h-source.html#l00396">callbackSyncLinkFct</a>, <a class="el" href="_mutex_8cpp-source.html#l00046">Omiscid::Mutex::EnterMutex()</a>, <a class="el" href="_mutex_8cpp-source.html#l00069">Omiscid::Mutex::LeaveMutex()</a>, <a class="el" href="_message_8h-source.html#l00078">Omiscid::Message::len</a>, <a class="el" href="_msg_socket_8h-source.html#l00035">Omiscid::MsgSocketCallBackData::Msg</a>, <a class="el" href="_msg_socket_8h-source.html#l00395">mutex</a>, <a class="el" href="_msg_socket_8h-source.html#l00036">Omiscid::MsgSocketCallBackData::userData1</a>, and <a class="el" href="_msg_socket_8h-source.html#l00037">Omiscid::MsgSocketCallBackData::userData2</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>, and <a class="el" href="_connector_8cpp-source.html#l00041">Omiscid::Connector::Create()</a>.<div class="fragment"><pre class="fragment"><a name="l00489"></a>00489 {
<a name="l00490"></a>00490     <a class="code" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">mutex</a>.<a class="code" href="class_omiscid_1_1_mutex.html#8caff9254f412a46c84075261e325743">EnterMutex</a>();
<a name="l00491"></a>00491
<a name="l00492"></a>00492     <a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a> = cr;
<a name="l00493"></a>00493
<a name="l00494"></a>00494     <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#8280558340d705cb00e23e2a7e46cf11">Msg</a>.<a class="code" href="class_omiscid_1_1_message.html#957b3b27097afaa7c59ac0e0812c33e9">len</a> = 0;
<a name="l00495"></a>00495     <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#8280558340d705cb00e23e2a7e46cf11">Msg</a>.<a class="code" href="class_omiscid_1_1_message.html#6d1fc92e7bcb8093a192605ce05ccb0c">buffer</a> = NULL;
<a name="l00496"></a>00496     <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#17ba8ff15c9b3774e5d87614ff90e0a1">userData1</a> = user_data1;
<a name="l00497"></a>00497     <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#02be2c2528533e57fa4ddaf5b76a97a8">userData2</a> = user_data2;
<a name="l00498"></a>00498
<a name="l00499"></a>00499     <a class="code" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">mutex</a>.<a class="code" href="class_omiscid_1_1_mutex.html#478cbb03b7704d5c9909e40165748b28">LeaveMutex</a>();
<a name="l00500"></a>00500 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="01ceb5ec9a28d28fcf402acf5c35fbef"></a><!-- doxytag: member="Omiscid::MsgSocket::Run" ref="01ceb5ec9a28d28fcf402acf5c35fbef" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FUNCTION_CALL_TYPE MsgSocket::Run           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
method call when the <a class="el" href="class_omiscid_1_1_thread.html">Thread</a> is started
<p>
According to the kind of <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> :<ul>
<li>receive the message on UDP, on TCP,</li><li>accept the connection for TCP_SERVER </li></ul>

<p>
Implements <a class="el" href="class_omiscid_1_1_thread.html#9527b3c79a6302f29d0bbc774e707f53">Omiscid::Thread</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00590">590</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8cpp-source.html#l00925">AcceptConnection()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00226">Omiscid::OmiscidError()</a>, <a class="el" href="_thread_8cpp-source.html#l00158">Omiscid::Thread::StopPending()</a>, <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>, <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>, and <a class="el" href="_msg_socket_8h-source.html#l00149">UDP_EXCHANGE_KIND</a>.<div class="fragment"><pre class="fragment"><a name="l00591"></a>00591 {
<a name="l00592"></a>00592     <span class="keywordflow">switch</span> (kind)
<a name="l00593"></a>00593     {
<a name="l00594"></a>00594     <span class="keywordflow">case</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>:
<a name="l00595"></a>00595         <span class="keywordflow">while</span>(connected &amp;&amp; !<a class="code" href="class_omiscid_1_1_thread.html#6ea60778f06e88bfb8061a6c9c201208">StopPending</a>())
<a name="l00596"></a>00596         {
<a name="l00597"></a>00597             <span class="comment">//printf("MsgSocket::run : tcp_server loop\n");</span>
<a name="l00598"></a>00598             <a class="code" href="class_omiscid_1_1_msg_socket.html#626bf84517ed66dd14358ba09da0dac4">AcceptConnection</a>();
<a name="l00599"></a>00599         }
<a name="l00600"></a>00600         <span class="keywordflow">break</span>;
<a name="l00601"></a>00601
<a name="l00602"></a>00602     <span class="keywordflow">case</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>:
<a name="l00603"></a>00603         <span class="keywordflow">while</span>(connected &amp;&amp; !<a class="code" href="class_omiscid_1_1_thread.html#6ea60778f06e88bfb8061a6c9c201208">StopPending</a>())
<a name="l00604"></a>00604         {
<a name="l00605"></a>00605             <span class="comment">//printf("MsgSocket::run : tcp_client loop\n");</span>
<a name="l00606"></a>00606             Receive();
<a name="l00607"></a>00607         }
<a name="l00608"></a>00608         <span class="keywordflow">break</span>;
<a name="l00609"></a>00609
<a name="l00610"></a>00610     <span class="keywordflow">case</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>:
<a name="l00611"></a>00611         <span class="keywordflow">while</span>(connected &amp;&amp; !<a class="code" href="class_omiscid_1_1_thread.html#6ea60778f06e88bfb8061a6c9c201208">StopPending</a>())
<a name="l00612"></a>00612         {
<a name="l00613"></a>00613             ReceiveUdpExchange();
<a name="l00614"></a>00614         }
<a name="l00615"></a>00615         <span class="keywordflow">break</span>;
<a name="l00616"></a>00616
<a name="l00617"></a>00617     <span class="keywordflow">default</span>:
<a name="l00618"></a>00618         <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"run : unknown type of connection\n"</span>);
<a name="l00619"></a>00619         <span class="keywordflow">break</span>;
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7496fe09ce10bd84eac5ea6e44c8bc31"></a><!-- doxytag: member="Omiscid::MsgSocket::Send" ref="7496fe09ce10bd84eac5ea6e44c8bc31" args="(int len, const char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MsgSocket::Send           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a message (on TCP) by using the BIP protocol.
<p>
add tag around data in buf before sending them <div class="fragment"><pre class="fragment">
   * BIP/1.0 pid mid size\r\n
   * ... data ...
   * /r/n
   * </pre></div> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>[in] number of byte to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>[in] buffer to send </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of byte send (byte of data + tag) (-1 if error occured) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00932">932</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00392">CallbackObjects</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00045">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00063">Omiscid::SimpleException::err</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01519">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00921">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00068">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00062">Omiscid::SimpleException::msg</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00234">Omiscid::OmiscidTrace()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00268">PrepareBufferForBip()</a>, <a class="el" href="_socket_8cpp-source.html#l00342">Omiscid::Socket::Send()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00145">SOCKET_ERROR</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00347">WriteHeaderForBip()</a>.
<p>
Referenced by <a class="el" href="_control_server_8cpp-source.html#l00389">Omiscid::ControlServer::ProcessAMessage()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00103">Omiscid::TcpServer::SendToAllClients()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00058">Omiscid::TcpServer::SendToClient()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00029">Omiscid::TcpClient::SendToServer()</a>.<div class="fragment"><pre class="fragment"><a name="l00933"></a>00933 {
<a name="l00934"></a>00934     <span class="keywordtype">int</span> TotalLen = 0;
<a name="l00935"></a>00935
<a name="l00936"></a>00936     protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l00937"></a>00937     <span class="keywordflow">try</span>
<a name="l00938"></a>00938     {
<a name="l00939"></a>00939         <span class="keywordflow">if</span> ( Sendlen &gt; maxBIPMessageSize )
<a name="l00940"></a>00940         {
<a name="l00941"></a>00941             <span class="keywordtype">int</span> HeaderSend      = 0;
<a name="l00942"></a>00942             <span class="comment">// int BodySend     = 0;</span>
<a name="l00943"></a>00943             <span class="keywordtype">int</span> TailerSend      = 0;
<a name="l00944"></a>00944             <span class="comment">// int ResSend              = 0;</span>
<a name="l00945"></a>00945
<a name="l00946"></a>00946             <span class="comment">// OmiscidTrace( "Message too big for one TCP frame (size=%d, sizemax=%d) sends many.\n", Sendlen, maxMessageSizeForTCP);</span>
<a name="l00947"></a>00947             TotalLen = <a class="code" href="class_omiscid_1_1_msg_socket.html#bd49aef27290642697e6428ec2e07597">PrepareBufferForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, NULL, Sendlen, <span class="keyword">true</span> );
<a name="l00948"></a>00948             <span class="keywordflow">if</span> ( TotalLen == -1 )
<a name="l00949"></a>00949             {
<a name="l00950"></a>00950                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l00951"></a>00951                 <span class="keywordflow">return</span> -1;
<a name="l00952"></a>00952             }
<a name="l00953"></a>00953
<a name="l00954"></a>00954             <span class="comment">// We complete the header</span>
<a name="l00955"></a>00955             <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, service_id, message_id );
<a name="l00956"></a>00956
<a name="l00957"></a>00957             <span class="comment">// Increase the number for the next message</span>
<a name="l00958"></a>00958             message_id++;
<a name="l00959"></a>00959
<a name="l00960"></a>00960             <span class="comment">// Send header</span>
<a name="l00961"></a>00961             HeaderSend = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(TotalLen, (<span class="keywordtype">char</span>*)SendBuffer);
<a name="l00962"></a>00962
<a name="l00963"></a>00963             <span class="keywordflow">if</span> ( HeaderSend != TotalLen )
<a name="l00964"></a>00964             {
<a name="l00965"></a>00965                 <span class="keywordflow">return</span> -1;
<a name="l00966"></a>00966             }
<a name="l00967"></a>00967
<a name="l00968"></a>00968             <span class="comment">// Let's send data...</span>
<a name="l00969"></a>00969             TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>( Sendlen, (<span class="keywordtype">char</span>*)(buf) );
<a name="l00970"></a>00970             <span class="keywordflow">if</span> ( TotalLen == <a class="code" href="group___system.html#g633b0396ff93d336a088412a190a5072">SOCKET_ERROR</a> )
<a name="l00971"></a>00971             {
<a name="l00972"></a>00972                 <span class="keywordflow">return</span> -1;
<a name="l00973"></a>00973             }
<a name="l00974"></a>00974
<a name="l00975"></a>00975             TailerSend = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>( tag_end_size, tag_end );
<a name="l00976"></a>00976             <span class="keywordflow">if</span> ( TailerSend == <a class="code" href="group___system.html#g633b0396ff93d336a088412a190a5072">SOCKET_ERROR</a> )
<a name="l00977"></a>00977             {
<a name="l00978"></a>00978                 <span class="keywordflow">return</span> -1;
<a name="l00979"></a>00979             }
<a name="l00980"></a>00980
<a name="l00981"></a>00981             <span class="keywordflow">return</span> HeaderSend + TotalLen + TailerSend;
<a name="l00982"></a>00982         }
<a name="l00983"></a>00983
<a name="l00984"></a>00984         TotalLen = <a class="code" href="class_omiscid_1_1_msg_socket.html#bd49aef27290642697e6428ec2e07597">PrepareBufferForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, buf, Sendlen );
<a name="l00985"></a>00985         <span class="keywordflow">if</span> ( TotalLen == -1 )
<a name="l00986"></a>00986         {
<a name="l00987"></a>00987             protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l00988"></a>00988             <span class="keywordflow">return</span> -1;
<a name="l00989"></a>00989         }
<a name="l00990"></a>00990
<a name="l00991"></a>00991         <span class="comment">// We complete the header</span>
<a name="l00992"></a>00992         <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, service_id, message_id );
<a name="l00993"></a>00993
<a name="l00994"></a>00994         <span class="comment">// Increase the number for the next message</span>
<a name="l00995"></a>00995         message_id++;
<a name="l00996"></a>00996
<a name="l00997"></a>00997         <span class="comment">// if ( (TotalLen = socket-&gt;Send(TotalLen, (char*)SendBuffer)) == -1)</span>
<a name="l00998"></a>00998         <span class="comment">// {</span>
<a name="l00999"></a>00999         <span class="comment">//      TotalLen = -1;</span>
<a name="l01000"></a>01000         <span class="comment">//}</span>
<a name="l01001"></a>01001         TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(TotalLen, (<span class="keywordtype">char</span>*)SendBuffer);
<a name="l01002"></a>01002
<a name="l01003"></a>01003 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01004"></a>01004 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ( Debug &amp; DBG_SEND )
<a name="l01005"></a>01005         {
<a name="l01006"></a>01006             SendBuffer[TotalLen] = <span class="charliteral">'\0'</span>;
<a name="l01007"></a>01007             fprintf( stderr, <span class="stringliteral">"MsgSocket::Send: %s (%d)\n"</span>, SendBuffer, TotalLen );
<a name="l01008"></a>01008         }
<a name="l01009"></a>01009 <span class="preprocessor">#endif</span>
<a name="l01010"></a>01010 <span class="preprocessor"></span>
<a name="l01011"></a>01011         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01012"></a>01012         <span class="keywordflow">return</span> (TotalLen-tag_end_size-tag_size);
<a name="l01013"></a>01013     }
<a name="l01014"></a>01014     <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l01015"></a>01015     {
<a name="l01016"></a>01016         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d\n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#073b80f513204da691abc6b2f9b03338">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l01017"></a>01017         <span class="keywordflow">if</span> ( connected )
<a name="l01018"></a>01018         {
<a name="l01019"></a>01019             <span class="comment">// Send disconnected message</span>
<a name="l01020"></a>01020             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Lock();
<a name="l01021"></a>01021             <span class="comment">// Send info to all listener</span>
<a name="l01022"></a>01022             <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.First(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.NotAtEnd(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Next() )
<a name="l01023"></a>01023             {
<a name="l01024"></a>01024                 <span class="keywordflow">try</span>
<a name="l01025"></a>01025                 {
<a name="l01026"></a>01026                     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.GetCurrent()-&gt;Disconnected(*<span class="keyword">this</span>,<a class="code" href="class_omiscid_1_1_msg_socket.html#3426f728c7e5b7e37376dc9ccc0f4d42">GetPeerPid</a>());
<a name="l01027"></a>01027                 }
<a name="l01028"></a>01028                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {}      <span class="comment">// Discard it...</span>
<a name="l01029"></a>01029             }
<a name="l01030"></a>01030             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l01031"></a>01031             connected = <span class="keyword">false</span>;
<a name="l01032"></a>01032         }
<a name="l01033"></a>01033         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01034"></a>01034         <span class="keywordflow">return</span> -1;
<a name="l01035"></a>01035     }
<a name="l01036"></a>01036 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b80c9ed1145f7d4e42240f6b8de09c0f"></a><!-- doxytag: member="Omiscid::MsgSocket::SendPreparedBuffer" ref="b80c9ed1145f7d4e42240f6b8de09c0f" args="(int len, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MsgSocket::SendPreparedBuffer           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a preformated BIP message (on TCP) by using the BIP protocol.
<p>
add tag at the bigning of buf and send it <div class="fragment"><pre class="fragment">
   * BIP/1.0 pid mid size\r\n
   * ... data ...
   * /r/n
   * </pre></div> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>[in] number of byte to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>[in,out] buffer to modify and send </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of byte send (byte of data + tag) (-1 if error occured) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01158">1158</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00392">CallbackObjects</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00045">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00063">Omiscid::SimpleException::err</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01519">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00921">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00068">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00062">Omiscid::SimpleException::msg</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00226">Omiscid::OmiscidError()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00234">Omiscid::OmiscidTrace()</a>, <a class="el" href="_socket_8cpp-source.html#l00342">Omiscid::Socket::Send()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00347">WriteHeaderForBip()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00103">Omiscid::TcpServer::SendToAllClients()</a>.<div class="fragment"><pre class="fragment"><a name="l01159"></a>01159 {
<a name="l01160"></a>01160     <span class="keywordflow">if</span>(l_buffer == NULL)
<a name="l01161"></a>01161     {
<a name="l01162"></a>01162         <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"SendPreparedBuffer : NULL mesg\n"</span> );
<a name="l01163"></a>01163         <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>(<span class="stringliteral">"Message NULL for TCP"</span>);
<a name="l01164"></a>01164     }
<a name="l01165"></a>01165
<a name="l01166"></a>01166     <span class="keywordflow">if</span>(len &gt; maxMessageSizeForTCP)
<a name="l01167"></a>01167     {
<a name="l01168"></a>01168         <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"Message too big for TCP (size=%d, sizemax=%d) so not sended.\n"</span>, len, maxMessageSizeForTCP);
<a name="l01169"></a>01169         <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>(<span class="stringliteral">"Message too big for TCP"</span>);
<a name="l01170"></a>01170     }
<a name="l01171"></a>01171
<a name="l01172"></a>01172     protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l01173"></a>01173     <span class="keywordflow">try</span>
<a name="l01174"></a>01174     {
<a name="l01175"></a>01175         <span class="comment">// Here we've got a full buffer and we can (must) write our header at the in at the beginning !</span>
<a name="l01176"></a>01176         <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>(l_buffer, service_id, message_id );
<a name="l01177"></a>01177 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01178"></a>01178 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ( Debug &amp; DBG_SEND )
<a name="l01179"></a>01179         {
<a name="l01180"></a>01180             <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"MsgSocket::SendPreparedBuffer %s\n"</span>, l_buffer );
<a name="l01181"></a>01181         }
<a name="l01182"></a>01182 <span class="preprocessor">#endif</span>
<a name="l01183"></a>01183 <span class="preprocessor"></span>
<a name="l01184"></a>01184         message_id++;
<a name="l01185"></a>01185
<a name="l01186"></a>01186         <span class="comment">//socket-&gt;Send(strlen(start_tag), start_tag);</span>
<a name="l01187"></a>01187         <span class="keywordtype">int</span> res;
<a name="l01188"></a>01188         <span class="keywordflow">if</span>((res = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(len, l_buffer)) != -1)
<a name="l01189"></a>01189         {
<a name="l01190"></a>01190             protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01191"></a>01191             <span class="keywordflow">return</span> res;
<a name="l01192"></a>01192         }
<a name="l01193"></a>01193         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"Erreur Send (-1)\n"</span> );
<a name="l01194"></a>01194         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01195"></a>01195         <span class="keywordflow">return</span> -1;
<a name="l01196"></a>01196
<a name="l01197"></a>01197     }
<a name="l01198"></a>01198     <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l01199"></a>01199     {
<a name="l01200"></a>01200         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d\n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#073b80f513204da691abc6b2f9b03338">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l01201"></a>01201         <span class="keywordflow">if</span> ( connected )
<a name="l01202"></a>01202         {
<a name="l01203"></a>01203             <span class="comment">// Send disconnected message</span>
<a name="l01204"></a>01204             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Lock();
<a name="l01205"></a>01205             <span class="comment">// Send info to all listener</span>
<a name="l01206"></a>01206             <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.First(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.NotAtEnd(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Next() )
<a name="l01207"></a>01207             {
<a name="l01208"></a>01208                 <span class="keywordflow">try</span>
<a name="l01209"></a>01209                 {
<a name="l01210"></a>01210                     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.GetCurrent()-&gt;Disconnected(*<span class="keyword">this</span>, <a class="code" href="class_omiscid_1_1_msg_socket.html#3426f728c7e5b7e37376dc9ccc0f4d42">GetPeerPid</a>());
<a name="l01211"></a>01211                 }
<a name="l01212"></a>01212                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l01213"></a>01213             }
<a name="l01214"></a>01214             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l01215"></a>01215             connected = <span class="keyword">false</span>;
<a name="l01216"></a>01216         }
<a name="l01217"></a>01217         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01218"></a>01218         <span class="keywordflow">return</span> -1;
<a name="l01219"></a>01219     }
<a name="l01220"></a>01220 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4a2314b70a47858c24edbaa8636bcbe6"></a><!-- doxytag: member="Omiscid::MsgSocket::SendCuttedMsg" ref="4a2314b70a47858c24edbaa8636bcbe6" args="(int *tab_len, const char **tab_buf, int nb_buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MsgSocket::SendCuttedMsg           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>tab_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>tab_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nb_buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a message in several part (on TCP) by using the BIP protocol.
<p>
The parts of the message are sent the one per one, the all message is put between BIP tag. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tab_len</em>&nbsp;</td><td>[in] array of buffer size : the size of each buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tab_buf</em>&nbsp;</td><td>[in] array of buffer : the buffers to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nb_buf</em>&nbsp;</td><td>[in] the number of buffer to send : the number of buffer in the array </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of byte send (byte of data + tag) (-1 if error occured) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01038">1038</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00392">CallbackObjects</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00045">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00063">Omiscid::SimpleException::err</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01519">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00921">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00068">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00062">Omiscid::SimpleException::msg</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00234">Omiscid::OmiscidTrace()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00268">PrepareBufferForBip()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00300">PrepareBufferForBipFromCuttedMsg()</a>, <a class="el" href="_socket_8cpp-source.html#l00342">Omiscid::Socket::Send()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00145">SOCKET_ERROR</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00347">WriteHeaderForBip()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00187">Omiscid::TcpServer::SendToAllClients()</a>, and <a class="el" href="_tcp_server_8cpp-source.html#l00080">Omiscid::TcpServer::SendToClient()</a>.<div class="fragment"><pre class="fragment"><a name="l01039"></a>01039 {
<a name="l01040"></a>01040     <span class="keywordtype">int</span> i;
<a name="l01041"></a>01041     <span class="keywordtype">int</span> SendLen;
<a name="l01042"></a>01042     <span class="keywordtype">int</span> TotalLen;
<a name="l01043"></a>01043
<a name="l01044"></a>01044     <span class="comment">// Compute the len of all buffers</span>
<a name="l01045"></a>01045     <span class="keywordflow">for</span>( SendLen = 0, i = 0; i &lt; nb_buf; i ++ )
<a name="l01046"></a>01046     {
<a name="l01047"></a>01047         SendLen += tab_length[i];
<a name="l01048"></a>01048     }
<a name="l01049"></a>01049
<a name="l01050"></a>01050     protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l01051"></a>01051     <span class="keywordflow">try</span>
<a name="l01052"></a>01052     {
<a name="l01053"></a>01053         <span class="keywordflow">if</span> ( SendLen &gt; maxBIPMessageSize )
<a name="l01054"></a>01054         {
<a name="l01055"></a>01055             <span class="keywordtype">int</span> HeaderSend      = 0;
<a name="l01056"></a>01056             <span class="keywordtype">int</span> BodySend        = 0;
<a name="l01057"></a>01057             <span class="keywordtype">int</span> TailerSend      = 0;
<a name="l01058"></a>01058             <span class="comment">// int ResSend              = 0;</span>
<a name="l01059"></a>01059
<a name="l01060"></a>01060             <span class="comment">// OmiscidTrace( "Message too big for one TCP frame (size=%d, sizemax=%d) sends many.\n", SendLen, maxMessageSizeForTCP);</span>
<a name="l01061"></a>01061
<a name="l01062"></a>01062             <span class="comment">// prepare buffer</span>
<a name="l01063"></a>01063             TotalLen = <a class="code" href="class_omiscid_1_1_msg_socket.html#bd49aef27290642697e6428ec2e07597">PrepareBufferForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, NULL, SendLen, <span class="keyword">true</span> );
<a name="l01064"></a>01064             <span class="keywordflow">if</span> ( TotalLen == -1 )
<a name="l01065"></a>01065             {
<a name="l01066"></a>01066                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01067"></a>01067                 <span class="keywordflow">return</span> -1;
<a name="l01068"></a>01068             }
<a name="l01069"></a>01069
<a name="l01070"></a>01070             <span class="comment">// We complete the header</span>
<a name="l01071"></a>01071             <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, service_id, message_id );
<a name="l01072"></a>01072
<a name="l01073"></a>01073             <span class="comment">// Increase the number for the next message</span>
<a name="l01074"></a>01074             message_id++;
<a name="l01075"></a>01075
<a name="l01076"></a>01076             <span class="comment">// Send header</span>
<a name="l01077"></a>01077             HeaderSend = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(TotalLen, (<span class="keywordtype">char</span>*)SendBuffer);
<a name="l01078"></a>01078
<a name="l01079"></a>01079             <span class="keywordflow">if</span> ( HeaderSend != TotalLen )
<a name="l01080"></a>01080             {
<a name="l01081"></a>01081                 <span class="keywordflow">return</span> -1;
<a name="l01082"></a>01082             }
<a name="l01083"></a>01083
<a name="l01084"></a>01084             <span class="comment">// Send all parts of the message</span>
<a name="l01085"></a>01085             <span class="keywordflow">for</span>( i = 0; i &lt; nb_buf; i ++ )
<a name="l01086"></a>01086             {
<a name="l01087"></a>01087                 TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>( tab_length[i], tab_buf[i] );
<a name="l01088"></a>01088
<a name="l01089"></a>01089                 <span class="keywordflow">if</span> ( TotalLen == <a class="code" href="group___system.html#g633b0396ff93d336a088412a190a5072">SOCKET_ERROR</a> )
<a name="l01090"></a>01090                 {
<a name="l01091"></a>01091                     <span class="keywordflow">return</span> -1;
<a name="l01092"></a>01092                 }
<a name="l01093"></a>01093
<a name="l01094"></a>01094                 BodySend += TotalLen;
<a name="l01095"></a>01095             }
<a name="l01096"></a>01096
<a name="l01097"></a>01097             <span class="comment">// Send end of the message</span>
<a name="l01098"></a>01098             TailerSend = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>( tag_end_size, tag_end );
<a name="l01099"></a>01099             <span class="keywordflow">if</span> ( TailerSend == -1 )
<a name="l01100"></a>01100             {
<a name="l01101"></a>01101                 <span class="keywordflow">return</span> -1;
<a name="l01102"></a>01102             }
<a name="l01103"></a>01103
<a name="l01104"></a>01104             <span class="keywordflow">return</span> HeaderSend + BodySend + TailerSend;
<a name="l01105"></a>01105         }
<a name="l01106"></a>01106
<a name="l01107"></a>01107
<a name="l01108"></a>01108         TotalLen = <a class="code" href="class_omiscid_1_1_msg_socket.html#0e59a668c2605cd4fae73fdb679dd615">PrepareBufferForBipFromCuttedMsg</a>( (<span class="keywordtype">char</span>*)SendBuffer, tab_length, tab_buf, nb_buf);
<a name="l01109"></a>01109         <span class="keywordflow">if</span> ( TotalLen == -1 )
<a name="l01110"></a>01110         {
<a name="l01111"></a>01111             protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01112"></a>01112             <span class="keywordflow">return</span> -1;
<a name="l01113"></a>01113         }
<a name="l01114"></a>01114         <span class="comment">// We complete the header</span>
<a name="l01115"></a>01115         <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, service_id, message_id );
<a name="l01116"></a>01116
<a name="l01117"></a>01117 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01118"></a>01118 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ( Debug &amp; DBG_SEND )
<a name="l01119"></a>01119         {
<a name="l01120"></a>01120             <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"MsgSocket::SendPreparedBuffer %s\n"</span>, SendBuffer );
<a name="l01121"></a>01121         }
<a name="l01122"></a>01122 <span class="preprocessor">#endif</span>
<a name="l01123"></a>01123 <span class="preprocessor"></span>
<a name="l01124"></a>01124         <span class="comment">// Increase the number for the next message</span>
<a name="l01125"></a>01125         ++message_id;
<a name="l01126"></a>01126
<a name="l01127"></a>01127         <span class="keywordflow">if</span> ( (TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(TotalLen, (<span class="keywordtype">char</span>*)SendBuffer)) == -1)
<a name="l01128"></a>01128         {
<a name="l01129"></a>01129             TotalLen = -1;
<a name="l01130"></a>01130         }
<a name="l01131"></a>01131         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01132"></a>01132         <span class="keywordflow">return</span> TotalLen;
<a name="l01133"></a>01133     }
<a name="l01134"></a>01134     <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l01135"></a>01135     {
<a name="l01136"></a>01136         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d\n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#073b80f513204da691abc6b2f9b03338">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l01137"></a>01137         <span class="keywordflow">if</span> ( connected )
<a name="l01138"></a>01138         {
<a name="l01139"></a>01139             <span class="comment">// Send disconnected message</span>
<a name="l01140"></a>01140             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Lock();
<a name="l01141"></a>01141             <span class="comment">// Send info to all listener</span>
<a name="l01142"></a>01142             <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.First(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.NotAtEnd(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Next() )
<a name="l01143"></a>01143             {
<a name="l01144"></a>01144                 <span class="keywordflow">try</span>
<a name="l01145"></a>01145                 {
<a name="l01146"></a>01146                     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.GetCurrent()-&gt;Disconnected(*<span class="keyword">this</span>, <a class="code" href="class_omiscid_1_1_msg_socket.html#3426f728c7e5b7e37376dc9ccc0f4d42">GetPeerPid</a>());
<a name="l01147"></a>01147                 }
<a name="l01148"></a>01148                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l01149"></a>01149             }
<a name="l01150"></a>01150             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l01151"></a>01151             connected = <span class="keyword">false</span>;
<a name="l01152"></a>01152         }
<a name="l01153"></a>01153         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01154"></a>01154         <span class="keywordflow">return</span> -1;
<a name="l01155"></a>01155     }
<a name="l01156"></a>01156 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5c449b68e25f5cf173d0a69a699a975b"></a><!-- doxytag: member="Omiscid::MsgSocket::SendTo" ref="5c449b68e25f5cf173d0a69a699a975b" args="(int len, const char *buf, UdpConnection *udp_dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MsgSocket::SendTo           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> *&nbsp;</td>
          <td class="paramname"> <em>udp_dest</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a message (on UDP) by using BIP protocol <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>[in] number of byte to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>[in] buffer to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>udp_dest</em>&nbsp;</td><td>[in] the destination for the message </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of byte send (-1 if error occured) </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_udp_exchange.html#e41aa7e950ccad40424e0a98d557d637">Omiscid::UdpExchange</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01223">1223</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00083">Omiscid::UdpConnection::addr</a>, <a class="el" href="_msg_socket_8h-source.html#l00392">CallbackObjects</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00045">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00063">Omiscid::SimpleException::err</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01519">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00921">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00068">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00062">Omiscid::SimpleException::msg</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00209">OMISCID_TLM</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00226">Omiscid::OmiscidError()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00234">Omiscid::OmiscidTrace()</a>, <a class="el" href="_socket_8cpp-source.html#l00398">Omiscid::Socket::SendTo()</a>, and <a class="el" href="_socket_8h-source.html#l00020">UDP_MAX_MSG_SIZE</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00048">Omiscid::UdpExchange::SendTo()</a>.<div class="fragment"><pre class="fragment"><a name="l01224"></a>01224 {
<a name="l01225"></a>01225     <span class="comment">//   OmiscidTrace( "in MsgSocket::SendTo\n");</span>
<a name="l01226"></a>01226     <span class="comment">//   OmiscidTrace( "send to pid : %u\n", dest-&gt;pid);</span>
<a name="l01227"></a>01227     <span class="keywordflow">if</span>(len &gt; <a class="code" href="_socket_8h.html#ab35bfe248d0a277ab80183fcf9c8aa4">UDP_MAX_MSG_SIZE</a>){
<a name="l01228"></a>01228         <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"Message too big for UDP size=%d,  sizemax=%d\n"</span>, len, <a class="code" href="_socket_8h.html#ab35bfe248d0a277ab80183fcf9c8aa4">UDP_MAX_MSG_SIZE</a>);
<a name="l01229"></a>01229         <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>(<span class="stringliteral">"Message too big for UDP"</span>);
<a name="l01230"></a>01230     }
<a name="l01231"></a>01231
<a name="l01232"></a>01232     protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l01233"></a>01233     <span class="keywordflow">if</span> ( buffer_udp_send == NULL )
<a name="l01234"></a>01234     {
<a name="l01235"></a>01235         buffer_udp_send = <span class="keyword">new</span> <a class="code" href="_system_2_system_2_config_8h.html#87a9b7794230e905ae0170f5782a08cd">OMISCID_TLM</a> <span class="keywordtype">char</span>[2048];
<a name="l01236"></a>01236         <span class="keywordflow">if</span> ( buffer_udp_send == NULL )
<a name="l01237"></a>01237         {
<a name="l01238"></a>01238             protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01239"></a>01239             <span class="keywordflow">return</span> 0;
<a name="l01240"></a>01240         }
<a name="l01241"></a>01241     }
<a name="l01242"></a>01242     <span class="keywordflow">try</span>
<a name="l01243"></a>01243     {
<a name="l01244"></a>01244         <span class="keyword">struct </span>sockaddr_in* destptr = &amp;(dest-&gt;addr);
<a name="l01245"></a>01245
<a name="l01246"></a>01246         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total = tag_size+len+tag_end_size;
<a name="l01247"></a>01247
<a name="l01248"></a>01248         sprintf(buffer_udp_send, tag_str, service_id, message_id, len);
<a name="l01249"></a>01249         ++message_id;
<a name="l01250"></a>01250         sprintf((buffer_udp_send+total-tag_end_size), tag_end);
<a name="l01251"></a>01251         memcpy(buffer_udp_send+tag_size, buf, len);
<a name="l01252"></a>01252
<a name="l01253"></a>01253         <span class="keywordtype">int</span> TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#325ef1bedf42b839bec08d776905e05e">SendTo</a>(total, buffer_udp_send, destptr);
<a name="l01254"></a>01254         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01255"></a>01255         <span class="keywordflow">return</span> TotalLen;
<a name="l01256"></a>01256
<a name="l01257"></a>01257         <span class="comment">//        socket-&gt;SendTo(strlen(start_tag), start_tag, destptr);</span>
<a name="l01258"></a>01258         <span class="comment">//        socket-&gt;SendTo(len, buf, destptr);</span>
<a name="l01259"></a>01259         <span class="comment">//        socket-&gt;SendTo(tag_end_size, tag_end, destptr);</span>
<a name="l01260"></a>01260
<a name="l01261"></a>01261     }
<a name="l01262"></a>01262     <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l01263"></a>01263     {
<a name="l01264"></a>01264         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d \n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#073b80f513204da691abc6b2f9b03338">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l01265"></a>01265         <span class="keywordflow">if</span> ( connected )
<a name="l01266"></a>01266         {
<a name="l01267"></a>01267             <span class="comment">// Send disconnected message</span>
<a name="l01268"></a>01268             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Lock();
<a name="l01269"></a>01269             <span class="comment">// Send info to all listener</span>
<a name="l01270"></a>01270             <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.First(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.NotAtEnd(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Next() )
<a name="l01271"></a>01271             {
<a name="l01272"></a>01272                 <span class="keywordflow">try</span>
<a name="l01273"></a>01273                 {
<a name="l01274"></a>01274                     <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.GetCurrent()-&gt;Disconnected(*<span class="keyword">this</span>,<a class="code" href="class_omiscid_1_1_msg_socket.html#3426f728c7e5b7e37376dc9ccc0f4d42">GetPeerPid</a>());
<a name="l01275"></a>01275                 }
<a name="l01276"></a>01276                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l01277"></a>01277             }
<a name="l01278"></a>01278             <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l01279"></a>01279             connected = <span class="keyword">false</span>;
<a name="l01280"></a>01280         }
<a name="l01281"></a>01281         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01282"></a>01282         <span class="keywordflow">return</span> -1;
<a name="l01283"></a>01283     }
<a name="l01284"></a>01284 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="88c3e7dacbc2ad86040f7e5af0a0a043"></a><!-- doxytag: member="Omiscid::MsgSocket::GetSocket" ref="88c3e7dacbc2ad86040f7e5af0a0a043" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> * MsgSocket::GetSocket           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Access to the socket object.
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> object used by this <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> object </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01499">1499</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00042">Omiscid::UdpExchange::Close()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00052">Omiscid::TcpServer::Close()</a>, <a class="el" href="_connector_8cpp-source.html#l00074">Omiscid::Connector::ProcessLyncSyncMsg()</a>, and <a class="el" href="_control_server_8cpp-source.html#l00154">Omiscid::ControlServer::StartServer()</a>.<div class="fragment"><pre class="fragment"><a name="l01500"></a>01500 {
<a name="l01501"></a>01501     <span class="keywordflow">return</span> socket;
<a name="l01502"></a>01502 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3086ca374b34ad3981a351cb75a21e4d"></a><!-- doxytag: member="Omiscid::MsgSocket::GetPortNb" ref="3086ca374b34ad3981a351cb75a21e4d" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short MsgSocket::GetPortNb           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Access to Port number.
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the port number where the socket listen </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01484">1484</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00448">Omiscid::Socket::GetPortNb()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00591">Omiscid::TcpServer::GetTcpPort()</a>, and <a class="el" href="_udp_exchange_8cpp-source.html#l00255">Omiscid::UdpExchange::GetUdpPort()</a>.<div class="fragment"><pre class="fragment"><a name="l01485"></a>01485 {
<a name="l01486"></a>01486     <span class="keywordflow">return</span> socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#edce8a71802b89e05c32951570befbc5">GetPortNb</a>();
<a name="l01487"></a>01487 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="21e5b5ec66ef490dec3d957711b91c90"></a><!-- doxytag: member="Omiscid::MsgSocket::IsConnected" ref="21e5b5ec66ef490dec3d957711b91c90" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::IsConnected           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Test if the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> is in usage.
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if this object is no more useful (no more connected) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01504">1504</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00416">Omiscid::Connector::AcceptConnection()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00343">Omiscid::TcpServer::AddCallbackObject()</a>, <a class="el" href="_service_proxy_8cpp-source.html#l00455">Omiscid::ServiceProxy::AddRemoteVariableChangeListener()</a>, <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00532">Omiscid::TcpServer::DisconnectPeerId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00492">Omiscid::TcpServer::FindClientFromId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00422">Omiscid::TcpServer::GetListPeerId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00277">Omiscid::TcpServer::GetNbConnections()</a>, <a class="el" href="_service_proxy_8cpp-source.html#l00409">Omiscid::ServiceProxy::GetVariableValue()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00400">Omiscid::TcpServer::RemoveAllCallbackObjects()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00370">Omiscid::TcpServer::RemoveCallbackObject()</a>, <a class="el" href="_service_proxy_8cpp-source.html#l00504">Omiscid::ServiceProxy::RemoveRemoteVariableChangeListener()</a>, <a class="el" href="_connector_8cpp-source.html#l00214">Omiscid::Connector::SendToAll()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00103">Omiscid::TcpServer::SendToAllClients()</a>, <a class="el" href="_service_proxy_8cpp-source.html#l00379">Omiscid::ServiceProxy::SetVariableValue()</a>, and <a class="el" href="_service_proxy_8cpp-source.html#l00304">Omiscid::ServiceProxy::UpdateDescription()</a>.<div class="fragment"><pre class="fragment"><a name="l01505"></a>01505 {
<a name="l01506"></a>01506     <span class="keywordflow">return</span> connected;
<a name="l01507"></a>01507 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="36d29279121e5b48c35df617c095734b"></a><!-- doxytag: member="Omiscid::MsgSocket::Stop" ref="36d29279121e5b48c35df617c095734b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgSocket::Stop           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Stop the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>.
<p>
stop the thread used for reception, or to accept connection and set the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> as disconnected
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00623">623</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00392">CallbackObjects</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01519">GetPeerPid()</a>, and <a class="el" href="_thread_8cpp-source.html#l00069">Omiscid::Thread::StopThread()</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00042">Omiscid::UdpExchange::Close()</a>, <a class="el" href="_connector_8cpp-source.html#l00030">Omiscid::Connector::~Connector()</a>, <a class="el" href="_control_client_8cpp-source.html#l00319">Omiscid::ControlClient::~ControlClient()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00136">~MsgSocket()</a>.<div class="fragment"><pre class="fragment"><a name="l00624"></a>00624 {
<a name="l00625"></a>00625     <span class="keywordflow">if</span> ( connected )
<a name="l00626"></a>00626     {
<a name="l00627"></a>00627         <span class="comment">// Send disconnected message</span>
<a name="l00628"></a>00628         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Lock();
<a name="l00629"></a>00629         <span class="comment">// Send info to all listener</span>
<a name="l00630"></a>00630         <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.First(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.NotAtEnd(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Next() )
<a name="l00631"></a>00631         {
<a name="l00632"></a>00632             <span class="keywordflow">try</span>
<a name="l00633"></a>00633             {
<a name="l00634"></a>00634                 <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.GetCurrent()-&gt;Disconnected(*<span class="keyword">this</span>, <a class="code" href="class_omiscid_1_1_msg_socket.html#3426f728c7e5b7e37376dc9ccc0f4d42">GetPeerPid</a>());
<a name="l00635"></a>00635             }
<a name="l00636"></a>00636             <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l00637"></a>00637         }
<a name="l00638"></a>00638         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.Unlock();
<a name="l00639"></a>00639         connected = <span class="keyword">false</span>;
<a name="l00640"></a>00640     }
<a name="l00641"></a>00641     <a class="code" href="class_omiscid_1_1_thread.html#904f3d716a910c28bb28833a9f575832">Thread::StopThread</a>(0);
<a name="l00642"></a>00642 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7567f7b5736b8363e464cec76a978276"></a><!-- doxytag: member="Omiscid::MsgSocket::SetServiceId" ref="7567f7b5736b8363e464cec76a978276" args="(unsigned int pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgSocket::SetServiceId           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>pid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the service Id.
<p>
Define the id used by the BIP protocol to identifies peer in message exchange
<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#f08cf8ae1470bc37400406a97938feb5">Omiscid::Connector</a>, <a class="el" href="class_omiscid_1_1_tcp_client.html#63530c7269bc484f39cdda729bf4e8c3">Omiscid::TcpClient</a>, <a class="el" href="class_omiscid_1_1_tcp_server.html#6843802ccb0192190d48ebb5b3a2efb8">Omiscid::TcpServer</a>, and <a class="el" href="class_omiscid_1_1_udp_exchange.html#0eef33ee246d7dd66736ceb9552e92f4">Omiscid::UdpExchange</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01509">1509</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, <a class="el" href="_udp_exchange_8cpp-source.html#l00227">Omiscid::UdpExchange::SetServiceId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00446">Omiscid::TcpServer::SetServiceId()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00034">Omiscid::TcpClient::SetServiceId()</a>.<div class="fragment"><pre class="fragment"><a name="l01510"></a>01510 {
<a name="l01511"></a>01511     service_id = pid;
<a name="l01512"></a>01512 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="57d1272213afd2f1efef7c01fae4705e"></a><!-- doxytag: member="Omiscid::MsgSocket::GetServiceId" ref="57d1272213afd2f1efef7c01fae4705e" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int MsgSocket::GetServiceId           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Access to the service Id.
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the service id </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#7590581670e089568b99942dc2acd07b">Omiscid::Connector</a>, <a class="el" href="class_omiscid_1_1_tcp_client.html#b0939ba70df19ed8a3b9ee3a935045de">Omiscid::TcpClient</a>, <a class="el" href="class_omiscid_1_1_tcp_server.html#aa8162daf6602a0611e631a5496a9c05">Omiscid::TcpServer</a>, <a class="el" href="class_omiscid_1_1_udp_exchange.html#e924112d54b39d716f48eab4f441b10c">Omiscid::UdpExchange</a>, and <a class="el" href="class_omiscid_1_1_control_server.html#15bfb89e86b621a8b7810807866a16f9">Omiscid::ControlServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01514">1514</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00245">Omiscid::UdpExchange::GetServiceId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00586">Omiscid::TcpServer::GetServiceId()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00052">Omiscid::TcpClient::GetServiceId()</a>.<div class="fragment"><pre class="fragment"><a name="l01515"></a>01515 {
<a name="l01516"></a>01516     <span class="keywordflow">return</span> service_id;
<a name="l01517"></a>01517 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3426f728c7e5b7e37376dc9ccc0f4d42"></a><!-- doxytag: member="Omiscid::MsgSocket::GetPeerPid" ref="3426f728c7e5b7e37376dc9ccc0f4d42" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int MsgSocket::GetPeerPid           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the peer id : the service id of the other extremity of the socket </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01519">1519</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00416">Omiscid::Connector::AcceptConnection()</a>, <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00532">Omiscid::TcpServer::DisconnectPeerId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00492">Omiscid::TcpServer::FindClientFromId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00422">Omiscid::TcpServer::GetListPeerId()</a>, <a class="el" href="_tcp_client_8cpp-source.html#l00062">Omiscid::TcpClient::GetListPeerId()</a>, <a class="el" href="_connector_8cpp-source.html#l00534">Omiscid::Connector::GetListPeerId()</a>, <a class="el" href="_tcp_client_8cpp-source.html#l00057">Omiscid::TcpClient::GetPeerId()</a>, <a class="el" href="_connector_8cpp-source.html#l00602">Omiscid::ClientConnection::GetPeerPid()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00932">Send()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01038">SendCuttedMsg()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01158">SendPreparedBuffer()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00502">SendSyncLinkMsg()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01223">SendTo()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00623">Stop()</a>.<div class="fragment"><pre class="fragment"><a name="l01520"></a>01520 {
<a name="l01521"></a>01521     <span class="keywordflow">return</span> peer_pid;
<a name="l01522"></a>01522 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ed776388f004399875e8629248d4f655"></a><!-- doxytag: member="Omiscid::MsgSocket::ReceivedSyncLinkMsg" ref="ed776388f004399875e8629248d4f655" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::ReceivedSyncLinkMsg           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received the link message
<p>
An link message is exchanged when the socket are connected. The extremity can then exchange their id <dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received an empty message </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01524">1524</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_reentrant_mutex_8cpp-source.html#l00045">Omiscid::ReentrantMutex::EnterMutex()</a>, and <a class="el" href="_reentrant_mutex_8cpp-source.html#l00068">Omiscid::ReentrantMutex::LeaveMutex()</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l01538">WaitSyncLinkMsg()</a>.<div class="fragment"><pre class="fragment"><a name="l01525"></a>01525 {
<a name="l01526"></a>01526     <span class="keywordtype">bool</span> tmpb;
<a name="l01527"></a>01527     protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l01528"></a>01528     tmpb = receivedSyncLinkMsg;
<a name="l01529"></a>01529     protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01530"></a>01530     <span class="keywordflow">return</span> tmpb;
<a name="l01531"></a>01531 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7d87ebb3ed18bb10f3074e2730feb9e6"></a><!-- doxytag: member="Omiscid::MsgSocket::WaitSyncLinkMsg" ref="7d87ebb3ed18bb10f3074e2730feb9e6" args="(unsigned int TimeToWait=250)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::WaitSyncLinkMsg           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>TimeToWait</em> = <code>250</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
wait for a synclink message
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>TimeToWait</em>&nbsp;</td><td>the max time to wait in ms (default 250 ms) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received a SyncLink message before timeout </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01538">1538</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_elapsed_time_8cpp-source.html#l00035">Omiscid::ElapsedTime::Get()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01524">ReceivedSyncLinkMsg()</a>, and <a class="el" href="_thread_8cpp-source.html#l00143">Omiscid::Thread::Sleep()</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>.<div class="fragment"><pre class="fragment"><a name="l01539"></a>01539 {
<a name="l01540"></a>01540     <a class="code" href="class_omiscid_1_1_elapsed_time.html">ElapsedTime</a> CountWaitedTime;
<a name="l01541"></a>01541     <span class="keywordflow">while</span>( connected == <span class="keyword">true</span> )
<a name="l01542"></a>01542     {
<a name="l01543"></a>01543         <span class="keywordflow">if</span> ( <a class="code" href="class_omiscid_1_1_msg_socket.html#ed776388f004399875e8629248d4f655">ReceivedSyncLinkMsg</a>() || CountWaitedTime.<a class="code" href="class_omiscid_1_1_elapsed_time.html#c85de4171158cb4d39eea7819609c440">Get</a>() &gt;= TimeToWait )
<a name="l01544"></a>01544         {
<a name="l01545"></a>01545             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01546"></a>01546         }
<a name="l01547"></a>01547         <a class="code" href="class_omiscid_1_1_thread.html#78678cf0e10de6fcec7ea20faf1a2c5c">Thread::Sleep</a>(10);
<a name="l01548"></a>01548     }
<a name="l01549"></a>01549     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01550"></a>01550 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0c9670fc8f69a764e176629754f42ce9"></a><!-- doxytag: member="Omiscid::MsgSocket::SyncLinkMsgSent" ref="0c9670fc8f69a764e176629754f42ce9" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::SyncLinkMsgSent           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has sent the link message
<p>
An link message is exchanged when the socket are connected. The extremity can then exchange their id <dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received an empty message </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01552">1552</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l00502">SendSyncLinkMsg()</a>.<div class="fragment"><pre class="fragment"><a name="l01553"></a>01553 {
<a name="l01554"></a>01554     <span class="keywordflow">return</span> sendSyncLinkMsg;
<a name="l01555"></a>01555 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="05bbc4fe3091f53c7cf3e9c940267c93"></a><!-- doxytag: member="Omiscid::MsgSocket::GetMaxMessageSizeForTCP" ref="05bbc4fe3091f53c7cf3e9c940267c93" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MsgSocket::GetMaxMessageSizeForTCP           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
size max for message on TCP
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the size max accepted for exchange on TCP </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_tcp_client.html#b3996f78edb87effd3d5ef85b23f6dc9">Omiscid::TcpClient</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01557">1557</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00596">Omiscid::TcpServer::GetMaxMessageSizeForTCP()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00073">Omiscid::TcpClient::GetMaxMessageSizeForTCP()</a>.<div class="fragment"><pre class="fragment"><a name="l01558"></a>01558 {
<a name="l01559"></a>01559     <span class="keywordflow">return</span> maxMessageSizeForTCP;
<a name="l01560"></a>01560 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d6fbef2fd54d63f8ac18d9711de35b84"></a><!-- doxytag: member="Omiscid::MsgSocket::operator==" ref="d6fbef2fd54d63f8ac18d9711de35b84" args="(unsigned int peer_id) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::operator==           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>peer_id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare the peer id.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>peer_id</em>&nbsp;</td><td>[in] peer id to compare </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the peer id for this socket has the value 'peer_id' </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01578">1578</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.<div class="fragment"><pre class="fragment"><a name="l01579"></a>01579 {
<a name="l01580"></a>01580     <span class="keywordflow">return</span> peer_pid == peer_id;
<a name="l01581"></a>01581 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="626bf84517ed66dd14358ba09da0dac4"></a><!-- doxytag: member="Omiscid::MsgSocket::AcceptConnection" ref="626bf84517ed66dd14358ba09da0dac4" args="(MsgSocket *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MsgSocket::AcceptConnection           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Accept new TCP connection.
<p>
method called by TCP or <a class="el" href="class_omiscid_1_1_connector.html">Connector</a> server when it accepts new connection. (method called by AcceptConnection()) Default Implementation : Close the connection. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>object created with the new accepted TCP connection </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the connection is accepted </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_tcp_server.html#bcdbecbc9f2dc8451856557925e72d4c">Omiscid::TcpServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00925">925</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l00590">Run()</a>.<div class="fragment"><pre class="fragment"><a name="l00926"></a>00926 {
<a name="l00927"></a>00927     <span class="comment">//std::cerr &lt;&lt; "in MsgSocket::acceptConnection(MsgSocket*)\n";</span>
<a name="l00928"></a>00928     <span class="keyword">delete</span> ms;
<a name="l00929"></a>00929     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00930"></a>00930 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0a89a1c77bf9ff30f5fe2c130191429b"></a><!-- doxytag: member="Omiscid::MsgSocket::AcceptConnection" ref="0a89a1c77bf9ff30f5fe2c130191429b" args="(const UdpConnection &amp;udp_connect, bool msg_empty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> * MsgSocket::AcceptConnection           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>udp_connect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>msg_empty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Accept new UDP connection.
<p>
Used for the kind UDP_EXCHANGE Enable to store new source that declare itself with an empty message, and return NULL if the message is not empty and the source not already known.<p>
(to implement in child class) current implementation : display a message on error output, and return NULL. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>udp_connect</em>&nbsp;</td><td>[in] information about the source of a message coming from UDP. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg_empty</em>&nbsp;</td><td>[in] true if udp_connect is the source of an empty message </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL if refuse the message, else return an object linked to the same source </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#c812dbd9cc446c38f95d3767a7b98dbc">Omiscid::Connector</a>, and <a class="el" href="class_omiscid_1_1_udp_exchange.html#1b38216d40b38624b537c92a2fa4aa7c">Omiscid::UdpExchange</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01331">1331</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_system_2_system_2_config_8h-source.html#l00234">Omiscid::OmiscidTrace()</a>.<div class="fragment"><pre class="fragment"><a name="l01332"></a>01332 {
<a name="l01333"></a>01333     <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"AcceptConnection UDP (2)\n"</span>);
<a name="l01334"></a>01334     <span class="keywordflow">if</span>(msg_empty)
<a name="l01335"></a>01335     {
<a name="l01336"></a>01336         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"[Empty Msg]\n"</span>);
<a name="l01337"></a>01337     }
<a name="l01338"></a>01338     <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"\n"</span>);
<a name="l01339"></a>01339     <span class="keywordflow">return</span> NULL;
<a name="l01340"></a>01340 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="0d5c96d03589cdf47a3803ac3365249d"></a><!-- doxytag: member="Omiscid::MsgSocket::CallbackObjects" ref="0d5c96d03589cdf47a3803ac3365249d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_omiscid_1_1_mutexed_simple_list.html">MutexedSimpleList</a>&lt;<a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a>*&gt; <a class="el" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">Omiscid::MsgSocket::CallbackObjects</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
callback call when messages arrive
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00392">392</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00417">AddCallbackObject()</a>, <a class="el" href="_connector_8cpp-source.html#l00119">Omiscid::Connector::ConnectTo()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00476">RemoveAllCallbackObjects()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00448">RemoveCallbackObject()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00932">Send()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01038">SendCuttedMsg()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01158">SendPreparedBuffer()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00502">SendSyncLinkMsg()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01223">SendTo()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00623">Stop()</a>.
</div>
</div><p>
<a class="anchor" name="deba601f8dc26650cf4168a4bcc2c03a"></a><!-- doxytag: member="Omiscid::MsgSocket::callbackData" ref="deba601f8dc26650cf4168a4bcc2c03a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a> <a class="el" href="class_omiscid_1_1_msg_socket.html#deba601f8dc26650cf4168a4bcc2c03a">Omiscid::MsgSocket::callbackData</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
structure given to the callback methods
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00393">393</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.
</div>
</div><p>
<a class="anchor" name="f8de8404f66db44e0a1beed0d48abb7f"></a><!-- doxytag: member="Omiscid::MsgSocket::mutex" ref="f8de8404f66db44e0a1beed0d48abb7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_omiscid_1_1_mutex.html">Mutex</a> <a class="el" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">Omiscid::MsgSocket::mutex</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
mutex to protect the callback access
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00395">395</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00488">SetCallbackSyncLink()</a>.
</div>
</div><p>
<a class="anchor" name="eafc599eec5aca8cfeea9727bf984f46"></a><!-- doxytag: member="Omiscid::MsgSocket::callbackSyncLinkFct" ref="eafc599eec5aca8cfeea9727bf984f46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a> <a class="el" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">Omiscid::MsgSocket::callbackSyncLinkFct</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
callback call when SyncLink messages arrive
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00396">396</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00297">Omiscid::TcpServer::AcceptConnection()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00488">SetCallbackSyncLink()</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Com/Com/<a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a><li>Com/<a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Aug 31 13:02:55 2007 for OMiSCID(aka O3MiSCID) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
