<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OMiSCID(aka O3MiSCID): Com/Com/MsgSocket.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_aa8454b712fe7ed4b098ee68e5880026.html">Com</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e6efdd388a90ee6508bf14e97be3adcf.html">Com</a></div>
<h1>MsgSocket.h</h1><a href="_msg_socket_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef __MSG_SOCKET_H__</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define __MSG_SOCKET_H__</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;Com/ConfigCom.h&gt;</span>
<a name="l00012"></a>00012
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;<a class="code" href="_thread_8h.html">System/Thread.h</a>&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;<a class="code" href="_mutex_8h.html">System/Mutex.h</a>&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;<a class="code" href="_socket_8h.html">System/Socket.h</a>&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;<a class="code" href="_simple_string_8h.html">System/SimpleString.h</a>&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;<a class="code" href="_simple_list_8h.html">System/SimpleList.h</a>&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;<a class="code" href="_message_8h.html">Com/Message.h</a>&gt;</span>
<a name="l00019"></a>00019
<a name="l00020"></a>00020 <span class="keyword">namespace </span>Omiscid {
<a name="l00021"></a>00021
<a name="l00022"></a>00022 <span class="keyword">class </span>MsgSocket;
<a name="l00023"></a>00023
<a name="l00029"></a><a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html">00029</a> <span class="keyword">class </span><a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>
<a name="l00030"></a>00030 {
<a name="l00031"></a>00031 <span class="keyword">public</span>:
<a name="l00032"></a>00032     <span class="comment">// Virtual destructor always</span>
<a name="l00033"></a>00033     <span class="keyword">virtual</span> <a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#53273370ec70fcf715af04837463be3c">~MsgSocketCallBackData</a>();
<a name="l00034"></a>00034
<a name="l00035"></a><a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#8280558340d705cb00e23e2a7e46cf11">00035</a>   <a class="code" href="class_omiscid_1_1_message.html">Message</a> <a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#8280558340d705cb00e23e2a7e46cf11">Msg</a>;
<a name="l00036"></a><a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#17ba8ff15c9b3774e5d87614ff90e0a1">00036</a>   <span class="keywordtype">void</span>* <a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#17ba8ff15c9b3774e5d87614ff90e0a1">userData1</a>;
<a name="l00037"></a><a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#02be2c2528533e57fa4ddaf5b76a97a8">00037</a>   <span class="keywordtype">void</span>* <a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#02be2c2528533e57fa4ddaf5b76a97a8">userData2</a>;
<a name="l00038"></a>00038 };
<a name="l00039"></a>00039
<a name="l00045"></a><a class="code" href="class_omiscid_1_1_udp_connection.html">00045</a> <span class="keyword">class </span><a class="code" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>
<a name="l00046"></a>00046 {
<a name="l00047"></a>00047  <span class="keyword">public</span>:
<a name="l00049"></a>00049   <a class="code" href="class_omiscid_1_1_udp_connection.html#5dac1e8dba79e34b1fc62e06697acb97">UdpConnection</a>();
<a name="l00050"></a>00050
<a name="l00055"></a>00055   <a class="code" href="class_omiscid_1_1_udp_connection.html#5dac1e8dba79e34b1fc62e06697acb97">UdpConnection</a>(<span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> <a class="code" href="class_omiscid_1_1_udp_connection.html#9921efeb360282fa6aabdf0332c7565c">addr</a>, <span class="keywordtype">int</span> port);
<a name="l00056"></a>00056
<a name="l00060"></a>00060   <a class="code" href="class_omiscid_1_1_udp_connection.html#5dac1e8dba79e34b1fc62e06697acb97">UdpConnection</a>(<span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>&amp; udp_connect);
<a name="l00061"></a>00061
<a name="l00063"></a>00063   <span class="keyword">virtual</span> <a class="code" href="class_omiscid_1_1_udp_connection.html#0bdfc7d2ee2c2dc040da1ed55ef79c43">~UdpConnection</a>();
<a name="l00064"></a>00064
<a name="l00069"></a>00069   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_udp_connection.html#c67a633f03ef82abf5a9164a864b8517">operator==</a>(<span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>&amp;) <span class="keyword">const</span>;
<a name="l00070"></a>00070
<a name="l00076"></a>00076   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_udp_connection.html#6a870b7e92f2bad9a2c412d055fa4407">SetAddr</a>(<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in* <a class="code" href="class_omiscid_1_1_udp_connection.html#9921efeb360282fa6aabdf0332c7565c">addr</a>);
<a name="l00077"></a>00077
<a name="l00081"></a>00081   <span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in* <a class="code" href="class_omiscid_1_1_udp_connection.html#656fe62769c648dfa470985922c1a1b1">getAddr</a>() <span class="keyword">const</span>;
<a name="l00082"></a>00082
<a name="l00083"></a><a class="code" href="class_omiscid_1_1_udp_connection.html#9921efeb360282fa6aabdf0332c7565c">00083</a>   <span class="keyword">struct </span>sockaddr_in addr;
<a name="l00084"></a><a class="code" href="class_omiscid_1_1_udp_connection.html#15b605463c781d70c76ef1ce293efbab">00084</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_udp_connection.html#15b605463c781d70c76ef1ce293efbab">pid</a>;
<a name="l00085"></a>00085 };
<a name="l00086"></a>00086
<a name="l00095"></a><a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html">00095</a> <span class="keyword">class </span><a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a>
<a name="l00096"></a>00096 {
<a name="l00097"></a>00097 <span class="keyword">public</span>:
<a name="l00098"></a>00098     <span class="comment">// Virtual destructor always</span>
<a name="l00099"></a>00099     <span class="keyword">virtual</span> <a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#a674f8c20261605e56d56396a8ca0398">~MsgSocketCallbackObject</a>();
<a name="l00100"></a>00100
<a name="l00101"></a>00101     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#3bb1409387ebd7c74cf46b72dbb40a42">Connected</a>(<a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>&amp; ConnectionPoint, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PeerId);
<a name="l00102"></a>00102     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#dcc6582e5b3b1624eec40983321e0d38">Disconnected</a>(<a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>&amp; ConnectionPoint, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PeerId);
<a name="l00103"></a>00103
<a name="l00104"></a>00104     <span class="keyword">virtual</span> <span class="keywordtype">void</span> Receive(<a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>&amp; ConnectionPoint, <a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>&amp; CallbackData) = 0;
<a name="l00105"></a>00105 };
<a name="l00106"></a>00106
<a name="l00122"></a><a class="code" href="class_omiscid_1_1_msg_socket.html">00122</a> <span class="keyword">class </span><a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> : <span class="keyword">public</span> <a class="code" href="class_omiscid_1_1_thread.html">Thread</a>
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124  <span class="keyword">public</span>:
<a name="l00125"></a>00125
<a name="l00126"></a>00126 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span>
<a name="l00128"></a>00128      <span class="keyword">enum</span> DEBUGFLAGS
<a name="l00129"></a>00129      {
<a name="l00130"></a>00130          DBG_NONE               = 0x000000000,
<a name="l00131"></a>00131          DBG_LINKSYNC   = 0x000000001,
<a name="l00132"></a>00132          DBG_RECV               = 0x000000002,
<a name="l00133"></a>00133          DBG_SEND               = 0x000000004,
<a name="l00134"></a>00134          DBG_ALL                = 0xffffffff
<a name="l00135"></a>00135      };
<a name="l00136"></a>00136      <span class="keyword">static</span> DEBUGFLAGS Debug;
<a name="l00137"></a>00137
<a name="l00138"></a>00138 <span class="preprocessor">#endif</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>
<a name="l00141"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">00141</a>   <span class="keyword">typedef</span> void (<a class="code" href="group___system.html#gc60d2913661e99429c055edcd4b24562">FUNCTION_CALL_TYPE</a> *<a class="code" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a>)(<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>*,<a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> *);
<a name="l00142"></a>00142
<a name="l00144"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">00144</a>   <span class="keyword">enum</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">MsgSocketKind</a>
<a name="l00145"></a>00145     {
<a name="l00146"></a>00146       NONE_KIND = -1,
<a name="l00147"></a>00147       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a> = 0,
<a name="l00148"></a>00148       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>,
<a name="l00149"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">00149</a>       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>
<a name="l00150"></a>00150     };
<a name="l00151"></a>00151
<a name="l00152"></a>00152  <span class="keyword">public</span>:
<a name="l00159"></a>00159   <a class="code" href="class_omiscid_1_1_msg_socket.html#7ce223225245ecb8b90d7344f86c2bd6">MsgSocket</a>(<a class="code" href="class_omiscid_1_1_socket.html">Socket</a>* s);
<a name="l00160"></a>00160
<a name="l00168"></a>00168   <a class="code" href="class_omiscid_1_1_msg_socket.html#7ce223225245ecb8b90d7344f86c2bd6">MsgSocket</a>(<a class="code" href="class_omiscid_1_1_socket.html#534fbf67274aee620617b048b84ff86a">Socket::SocketKind</a> type);
<a name="l00169"></a>00169
<a name="l00170"></a>00170
<a name="l00172"></a>00172   <span class="keyword">virtual</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#b5b28d057094d058c5445069f087bd93">~MsgSocket</a>();
<a name="l00173"></a>00173
<a name="l00180"></a>00180   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#c04b57b1d0c89fe9c24ee667ba838ddb">InitForTcpClient</a>(<span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> addr, <span class="keywordtype">int</span> port);
<a name="l00181"></a>00181
<a name="l00186"></a>00186   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#91aca9a8ded8f7a4801aa4c6e462bdda">InitForTcpServer</a>(<span class="keywordtype">int</span> port);
<a name="l00187"></a>00187
<a name="l00188"></a>00188
<a name="l00192"></a>00192   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#568d6346baef454c48105712e402d6bd">InitForUdpExchange</a>(<span class="keywordtype">int</span> port);
<a name="l00193"></a>00193
<a name="l00197"></a>00197   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#e6a4e463d7f2b49842a19ef632607b91">AddCallbackObject</a>(<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> * CallbackObject);
<a name="l00198"></a>00198
<a name="l00199"></a>00199
<a name="l00203"></a>00203   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#749006fded14bc52f629ffa9cccdacf8">RemoveCallbackObject</a>(<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> * CallbackObject);
<a name="l00204"></a>00204
<a name="l00207"></a>00207   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#cdc438cbf9829f9faceea68bd2535f67">RemoveAllCallbackObjects</a>();
<a name="l00208"></a>00208
<a name="l00211"></a>00211   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#e23f86137b974c4b6aea0d07997a0bc3">SetName</a>(<span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> NewName);
<a name="l00212"></a>00212   <span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#b0c5b480cb6cfbe936453014348e203e">GetName</a>();
<a name="l00214"></a>00214
<a name="l00220"></a>00220   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#dcae5a3be1bbfd31d4cbbe820d68a970">SetCallbackSyncLink</a>(<a class="code" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a> cr, <span class="keywordtype">void</span>* user_data1 = NULL, <span class="keywordtype">void</span>* user_data2 = NULL);
<a name="l00221"></a>00221
<a name="l00228"></a>00228   <span class="keywordtype">void</span> <a class="code" href="group___system.html#gc60d2913661e99429c055edcd4b24562">FUNCTION_CALL_TYPE</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#01ceb5ec9a28d28fcf402acf5c35fbef">Run</a>();
<a name="l00229"></a>00229
<a name="l00243"></a>00243   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#7496fe09ce10bd84eac5ea6e44c8bc31">Send</a>(<span class="keywordtype">int</span> len, <span class="keyword">const</span> <span class="keywordtype">char</span>* buf);
<a name="l00244"></a>00244
<a name="l00257"></a>00257   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#b80c9ed1145f7d4e42240f6b8de09c0f">SendPreparedBuffer</a>(<span class="keywordtype">int</span> len, <span class="keywordtype">char</span>* buf);
<a name="l00258"></a>00258
<a name="l00259"></a>00259   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#bd49aef27290642697e6428ec2e07597">PrepareBufferForBip</a>(<span class="keywordtype">char</span> * buf, <span class="keyword">const</span> <span class="keywordtype">char</span> * data, <span class="keywordtype">int</span> datalen, <span class="keywordtype">bool</span> OnlyHeader= <span class="keyword">false</span>);
<a name="l00260"></a>00260   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>(<span class="keywordtype">char</span> * buf, <span class="keywordtype">int</span> service_id, <span class="keywordtype">int</span> message_id );
<a name="l00261"></a>00261
<a name="l00262"></a>00262   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#0e59a668c2605cd4fae73fdb679dd615">PrepareBufferForBipFromCuttedMsg</a>(<span class="keywordtype">char</span> * buf, <span class="keywordtype">int</span>* tab_length, <span class="keyword">const</span> <span class="keywordtype">char</span>** tab_buf, <span class="keywordtype">int</span> nb_buf);
<a name="l00263"></a>00263
<a name="l00273"></a>00273   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4a2314b70a47858c24edbaa8636bcbe6">SendCuttedMsg</a>(<span class="keywordtype">int</span>* tab_len, <span class="keyword">const</span> <span class="keywordtype">char</span>** tab_buf, <span class="keywordtype">int</span> nb_buf);
<a name="l00274"></a>00274
<a name="l00281"></a>00281   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#5c449b68e25f5cf173d0a69a699a975b">SendTo</a>(<span class="keywordtype">int</span> len, <span class="keyword">const</span> <span class="keywordtype">char</span>* buf, <a class="code" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>* udp_dest);
<a name="l00282"></a>00282
<a name="l00285"></a>00285   <a class="code" href="class_omiscid_1_1_socket.html">Socket</a>* <a class="code" href="class_omiscid_1_1_msg_socket.html#88c3e7dacbc2ad86040f7e5af0a0a043">GetSocket</a>() <span class="keyword">const</span>;
<a name="l00286"></a>00286
<a name="l00289"></a>00289   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#3086ca374b34ad3981a351cb75a21e4d">GetPortNb</a>() <span class="keyword">const</span>;
<a name="l00290"></a>00290
<a name="l00293"></a>00293   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#21e5b5ec66ef490dec3d957711b91c90">IsConnected</a>() <span class="keyword">const</span>;
<a name="l00294"></a>00294
<a name="l00299"></a>00299   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#36d29279121e5b48c35df617c095734b">Stop</a>();
<a name="l00300"></a>00300
<a name="l00305"></a>00305   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#7567f7b5736b8363e464cec76a978276">SetServiceId</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pid);
<a name="l00306"></a>00306
<a name="l00309"></a>00309   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#57d1272213afd2f1efef7c01fae4705e">GetServiceId</a>() <span class="keyword">const</span>;
<a name="l00310"></a>00310
<a name="l00312"></a>00312   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#3426f728c7e5b7e37376dc9ccc0f4d42">GetPeerPid</a>() <span class="keyword">const</span>;
<a name="l00313"></a>00313
<a name="l00320"></a>00320   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#ed776388f004399875e8629248d4f655">ReceivedSyncLinkMsg</a>();
<a name="l00321"></a>00321
<a name="l00327"></a>00327   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#7d87ebb3ed18bb10f3074e2730feb9e6">WaitSyncLinkMsg</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TimeToWait = 250);
<a name="l00328"></a>00328
<a name="l00335"></a>00335   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#0c9670fc8f69a764e176629754f42ce9">SyncLinkMsgSent</a>() <span class="keyword">const</span>;
<a name="l00336"></a>00336
<a name="l00337"></a>00337   <span class="comment">// TO COMMENT</span>
<a name="l00338"></a>00338     <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#e77ffd60b132475148b513da8191757f">SendSyncLinkMsg</a>();
<a name="l00339"></a>00339
<a name="l00342"></a>00342   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#05bbc4fe3091f53c7cf3e9c940267c93">GetMaxMessageSizeForTCP</a>() <span class="keyword">const</span>;
<a name="l00343"></a>00343
<a name="l00346"></a>00346   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#88ed9e61763cf158e962a9f5cd342f5f">SetMaxMessageSizeForTCP</a>(<span class="keywordtype">int</span> max);
<a name="l00347"></a>00347
<a name="l00351"></a>00351   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#d6fbef2fd54d63f8ac18d9711de35b84">operator==</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> peer_id) <span class="keyword">const</span>;
<a name="l00352"></a>00352
<a name="l00353"></a>00353
<a name="l00357"></a>00357   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#853ad7a7a3b7ea7afa9dff79a74ddc1a">SetTcpNoDelay</a>(<span class="keywordtype">bool</span> Set = <span class="keyword">true</span>);
<a name="l00358"></a>00358
<a name="l00359"></a>00359     <span class="comment">// REVIEW</span>
<a name="l00360"></a>00360   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#82d7f03e8a3acbfdd82bc35d3c1589f3">SetSyncLinkData</a>( <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> DataForSL );
<a name="l00361"></a>00361   <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#506ead22a9cd791637fdf9b72c936fae">GetSyncLinkData</a>();
<a name="l00362"></a>00362   <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#00e2aba97c10608f208f69f58c953735">GetPeerSyncLinkData</a>();
<a name="l00363"></a>00363
<a name="l00364"></a>00364 <span class="keyword">protected</span>:
<a name="l00365"></a>00365
<a name="l00374"></a>00374   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> AcceptConnection(<a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>* s);
<a name="l00375"></a>00375
<a name="l00389"></a>00389  <span class="keyword">virtual</span> <a class="code" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>* AcceptConnection(<span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>&amp; udp_connect, <span class="keywordtype">bool</span> msg_empty);
<a name="l00390"></a>00390
<a name="l00391"></a>00391
<a name="l00392"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">00392</a>   <a class="code" href="class_omiscid_1_1_mutexed_simple_list.html">MutexedSimpleList&lt;MsgSocketCallbackObject*&gt;</a>   <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>;
<a name="l00393"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#deba601f8dc26650cf4168a4bcc2c03a">00393</a>   <a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>                         <a class="code" href="class_omiscid_1_1_msg_socket.html#deba601f8dc26650cf4168a4bcc2c03a">callbackData</a>;
<a name="l00395"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">00395</a>   <a class="code" href="class_omiscid_1_1_mutex.html">Mutex</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">mutex</a>;
<a name="l00396"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">00396</a>   <a class="code" href="class_omiscid_1_1_msg_socket.html#655de1799aa9e3f8e8c54e7dfa1dffec">Callback_SyncLink</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a>;
<a name="l00397"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">00397</a>   <a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>;
<a name="l00398"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#dc2366e1f8bd98228d4b21d9b752610a">00398</a>   <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#dc2366e1f8bd98228d4b21d9b752610a">SyncLinkData</a>;
<a name="l00399"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#51c73d04bd18488cd80d5d792114b6cf">00399</a>   <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#51c73d04bd18488cd80d5d792114b6cf">PeerSyncLinkData</a>;
<a name="l00400"></a>00400
<a name="l00401"></a>00401 <span class="keyword">private</span>:
<a name="l00407"></a>00407   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#626bf84517ed66dd14358ba09da0dac4">AcceptConnection</a>();
<a name="l00408"></a>00408
<a name="l00416"></a>00416   <span class="keywordtype">void</span> Receive();
<a name="l00417"></a>00417
<a name="l00423"></a>00423   <span class="keywordtype">void</span> ReceiveUdpExchange();
<a name="l00424"></a>00424
<a name="l00434"></a>00434   <span class="keywordtype">bool</span> MoveToMessage(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> len, <span class="keywordtype">int</span>&amp; decal);
<a name="l00435"></a>00435
<a name="l00448"></a>00448   <span class="keywordtype">int</span> GoodBeginning(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; lengthmsg,
<a name="l00449"></a>00449             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; pid, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; mid);
<a name="l00451"></a>00451
<a name="l00452"></a>00452 <span class="keyword">private</span>:
<a name="l00453"></a>00453
<a name="l00454"></a>00454     <span class="comment">// REVIEW : can only be done internaly</span>
<a name="l00455"></a>00455   <span class="keywordtype">bool</span> SetPeerSyncLinkData( <span class="keywordtype">char</span>* DataForSL, <span class="keywordtype">int</span> DataLength );
<a name="l00456"></a>00456
<a name="l00457"></a>00457     <span class="comment">// let say that TcpServer Need to now these constant values</span>
<a name="l00458"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#3ecf3132e8c4bf890c07853cfab7619c">00458</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_omiscid_1_1_tcp_server.html">TcpServer</a>;
<a name="l00459"></a>00459
<a name="l00460"></a>00460   <a class="code" href="class_omiscid_1_1_socket.html">Socket</a>* socket;
<a name="l00462"></a>00462   <span class="keywordtype">int</span> bufferSize;
<a name="l00463"></a>00463   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * buffer;
<a name="l00464"></a>00464   <span class="keywordtype">int</span> occupiedSize;
<a name="l00466"></a>00466   <span class="keywordtype">bool</span> connected;
<a name="l00468"></a>00468   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* tag_start1;
<a name="l00469"></a>00469   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* tag_start2;
<a name="l00470"></a>00470   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* tag_end;
<a name="l00471"></a>00471   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* tag_str;
<a name="l00472"></a>00472   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* tag_prepared_hdr;
<a name="l00473"></a>00473   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* tag_prepared_serv;
<a name="l00475"></a>00475   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> tag_end_size;
<a name="l00476"></a>00476   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> tag_size;
<a name="l00477"></a>00477   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> pid_size;
<a name="l00478"></a>00478   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> mid_size;
<a name="l00479"></a>00479   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> len_size;
<a name="l00481"></a>00481   <span class="keywordtype">char</span>* start_tag;
<a name="l00482"></a>00482   <span class="keywordtype">char</span>* buffer_udp_send;
<a name="l00483"></a>00483
<a name="l00484"></a>00484   <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">MsgSocketKind</a> kind;
<a name="l00485"></a>00485
<a name="l00486"></a>00486   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * SendBuffer;
<a name="l00487"></a>00487   <a class="code" href="class_omiscid_1_1_reentrant_mutex.html">ReentrantMutex</a> protectSend;
<a name="l00489"></a>00489   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> service_id;
<a name="l00490"></a>00490   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> message_id;
<a name="l00492"></a>00492   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> peer_pid;
<a name="l00494"></a>00494   <span class="keywordtype">bool</span> receivedSyncLinkMsg;
<a name="l00495"></a>00495   <span class="keywordtype">bool</span> sendSyncLinkMsg;
<a name="l00496"></a>00496
<a name="l00497"></a>00497   <span class="keywordtype">int</span> maxMessageSizeForTCP;
<a name="l00498"></a>00498   <span class="keywordtype">int</span> maxBIPMessageSize;
<a name="l00499"></a>00499
<a name="l00502"></a>00502   <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> Name;
<a name="l00503"></a>00503   <span class="keyword">const</span> <a class="code" href="class_omiscid_1_1_simple_string.html">SimpleString</a> DefaultMsgSocketName;
<a name="l00505"></a>00505
<a name="l00506"></a>00506 <span class="keyword">protected</span>:
<a name="l00507"></a><a class="code" href="class_omiscid_1_1_msg_socket.html#8ef83dfae782b01709b496d2e6901ff2">00507</a>   <a class="code" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> <a class="code" href="class_omiscid_1_1_msg_socket.html#8ef83dfae782b01709b496d2e6901ff2">udpConnection</a>;
<a name="l00508"></a>00508 };
<a name="l00509"></a>00509
<a name="l00510"></a>00510 } <span class="comment">// namespace Omiscid</span>
<a name="l00511"></a>00511
<a name="l00512"></a>00512 <span class="preprocessor">#endif // __MSG_SOCKET_H__</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Mar 27 10:20:34 2008 for OMiSCID(aka O3MiSCID) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
