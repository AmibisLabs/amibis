<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OMiSCID(aka O3MiSCID): Omiscid::ReentrantMutex Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespace_omiscid.html">Omiscid</a>::<a class="el" href="class_omiscid_1_1_reentrant_mutex.html">ReentrantMutex</a></div>
<h1>Omiscid::ReentrantMutex Class Reference</h1><!-- doxytag: class="Omiscid::ReentrantMutex" --><!-- doxytag: inherits="Omiscid::LockableObject" --><a class="el" href="class_omiscid_1_1_reentrant_mutex.html">ReentrantMutex</a> Implementation.
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_reentrant_mutex_8h-source.html">System/ReentrantMutex.h</a>&gt;</code>
<p>
<p>Inheritance diagram for Omiscid::ReentrantMutex:
<p><center><img src="class_omiscid_1_1_reentrant_mutex.png" usemap="#Omiscid::ReentrantMutex_map" border="0" alt=""></center>
<map name="Omiscid::ReentrantMutex_map">
<area href="class_omiscid_1_1_lockable_object.html" alt="Omiscid::LockableObject" shape="rect" coords="0,0,151,24">
</map>
<a href="class_omiscid_1_1_reentrant_mutex-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_reentrant_mutex.html#c4c4b4ce9ab8f5ed297fe05773f36313">ReentrantMutex</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#c4c4b4ce9ab8f5ed297fe05773f36313"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4036dc128d92c2b6ff8ee7c4f47a88f9"></a><!-- doxytag: member="Omiscid::ReentrantMutex::~ReentrantMutex" ref="4036dc128d92c2b6ff8ee7c4f47a88f9" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_reentrant_mutex.html#4036dc128d92c2b6ff8ee7c4f47a88f9">~ReentrantMutex</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_reentrant_mutex.html#9b7cccbb94f6e56a09d944c345141102">Lock</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#9b7cccbb94f6e56a09d944c345141102">ReentrantMutex::Lock</a> instead.  <a href="#9b7cccbb94f6e56a09d944c345141102"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_reentrant_mutex.html#857b4283a3e530cb6d46e50531edd76d">EnterMutex</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#9b7cccbb94f6e56a09d944c345141102">ReentrantMutex::Lock</a> instead.  <a href="#857b4283a3e530cb6d46e50531edd76d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_reentrant_mutex.html#040cff602b443c681c15ccdfcd172520">Unlock</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#040cff602b443c681c15ccdfcd172520">ReentrantMutex::Unlock</a> instead.  <a href="#040cff602b443c681c15ccdfcd172520"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_reentrant_mutex.html#b95d05a02878620506fbeeb9cde3e792">LeaveMutex</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#040cff602b443c681c15ccdfcd172520">ReentrantMutex::Unlock</a> instead.  <a href="#b95d05a02878620506fbeeb9cde3e792"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="class_omiscid_1_1_reentrant_mutex.html">ReentrantMutex</a> Implementation.
<p>
<a class="el" href="class_omiscid_1_1_reentrant_mutex.html">ReentrantMutex</a> enables to lock some code section to avoid multiple access by several threads. These mutex are reentrant. <dl class="author" compact><dt><b>Author:</b></dt><dd>Dominique Vaufreydaz </dd></dl>

<p>

<p>
Definition at line <a class="el" href="_reentrant_mutex_8h-source.html#l00024">24</a> of file <a class="el" href="_reentrant_mutex_8h-source.html">ReentrantMutex.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c4c4b4ce9ab8f5ed297fe05773f36313"></a><!-- doxytag: member="Omiscid::ReentrantMutex::ReentrantMutex" ref="c4c4b4ce9ab8f5ed297fe05773f36313" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ReentrantMutex::ReentrantMutex           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor.
<p>

<p>
&lt; Posix <a class="el" href="class_omiscid_1_1_mutex.html">Mutex</a> init data
<p>
Definition at line <a class="el" href="_reentrant_mutex_8cpp-source.html#l00016">16</a> of file <a class="el" href="_reentrant_mutex_8cpp-source.html">ReentrantMutex.cpp</a>.<div class="fragment"><pre class="fragment"><a name="l00017"></a>00017 {
<a name="l00018"></a>00018 <span class="preprocessor">#ifdef WIN32</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>    mutex = CreateMutex(NULL, <span class="keyword">false</span>, NULL );
<a name="l00020"></a>00020 <span class="preprocessor">#else</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>    pthread_mutexattr_t attr;
<a name="l00023"></a>00023     pthread_mutexattr_init (&amp;attr);
<a name="l00024"></a>00024     pthread_mutexattr_settype (&amp;attr, PTHREAD_MUTEX_RECURSIVE);
<a name="l00025"></a>00025
<a name="l00026"></a>00026     <span class="keywordflow">if</span> ( pthread_mutex_init(&amp;mutex, &amp;attr) != 0 )
<a name="l00027"></a>00027     {
<a name="l00028"></a>00028         <span class="keywordflow">throw</span>  <a class="code" href="class_omiscid_1_1_simple_exception.html">SimpleException</a>(<span class="stringliteral">"Error Mutex Init"</span>);
<a name="l00029"></a>00029     }
<a name="l00030"></a>00030 <span class="preprocessor">#endif</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#ifdef DEBUG</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>    OwnerId = 0;
<a name="l00033"></a>00033 <span class="preprocessor">#endif</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>}
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="9b7cccbb94f6e56a09d944c345141102"></a><!-- doxytag: member="Omiscid::ReentrantMutex::Lock" ref="9b7cccbb94f6e56a09d944c345141102" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ReentrantMutex::Lock           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#9b7cccbb94f6e56a09d944c345141102">ReentrantMutex::Lock</a> instead.
<p>
Wait if the mutex is already locked, until it is unlocked, and then locks the mutex <dl class="return" compact><dt><b>Returns:</b></dt><dd>false if an error occured </dd></dl>

<p>
Implements <a class="el" href="class_omiscid_1_1_lockable_object.html#7ca10a36dda0516902ce249609df8fb8">Omiscid::LockableObject</a>.
<p>
Definition at line <a class="el" href="_reentrant_mutex_8cpp-source.html#l00048">48</a> of file <a class="el" href="_reentrant_mutex_8cpp-source.html">ReentrantMutex.cpp</a>.
<p>
References <a class="el" href="_thread_8cpp-source.html#l00229">Omiscid::Thread::GetThreadId()</a>.
<p>
Referenced by <a class="el" href="_reentrant_mutex_8h-source.html#l00047">EnterMutex()</a>, <a class="el" href="_simple_list_8h-source.html#l00699">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, and <a class="el" href="_recycle_simple_list_8h-source.html#l00164">Omiscid::MutexedSimpleRecycleList&lt; TYPE &gt;::Lock()</a>.<div class="fragment"><pre class="fragment"><a name="l00049"></a>00049 {
<a name="l00050"></a>00050 <span class="preprocessor">#ifdef WIN32</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Result = WaitForSingleObject( mutex, INFINITE );
<a name="l00052"></a>00052     <span class="keywordflow">if</span> ( Result == WAIT_OBJECT_0 )
<a name="l00053"></a>00053     {
<a name="l00054"></a>00054 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>        <span class="comment">// In debug mode, set the owner id</span>
<a name="l00056"></a>00056         OwnerId = <a class="code" href="class_omiscid_1_1_thread.html#4c5e8bfb284b971560cf9628b60b9dfb">Thread::GetThreadId</a>();
<a name="l00057"></a>00057 <span class="preprocessor">#endif</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>        <span class="comment">// Here we go, we've got the mutex</span>
<a name="l00059"></a>00059         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00060"></a>00060     }
<a name="l00061"></a>00061 <span class="preprocessor">#else</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( pthread_mutex_lock(&amp;mutex) == 0 )
<a name="l00063"></a>00063     {
<a name="l00064"></a>00064 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>        <span class="comment">// In debug mode, set the owner id</span>
<a name="l00066"></a>00066         OwnerId = <a class="code" href="class_omiscid_1_1_thread.html#4c5e8bfb284b971560cf9628b60b9dfb">Thread::GetThreadId</a>();
<a name="l00067"></a>00067 <span class="preprocessor">#endif</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00069"></a>00069     }
<a name="l00070"></a>00070 <span class="preprocessor">#endif</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a>00072     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00073"></a>00073 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="857b4283a3e530cb6d46e50531edd76d"></a><!-- doxytag: member="Omiscid::ReentrantMutex::EnterMutex" ref="857b4283a3e530cb6d46e50531edd76d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Omiscid::ReentrantMutex::EnterMutex           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#9b7cccbb94f6e56a09d944c345141102">ReentrantMutex::Lock</a> instead.
<p>
Wait if the mutex is already locked, until it is unlocked, and then locks the mutex <dl class="return" compact><dt><b>Returns:</b></dt><dd>false if an error occured </dd></dl>

<p>
Definition at line <a class="el" href="_reentrant_mutex_8h-source.html#l00047">47</a> of file <a class="el" href="_reentrant_mutex_8h-source.html">ReentrantMutex.h</a>.
<p>
References <a class="el" href="_reentrant_mutex_8cpp-source.html#l00048">Lock()</a>.<div class="fragment"><pre class="fragment"><a name="l00047"></a>00047 { <span class="keywordflow">return</span> <a class="code" href="class_omiscid_1_1_reentrant_mutex.html#9b7cccbb94f6e56a09d944c345141102">Lock</a>(); };
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="040cff602b443c681c15ccdfcd172520"></a><!-- doxytag: member="Omiscid::ReentrantMutex::Unlock" ref="040cff602b443c681c15ccdfcd172520" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ReentrantMutex::Unlock           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unlock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#040cff602b443c681c15ccdfcd172520">ReentrantMutex::Unlock</a> instead.
<p>
Enables other clients to use the critical section protected by this mutex.
<p>
Implements <a class="el" href="class_omiscid_1_1_lockable_object.html#5326e9213953feee6245513f110052c8">Omiscid::LockableObject</a>.
<p>
Definition at line <a class="el" href="_reentrant_mutex_8cpp-source.html#l00075">75</a> of file <a class="el" href="_reentrant_mutex_8cpp-source.html">ReentrantMutex.cpp</a>.
<p>
Referenced by <a class="el" href="_reentrant_mutex_8h-source.html#l00061">LeaveMutex()</a>, <a class="el" href="_simple_list_8h-source.html#l00716">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Unlock()</a>, and <a class="el" href="_recycle_simple_list_8h-source.html#l00170">Omiscid::MutexedSimpleRecycleList&lt; TYPE &gt;::Unlock()</a>.<div class="fragment"><pre class="fragment"><a name="l00076"></a>00076 {
<a name="l00077"></a>00077 <span class="preprocessor">#ifdef WIN32</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( !ReleaseMutex(mutex) )
<a name="l00079"></a>00079     {
<a name="l00080"></a>00080         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082 <span class="preprocessor">#else</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( pthread_mutex_unlock(&amp;mutex) != 0 )
<a name="l00084"></a>00084     {
<a name="l00085"></a>00085         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087 <span class="preprocessor">#endif</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#ifdef DEBUG</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span>    OwnerId = 0;
<a name="l00090"></a>00090 <span class="preprocessor">#endif</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>
<a name="l00092"></a>00092     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00093"></a>00093 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b95d05a02878620506fbeeb9cde3e792"></a><!-- doxytag: member="Omiscid::ReentrantMutex::LeaveMutex" ref="b95d05a02878620506fbeeb9cde3e792" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Omiscid::ReentrantMutex::LeaveMutex           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unlock the mutex. Deprecated, use <a class="el" href="class_omiscid_1_1_reentrant_mutex.html#040cff602b443c681c15ccdfcd172520">ReentrantMutex::Unlock</a> instead.
<p>
Enables other clients to use the critical section protected by this mutex.
<p>
Definition at line <a class="el" href="_reentrant_mutex_8h-source.html#l00061">61</a> of file <a class="el" href="_reentrant_mutex_8h-source.html">ReentrantMutex.h</a>.
<p>
References <a class="el" href="_reentrant_mutex_8cpp-source.html#l00075">Unlock()</a>.<div class="fragment"><pre class="fragment"><a name="l00061"></a>00061 { <span class="keywordflow">return</span> <a class="code" href="class_omiscid_1_1_reentrant_mutex.html#040cff602b443c681c15ccdfcd172520">Unlock</a>(); };
</pre></div>
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>System/System/<a class="el" href="_reentrant_mutex_8h-source.html">ReentrantMutex.h</a><li>System/<a class="el" href="_reentrant_mutex_8cpp-source.html">ReentrantMutex.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Mar 27 10:20:38 2008 for OMiSCID(aka O3MiSCID) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
