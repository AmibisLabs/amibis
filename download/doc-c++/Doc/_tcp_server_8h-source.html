<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OMiSCID(aka O3MiSCID): Com/Com/TcpServer.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_aa8454b712fe7ed4b098ee68e5880026.html">Com</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e6efdd388a90ee6508bf14e97be3adcf.html">Com</a></div>
<h1>TcpServer.h</h1><a href="_tcp_server_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef __TCP_SERVER_H__</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define __TCP_SERVER_H__</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;<a class="code" href="_com_2_com_2_config_8h.html">Com/Config.h</a>&gt;</span>
<a name="l00011"></a>00011
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;<a class="code" href="_simple_list_8h.html">System/SimpleList.h</a>&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;<a class="code" href="_reentrant_mutex_8h.html">System/ReentrantMutex.h</a>&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;<a class="code" href="_msg_socket_8h.html">Com/MsgSocket.h</a>&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;<a class="code" href="_com_tools_8h.html">Com/ComTools.h</a>&gt;</span>
<a name="l00016"></a>00016
<a name="l00017"></a>00017 <span class="keyword">namespace </span>Omiscid {
<a name="l00018"></a>00018
<a name="l00032"></a><a class="code" href="class_omiscid_1_1_tcp_server.html">00032</a> <span class="keyword">class </span><a class="code" href="class_omiscid_1_1_tcp_server.html">TcpServer</a> : <span class="keyword">public</span> <a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>, <span class="keyword">virtual</span> <span class="keyword">public</span> <a class="code" href="class_omiscid_1_1_com_tools.html">ComTools</a>
<a name="l00033"></a>00033 {
<a name="l00034"></a>00034  <span class="keyword">public</span>:
<a name="l00039"></a>00039   <a class="code" href="class_omiscid_1_1_tcp_server.html#bc977059ef61f1c42f5fda1bc5945ab0">TcpServer</a>();
<a name="l00040"></a>00040
<a name="l00047"></a>00047   <a class="code" href="class_omiscid_1_1_tcp_server.html#bc977059ef61f1c42f5fda1bc5945ab0">TcpServer</a>(<span class="keywordtype">int</span> port, <span class="keywordtype">int</span> pid = 0);
<a name="l00048"></a>00048
<a name="l00055"></a>00055   <span class="keyword">virtual</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#728a9e31c53cf86887f1f6149b1c46dd">~TcpServer</a>();
<a name="l00056"></a>00056
<a name="l00062"></a>00062   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#319287ed5b4e36cfdc8cf77dc0c0f822">Create</a>(<span class="keywordtype">int</span> port = 0);
<a name="l00063"></a>00063
<a name="l00065"></a>00065   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#0fab90d0581d4bf34ed8bc433bccb040">Disconnect</a>();
<a name="l00066"></a>00066
<a name="l00068"></a>00068   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#d987b90e8824c0bf8eb9968f88818683">DisconnectPeerId</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PeerId);
<a name="l00069"></a>00069
<a name="l00071"></a>00071   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#0b357d7c75aa9892953bbd20b2687f9d">Close</a>();
<a name="l00072"></a>00072
<a name="l00083"></a>00083   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#55541631515a196a876d1e31b5d3e957">SendToClient</a>(<span class="keywordtype">int</span> len, <span class="keyword">const</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pid);
<a name="l00084"></a>00084
<a name="l00085"></a>00085
<a name="l00092"></a>00092   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#c8626847c8c147546061b209d1f1a6c7">SendToAllClients</a>(<span class="keywordtype">int</span> len, <span class="keyword">const</span> <span class="keywordtype">char</span>* buf);
<a name="l00093"></a>00093
<a name="l00105"></a>00105   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#55541631515a196a876d1e31b5d3e957">SendToClient</a>(<span class="keywordtype">int</span>* tab_len, <span class="keyword">const</span> <span class="keywordtype">char</span>** tab_buf, <span class="keywordtype">int</span> nb_buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pid);
<a name="l00106"></a>00106
<a name="l00116"></a>00116   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#c8626847c8c147546061b209d1f1a6c7">SendToAllClients</a>(<span class="keywordtype">int</span>* tab_len, <span class="keyword">const</span> <span class="keywordtype">char</span>** tab_buf, <span class="keywordtype">int</span> nb_buf);
<a name="l00117"></a>00117
<a name="l00123"></a>00123   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#826ff4bb9524d87d88893cd3740f1c83">GetNbConnections</a>();
<a name="l00124"></a>00124
<a name="l00131"></a>00131   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#bcdbecbc9f2dc8451856557925e72d4c">AcceptConnection</a>(<a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>* msgsocket);
<a name="l00132"></a>00132
<a name="l00136"></a>00136   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#d1c7a4f33733a8a33c7580d2f96ac1d4">AddCallbackObject</a>(<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> * CallbackObject);
<a name="l00137"></a>00137
<a name="l00141"></a>00141   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#4e34be9756270406e5cad5ef1e6c988f">RemoveCallbackObject</a>(<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> * CallbackObject);
<a name="l00142"></a>00142
<a name="l00146"></a>00146   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#d0ce5f1ffbebe111122adcde750d0c0b">RemoveAllCallbackObjects</a>();
<a name="l00147"></a>00147
<a name="l00152"></a>00152   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#6843802ccb0192190d48ebb5b3a2efb8">SetServiceId</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pid);
<a name="l00153"></a>00153
<a name="l00156"></a>00156   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#aa8162daf6602a0611e631a5496a9c05">GetServiceId</a>() <span class="keyword">const</span>;
<a name="l00162"></a>00162   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#9a6dfaf0c6a8e7348c8c7d96da133d56">GetListPeerId</a>(<a class="code" href="class_omiscid_1_1_simple_list.html">SimpleList&lt;unsigned int&gt;</a>&amp; list_peer);
<a name="l00163"></a>00163
<a name="l00167"></a>00167   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#c6a92b461be318d0509e0936c51ade6d">GetTcpPort</a>();
<a name="l00168"></a>00168
<a name="l00169"></a>00169   <span class="keywordtype">int</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#31f2343ebf5fc3fa67879cf77af88852">GetMaxMessageSizeForTCP</a>();
<a name="l00170"></a>00170   <span class="keywordtype">void</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#7c4785fddd7dcd630a6daf1d0e1b09aa">SetMaxMessageSizeForTCP</a>(<span class="keywordtype">int</span> max);
<a name="l00171"></a>00171
<a name="l00172"></a>00172   <span class="keyword">virtual</span> <a class="code" href="class_omiscid_1_1_com_tools.html">ComTools</a>* <a class="code" href="class_omiscid_1_1_tcp_server.html#67ee8db36b2ad5308a70c3c7119fef02">Cast</a>();
<a name="l00173"></a>00173
<a name="l00175"></a>00175   <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#9db05c42a092a2a224f8130ec925249f">IsStillConnected</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> peer_id);
<a name="l00176"></a>00176
<a name="l00177"></a>00177  <span class="keyword">protected</span>:
<a name="l00185"></a>00185   <a class="code" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>* <a class="code" href="class_omiscid_1_1_tcp_server.html#caa93ccbbf148971015c04f8b1d4e2b5">FindClientFromId</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>);
<a name="l00186"></a>00186
<a name="l00187"></a><a class="code" href="class_omiscid_1_1_tcp_server.html#3ecdc7f7288bc477b9a587cbbc5b99af">00187</a>   <a class="code" href="class_omiscid_1_1_mutexed_simple_list.html">MutexedSimpleList&lt;MsgSocket*&gt;</a> <a class="code" href="class_omiscid_1_1_tcp_server.html#3ecdc7f7288bc477b9a587cbbc5b99af">listConnections</a>;
<a name="l00189"></a><a class="code" href="class_omiscid_1_1_tcp_server.html#3022825d7336f08a2d34c8ef4f2b5f06">00189</a>   <a class="code" href="class_omiscid_1_1_mutex.html">Mutex</a> <a class="code" href="class_omiscid_1_1_tcp_server.html#3022825d7336f08a2d34c8ef4f2b5f06">ProtectedSend</a>;
<a name="l00190"></a><a class="code" href="class_omiscid_1_1_tcp_server.html#b52b0e8db8d7b6d087f287cdbc199e54">00190</a>   <span class="keywordtype">char</span> * <a class="code" href="class_omiscid_1_1_tcp_server.html#b52b0e8db8d7b6d087f287cdbc199e54">BufferForMultipleClients</a>;
<a name="l00191"></a>00191
<a name="l00197"></a><a class="code" href="class_omiscid_1_1_tcp_server.html#4b00a5fc5b9f3d1de2487cfc08a1be6e">00197</a>    <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#4b00a5fc5b9f3d1de2487cfc08a1be6e">TcpNoDelayMode</a>;
<a name="l00198"></a>00198
<a name="l00199"></a>00199    <span class="keywordtype">bool</span> <a class="code" href="class_omiscid_1_1_tcp_server.html#e823fd6db6437dcd3b06b30f94fd6be8">SetTcpNoDelay</a>(<span class="keywordtype">bool</span> Set = <span class="keyword">true</span>);
<a name="l00200"></a>00200 };
<a name="l00201"></a>00201
<a name="l00202"></a>00202 } <span class="comment">// namespace Omiscid</span>
<a name="l00203"></a>00203
<a name="l00204"></a>00204 <span class="preprocessor">#endif // __TCP_SERVER_H__</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Aug 31 13:02:49 2007 for OMiSCID(aka O3MiSCID) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
