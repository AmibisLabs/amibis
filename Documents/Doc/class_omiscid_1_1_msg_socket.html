<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OMiSCID(aka O3MiSCID): Omiscid::MsgSocket Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespace_omiscid.html">Omiscid</a>::<a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a></div>
<h1>Omiscid::MsgSocket Class Reference</h1><!-- doxytag: class="Omiscid::MsgSocket" --><!-- doxytag: inherits="Omiscid::Thread" --><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> with an implementation of Basic Interconnection Protocol to exchange message.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_msg_socket_8h-source.html">Com/MsgSocket.h</a>&gt;</code>
<p>
<p>Inheritance diagram for Omiscid::MsgSocket:
<p><center><img src="class_omiscid_1_1_msg_socket.png" usemap="#Omiscid::MsgSocket_map" border="0" alt=""></center>
<map name="Omiscid::MsgSocket_map">
<area href="class_omiscid_1_1_thread.html" alt="Omiscid::Thread" shape="rect" coords="259,0,422,24">
<area href="class_omiscid_1_1_tcp_client.html" alt="Omiscid::TcpClient" shape="rect" coords="0,112,163,136">
<area href="class_omiscid_1_1_tcp_server.html" alt="Omiscid::TcpServer" shape="rect" coords="259,112,422,136">
<area href="class_omiscid_1_1_udp_exchange.html" alt="Omiscid::UdpExchange" shape="rect" coords="519,112,682,136">
<area href="class_omiscid_1_1_control_client.html" alt="Omiscid::ControlClient" shape="rect" coords="0,168,163,192">
<area href="class_omiscid_1_1_connector.html" alt="Omiscid::Connector" shape="rect" coords="173,168,336,192">
<area href="class_omiscid_1_1_control_server.html" alt="Omiscid::ControlServer" shape="rect" coords="346,168,509,192">
<area href="class_omiscid_1_1_connector.html" alt="Omiscid::Connector" shape="rect" coords="519,168,682,192">
<area href="class_omiscid_1_1_service_proxy.html" alt="Omiscid::ServiceProxy" shape="rect" coords="0,224,163,248">
<area href="class_omiscid_1_1_service.html" alt="Omiscid::Service" shape="rect" coords="259,224,422,248">
<area href="class_omiscid_1_1_service_from_x_m_l.html" alt="Omiscid::ServiceFromXML" shape="rect" coords="432,224,595,248">
</map>
<a href="class_omiscid_1_1_msg_socket-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="755a9ab6299c74f203aec3ae5a4a4c47"></a><!-- doxytag: member="Omiscid::MsgSocket::Callback_SyncLink" ref="755a9ab6299c74f203aec3ae5a4a4c47" args=")(MsgSocketCallBackData *, MsgSocket *)" -->
typedef void(FUNCTION_CALL_TYPE *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#755a9ab6299c74f203aec3ae5a4a4c47">Callback_SyncLink</a> )(<a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a> *, <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback for the message reception. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">MsgSocketKind</a> { , <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a> =  0, 
<a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>, 
<a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Kind of use of a <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> object.  <a href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7ce223225245ecb8b90d7344f86c2bd6">MsgSocket</a> (<a class="el" href="class_omiscid_1_1_socket.html">Socket</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#7ce223225245ecb8b90d7344f86c2bd6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#9954697cc56589a9d9e4a2d5adbd60f0">MsgSocket</a> (<a class="el" href="class_omiscid_1_1_socket.html#534fbf67274aee620617b048b84ff86a">Socket::SocketKind</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#9954697cc56589a9d9e4a2d5adbd60f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b5b28d057094d058c5445069f087bd93"></a><!-- doxytag: member="Omiscid::MsgSocket::~MsgSocket" ref="b5b28d057094d058c5445069f087bd93" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#b5b28d057094d058c5445069f087bd93">~MsgSocket</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#c04b57b1d0c89fe9c24ee667ba838ddb">InitForTcpClient</a> (const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> addr, int port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization for TCP Client.  <a href="#c04b57b1d0c89fe9c24ee667ba838ddb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#91aca9a8ded8f7a4801aa4c6e462bdda">InitForTcpServer</a> (int port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization for TCP Server.  <a href="#91aca9a8ded8f7a4801aa4c6e462bdda"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#568d6346baef454c48105712e402d6bd">InitForUdpExchange</a> (int port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization for UDP Exchange.  <a href="#568d6346baef454c48105712e402d6bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#e6a4e463d7f2b49842a19ef632607b91">AddCallbackObject</a> (<a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *CallbackObject)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">define callback function called in receive  <a href="#e6a4e463d7f2b49842a19ef632607b91"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#749006fded14bc52f629ffa9cccdacf8">RemoveCallbackObject</a> (<a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *CallbackObject)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove the callback for message reception.  <a href="#749006fded14bc52f629ffa9cccdacf8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cdc438cbf9829f9faceea68bd2535f67"></a><!-- doxytag: member="Omiscid::MsgSocket::RemoveAllCallbackObjects" ref="cdc438cbf9829f9faceea68bd2535f67" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#cdc438cbf9829f9faceea68bd2535f67">RemoveAllCallbackObjects</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove all the callback object for notification. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#dcae5a3be1bbfd31d4cbbe820d68a970">SetCallbackSyncLink</a> (<a class="el" href="class_omiscid_1_1_msg_socket.html#755a9ab6299c74f203aec3ae5a4a4c47">Callback_SyncLink</a> cr, void *user_data1=NULL, void *user_data2=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">define callback function called in receive  <a href="#dcae5a3be1bbfd31d4cbbe820d68a970"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void FUNCTION_CALL_TYPE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#01ceb5ec9a28d28fcf402acf5c35fbef">Run</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">method call when the <a class="el" href="class_omiscid_1_1_thread.html">Thread</a> is started  <a href="#01ceb5ec9a28d28fcf402acf5c35fbef"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7496fe09ce10bd84eac5ea6e44c8bc31">Send</a> (int len, const char *buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a message (on TCP) by using the BIP protocol.  <a href="#7496fe09ce10bd84eac5ea6e44c8bc31"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#b80c9ed1145f7d4e42240f6b8de09c0f">SendPreparedBuffer</a> (int len, char *buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a preformated BIP message (on TCP) by using the BIP protocol.  <a href="#b80c9ed1145f7d4e42240f6b8de09c0f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#4a2314b70a47858c24edbaa8636bcbe6">SendCuttedMsg</a> (int *tab_len, const char **tab_buf, int nb_buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a message in several part (on TCP) by using the BIP protocol.  <a href="#4a2314b70a47858c24edbaa8636bcbe6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#5c449b68e25f5cf173d0a69a699a975b">SendTo</a> (int len, const char *buf, <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> *udp_dest)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#66d6616574ad4f410e424a1e12fe1106">GetSocket</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access to the socket object.  <a href="#66d6616574ad4f410e424a1e12fe1106"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#abc7fca62eb753cff2f578a4fbbdfa79">GetPortNb</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access to Port number.  <a href="#abc7fca62eb753cff2f578a4fbbdfa79"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#643130a0e78dc5780e41571149ffb31c">IsConnected</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test if the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> is in usage.  <a href="#643130a0e78dc5780e41571149ffb31c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#36d29279121e5b48c35df617c095734b">Stop</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>.  <a href="#36d29279121e5b48c35df617c095734b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7567f7b5736b8363e464cec76a978276">SetServiceId</a> (unsigned int pid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the service Id.  <a href="#7567f7b5736b8363e464cec76a978276"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#c462f84f6ce4bf81a07af2a07513a3c1">GetServiceId</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access to the service Id.  <a href="#c462f84f6ce4bf81a07af2a07513a3c1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#11758f2a2dd4bb671849cb1856ee9a91">GetPeerPid</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#ed776388f004399875e8629248d4f655">ReceivedSyncLinkMsg</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received the link message  <a href="#ed776388f004399875e8629248d4f655"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#7d87ebb3ed18bb10f3074e2730feb9e6">WaitSyncLinkMsg</a> (unsigned int TimeToWait=250)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wait for a synclink message  <a href="#7d87ebb3ed18bb10f3074e2730feb9e6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#3ea7ed453da5945b9268aaf374059388">SyncLinkMsgSent</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has sent the link message  <a href="#3ea7ed453da5945b9268aaf374059388"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e77ffd60b132475148b513da8191757f"></a><!-- doxytag: member="Omiscid::MsgSocket::SendSyncLinkMsg" ref="e77ffd60b132475148b513da8191757f" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#e77ffd60b132475148b513da8191757f">SendSyncLinkMsg</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#30b58f15022ccc68fc521c4c34429892">GetMaxMessageSizeForTCP</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">size max for message on TCP  <a href="#30b58f15022ccc68fc521c4c34429892"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="88ed9e61763cf158e962a9f5cd342f5f"></a><!-- doxytag: member="Omiscid::MsgSocket::SetMaxMessageSizeForTCP" ref="88ed9e61763cf158e962a9f5cd342f5f" args="(int max)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#88ed9e61763cf158e962a9f5cd342f5f">SetMaxMessageSizeForTCP</a> (int max)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">size max for message on TCP Define the size max accepted for exchange on TCP (by default the value is 1&lt;&lt;16) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#8763f358c828376a54834a2a7520a603">operator==</a> (unsigned int peer_id) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compare the peer id.  <a href="#8763f358c828376a54834a2a7520a603"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="853ad7a7a3b7ea7afa9dff79a74ddc1a"></a><!-- doxytag: member="Omiscid::MsgSocket::SetTcpNoDelay" ref="853ad7a7a3b7ea7afa9dff79a74ddc1a" args="(bool Set=true)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#853ad7a7a3b7ea7afa9dff79a74ddc1a">SetTcpNoDelay</a> (bool Set=true)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the undelying socket in non buffering mode if possible. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="82d7f03e8a3acbfdd82bc35d3c1589f3"></a><!-- doxytag: member="Omiscid::MsgSocket::SetSyncLinkData" ref="82d7f03e8a3acbfdd82bc35d3c1589f3" args="(SimpleString DataForSL)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#82d7f03e8a3acbfdd82bc35d3c1589f3">SetSyncLinkData</a> (<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> DataForSL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="506ead22a9cd791637fdf9b72c936fae"></a><!-- doxytag: member="Omiscid::MsgSocket::GetSyncLinkData" ref="506ead22a9cd791637fdf9b72c936fae" args="()" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#506ead22a9cd791637fdf9b72c936fae">GetSyncLinkData</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="00e2aba97c10608f208f69f58c953735"></a><!-- doxytag: member="Omiscid::MsgSocket::GetPeerSyncLinkData" ref="00e2aba97c10608f208f69f58c953735" args="()" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#00e2aba97c10608f208f69f58c953735">GetPeerSyncLinkData</a> ()</td></tr>

<tr><td colspan="2"><div class="groupHeader">Naming connecting points</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#e23f86137b974c4b6aea0d07997a0bc3">SetName</a> (const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> NewName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#b0c5b480cb6cfbe936453014348e203e">GetName</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fe2be9fbe6bf41d5cfd01842cd244bec"></a><!-- doxytag: member="Omiscid::MsgSocket::PrepareBufferForBip" ref="fe2be9fbe6bf41d5cfd01842cd244bec" args="(char *buf, const char *data, int datalen)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#fe2be9fbe6bf41d5cfd01842cd244bec">PrepareBufferForBip</a> (char *buf, const char *data, int datalen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4cf50d6658d62b2d4302c81fa634a89e"></a><!-- doxytag: member="Omiscid::MsgSocket::WriteHeaderForBip" ref="4cf50d6658d62b2d4302c81fa634a89e" args="(char *buf, int service_id, int message_id)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a> (char *buf, int service_id, int message_id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0e59a668c2605cd4fae73fdb679dd615"></a><!-- doxytag: member="Omiscid::MsgSocket::PrepareBufferForBipFromCuttedMsg" ref="0e59a668c2605cd4fae73fdb679dd615" args="(char *buf, int *tab_length, const char **tab_buf, int nb_buf)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#0e59a668c2605cd4fae73fdb679dd615">PrepareBufferForBipFromCuttedMsg</a> (char *buf, int *tab_length, const char **tab_buf, int nb_buf)</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#626bf84517ed66dd14358ba09da0dac4">AcceptConnection</a> (<a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accept new TCP connection.  <a href="#626bf84517ed66dd14358ba09da0dac4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#0a89a1c77bf9ff30f5fe2c130191429b">AcceptConnection</a> (const <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> &amp;udp_connect, bool msg_empty)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accept new UDP connection.  <a href="#0a89a1c77bf9ff30f5fe2c130191429b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_mutexed_simple_list.html">MutexedSimpleList</a>&lt; <a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#deba601f8dc26650cf4168a4bcc2c03a">callbackData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_mutex.html">Mutex</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_omiscid_1_1_msg_socket.html#755a9ab6299c74f203aec3ae5a4a4c47">Callback_SyncLink</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bb8e5097944097a27947a933ca86b2af"></a><!-- doxytag: member="Omiscid::MsgSocket::callbackSyncLinkData" ref="bb8e5097944097a27947a933ca86b2af" args="" -->
<a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dc2366e1f8bd98228d4b21d9b752610a"></a><!-- doxytag: member="Omiscid::MsgSocket::SyncLinkData" ref="dc2366e1f8bd98228d4b21d9b752610a" args="" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#dc2366e1f8bd98228d4b21d9b752610a">SyncLinkData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="51c73d04bd18488cd80d5d792114b6cf"></a><!-- doxytag: member="Omiscid::MsgSocket::PeerSyncLinkData" ref="51c73d04bd18488cd80d5d792114b6cf" args="" -->
<a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#51c73d04bd18488cd80d5d792114b6cf">PeerSyncLinkData</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8ef83dfae782b01709b496d2e6901ff2"></a><!-- doxytag: member="Omiscid::MsgSocket::udpConnection" ref="8ef83dfae782b01709b496d2e6901ff2" args="" -->
<a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#8ef83dfae782b01709b496d2e6901ff2">udpConnection</a></td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3ecf3132e8c4bf890c07853cfab7619c"></a><!-- doxytag: member="Omiscid::MsgSocket::TcpServer" ref="3ecf3132e8c4bf890c07853cfab7619c" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_omiscid_1_1_msg_socket.html#3ecf3132e8c4bf890c07853cfab7619c">TcpServer</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="class_omiscid_1_1_socket.html">Socket</a> with an implementation of Basic Interconnection Protocol to exchange message. 
<p>
The 'size' bytes of the message are between : BIP\1.0 pid(8 bytes) mid(8 bytes) size(8 bytes)\r\n and \r\n When a new message arrives, the callback function 'callbackReceive' is called with the object 'callbackData' which contains the data.<p>
<dl compact><dt><b>Author:</b></dt><dd>Sebastien Pesnel <p>
Dominique Vaufreydaz </dd></dl>

<p>

<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00125">125</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b"></a><!-- doxytag: member="Omiscid::MsgSocket::MsgSocketKind" ref="4d9ba56644652acfe0e4f6ade0e9659b" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b">Omiscid::MsgSocket::MsgSocketKind</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Kind of use of a <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> object. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f"></a><!-- doxytag: member="TCP_CLIENT_KIND" ref="4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f" args="" -->TCP_CLIENT_KIND</em>&nbsp;</td><td>
for TCP connection : client side </td></tr>
<tr><td valign="top"><em><a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5"></a><!-- doxytag: member="TCP_SERVER_KIND" ref="4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5" args="" -->TCP_SERVER_KIND</em>&nbsp;</td><td>
for TCP connection : server side </td></tr>
<tr><td valign="top"><em><a class="anchor" name="4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb"></a><!-- doxytag: member="UDP_EXCHANGE_KIND" ref="4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb" args="" -->UDP_EXCHANGE_KIND</em>&nbsp;</td><td>
for UDP connection </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00147">147</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.<div class="fragment"><pre class="fragment"><a name="l00148"></a>00148     {
<a name="l00149"></a>00149       NONE_KIND = -1,
<a name="l00150"></a>00150       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a> = 0, 
<a name="l00151"></a>00151       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>, 
<a name="l00152"></a>00152       <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a> 
<a name="l00153"></a>00153     };
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="7ce223225245ecb8b90d7344f86c2bd6"></a><!-- doxytag: member="Omiscid::MsgSocket::MsgSocket" ref="7ce223225245ecb8b90d7344f86c2bd6" args="(Socket *s)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">MsgSocket::MsgSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. 
<p>
Create an object <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> built on the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> s. Used in TcpConnection to manage a new connection. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> creates for the new tcp connection. (example : <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> returned by Accept method) </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00085">85</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8cpp-source.html#l01449">SetMaxMessageSizeForTCP()</a>, and <a class="el" href="_msg_socket_8h-source.html#l00022">TCP_BUFFER_SIZE</a>.<div class="fragment"><pre class="fragment"><a name="l00085"></a>00085                               : 
<a name="l00086"></a>00086 <span class="preprocessor">#ifdef DEBUG_THREAD</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>        <a class="code" href="class_omiscid_1_1_thread.html#12cc1b699cb562eb1d9e1b067cc981b8">Thread</a>( <span class="keyword">false</span>, <span class="stringliteral">"MsgSocket"</span> ),
<a name="l00088"></a>00088 <span class="preprocessor">#endif</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a>(NULL),
<a name="l00090"></a>00090 socket(s),
<a name="l00091"></a>00091 bufferSize(<a class="code" href="_msg_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>),
<a name="l00092"></a>00092 buffer(NULL),
<a name="l00093"></a>00093 occupiedSize(0),
<a name="l00094"></a>00094 connected(<span class="keyword">true</span>),
<a name="l00095"></a>00095 start_tag(NULL),
<a name="l00096"></a>00096 buffer_udp_send(NULL),
<a name="l00097"></a>00097 kind(<a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>),
<a name="l00098"></a>00098 SendBuffer(NULL),
<a name="l00099"></a>00099 service_id(0),
<a name="l00100"></a>00100 message_id(0),
<a name="l00101"></a>00101 peer_pid(0),
<a name="l00102"></a>00102 receivedSyncLinkMsg(<span class="keyword">false</span>),
<a name="l00103"></a>00103 sendSyncLinkMsg(<span class="keyword">false</span>)
<a name="l00104"></a>00104 {
<a name="l00105"></a>00105         buffer = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[bufferSize];
<a name="l00106"></a>00106         SendBuffer = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[<a class="code" href="_msg_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>];
<a name="l00107"></a>00107 
<a name="l00108"></a>00108         start_tag = <span class="keyword">new</span> <span class="keywordtype">char</span>[tag_size+1];
<a name="l00109"></a>00109         <a class="code" href="class_omiscid_1_1_msg_socket.html#88ed9e61763cf158e962a9f5cd342f5f">SetMaxMessageSizeForTCP</a>(<a class="code" href="_msg_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>-1);
<a name="l00110"></a>00110 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9954697cc56589a9d9e4a2d5adbd60f0"></a><!-- doxytag: member="Omiscid::MsgSocket::MsgSocket" ref="9954697cc56589a9d9e4a2d5adbd60f0" args="(Socket::SocketKind type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">MsgSocket::MsgSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_socket.html#534fbf67274aee620617b048b84ff86a">Socket::SocketKind</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. 
<p>
Create an <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> for TCP or UDP communication. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>gives the kind of socket :<ul>
<li>Socket::TCP for TCP connection,</li><li>Socket::UDP for UDP connection. </li></ul>
</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00112">112</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8cpp-source.html#l01449">SetMaxMessageSizeForTCP()</a>, and <a class="el" href="_msg_socket_8h-source.html#l00022">TCP_BUFFER_SIZE</a>.<div class="fragment"><pre class="fragment"><a name="l00112"></a>00112                                           :
<a name="l00113"></a>00113 <span class="preprocessor">#ifdef DEBUG_THREAD</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>        <a class="code" href="class_omiscid_1_1_thread.html#12cc1b699cb562eb1d9e1b067cc981b8">Thread</a>( <span class="keyword">false</span>, <span class="stringliteral">"MsgSocket"</span> ),
<a name="l00115"></a>00115 <span class="preprocessor">#endif</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span><a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a>(NULL),
<a name="l00117"></a>00117 socket(NULL),    
<a name="l00118"></a>00118 bufferSize(0),
<a name="l00119"></a>00119 buffer(NULL),
<a name="l00120"></a>00120 occupiedSize(0),
<a name="l00121"></a>00121 connected(<span class="keyword">false</span>),
<a name="l00122"></a>00122 start_tag(NULL),
<a name="l00123"></a>00123 buffer_udp_send(NULL),
<a name="l00124"></a>00124 kind(NONE_KIND),
<a name="l00125"></a>00125 SendBuffer(NULL),
<a name="l00126"></a>00126 service_id(0),
<a name="l00127"></a>00127 message_id(0),
<a name="l00128"></a>00128 peer_pid(0),
<a name="l00129"></a>00129 receivedSyncLinkMsg(<span class="keyword">false</span>),
<a name="l00130"></a>00130 sendSyncLinkMsg(<span class="keyword">false</span>)
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132         socket = <span class="keyword">new</span> <a class="code" href="class_omiscid_1_1_socket.html">Socket</a>(type);
<a name="l00133"></a>00133         <a class="code" href="class_omiscid_1_1_msg_socket.html#88ed9e61763cf158e962a9f5cd342f5f">SetMaxMessageSizeForTCP</a>(<a class="code" href="_msg_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>-1);
<a name="l00134"></a>00134 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="0a89a1c77bf9ff30f5fe2c130191429b"></a><!-- doxytag: member="Omiscid::MsgSocket::AcceptConnection" ref="0a89a1c77bf9ff30f5fe2c130191429b" args="(const UdpConnection &amp;udp_connect, bool msg_empty)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> * MsgSocket::AcceptConnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>udp_connect</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>msg_empty</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Accept new UDP connection. 
<p>
Used for the kind UDP_EXCHANGE Enable to store new source that declare itself with an empty message, and return NULL if the message is not empty and the source not already known.<p>
(to implement in child class) current implementation : display a message on error output, and return NULL. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>udp_connect</em>&nbsp;</td><td>[in] information about the source of a message coming from UDP. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg_empty</em>&nbsp;</td><td>[in] true if udp_connect is the source of an empty message </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NULL if refuse the message, else return an object linked to the same source </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#c812dbd9cc446c38f95d3767a7b98dbc">Omiscid::Connector</a>, and <a class="el" href="class_omiscid_1_1_udp_exchange.html#1b38216d40b38624b537c92a2fa4aa7c">Omiscid::UdpExchange</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01218">1218</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_system_2_system_2_config_8h-source.html#l00221">Omiscid::OmiscidTrace()</a>.<div class="fragment"><pre class="fragment"><a name="l01219"></a>01219 {
<a name="l01220"></a>01220         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"AcceptConnection UDP (2)\n"</span>);
<a name="l01221"></a>01221         <span class="keywordflow">if</span>(msg_empty)
<a name="l01222"></a>01222         {
<a name="l01223"></a>01223                 <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"[Empty Msg]\n"</span>);
<a name="l01224"></a>01224         }
<a name="l01225"></a>01225         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"\n"</span>);
<a name="l01226"></a>01226         <span class="keywordflow">return</span> NULL;
<a name="l01227"></a>01227 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="626bf84517ed66dd14358ba09da0dac4"></a><!-- doxytag: member="Omiscid::MsgSocket::AcceptConnection" ref="626bf84517ed66dd14358ba09da0dac4" args="(MsgSocket *s)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::AcceptConnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Accept new TCP connection. 
<p>
method called by TCP or <a class="el" href="class_omiscid_1_1_connector.html">Connector</a> server when it accepts new connection. (method called by AcceptConnection()) Default Implementation : Close the connection. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>object created with the new accepted TCP connection </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the connection is accepted </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_tcp_server.html#bcdbecbc9f2dc8451856557925e72d4c">Omiscid::TcpServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00915">915</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l00581">Run()</a>.<div class="fragment"><pre class="fragment"><a name="l00916"></a>00916 {
<a name="l00917"></a>00917         <span class="comment">//std::cerr &lt;&lt; "in MsgSocket::acceptConnection(MsgSocket*)\n";</span>
<a name="l00918"></a>00918         <span class="keyword">delete</span> ms;
<a name="l00919"></a>00919         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00920"></a>00920 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e6a4e463d7f2b49842a19ef632607b91"></a><!-- doxytag: member="Omiscid::MsgSocket::AddCallbackObject" ref="e6a4e463d7f2b49842a19ef632607b91" args="(MsgSocketCallbackObject *CallbackObject)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::AddCallbackObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>CallbackObject</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
define callback function called in receive 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>a</em>&nbsp;</td><td>callback object to notify </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#580c5205fd1516a5f508ab9cc39a7eb1">Omiscid::Connector</a>, and <a class="el" href="class_omiscid_1_1_tcp_server.html#d1c7a4f33733a8a33c7580d2f96ac1d4">Omiscid::TcpServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00408">408</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00395">CallbackObjects</a>, <a class="el" href="_simple_list_8h-source.html#l00297">Omiscid::SimpleList&lt; TYPE &gt;::First()</a>, <a class="el" href="_simple_list_8h-source.html#l00358">Omiscid::SimpleList&lt; TYPE &gt;::GetCurrent()</a>, <a class="el" href="_simple_list_8h-source.html#l00672">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, <a class="el" href="_simple_list_8h-source.html#l00306">Omiscid::SimpleList&lt; TYPE &gt;::Next()</a>, <a class="el" href="_simple_list_8h-source.html#l00347">Omiscid::SimpleList&lt; TYPE &gt;::NotAtEnd()</a>, and <a class="el" href="_simple_list_8h-source.html#l00689">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Unlock()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00273">Omiscid::TcpServer::AddCallbackObject()</a>, <a class="el" href="_connector_8cpp-source.html#l00346">Omiscid::Connector::AddCallbackObject()</a>, <a class="el" href="_connector_8cpp-source.html#l00116">Omiscid::Connector::ConnectTo()</a>, and <a class="el" href="_control_client_8cpp-source.html#l00246">Omiscid::ControlClient::ControlClient()</a>.<div class="fragment"><pre class="fragment"><a name="l00409"></a>00409 {
<a name="l00410"></a>00410         <span class="comment">// lock the list</span>
<a name="l00411"></a>00411         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#b39c3c48e2d40bb2642cffe5ea547a11">Lock</a>();
<a name="l00412"></a>00412 
<a name="l00413"></a>00413         <span class="comment">// Is the Callback object already in the list ?</span>
<a name="l00414"></a>00414         <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#c7c4fea9592c48f7acdfe213d1516699">First</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#6b675c4924b15fb9659c039dec8e35e9">NotAtEnd</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#5f5bcce8d0d25343ee23ef38bc6afafb">Next</a>() )
<a name="l00415"></a>00415         {
<a name="l00416"></a>00416                 <span class="keywordflow">if</span> ( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#ca7e75d5e2ebbca79dad1cf5e788b16f">GetCurrent</a>() == CallbackObject )
<a name="l00417"></a>00417                 {
<a name="l00418"></a>00418                         <span class="comment">// unlock the list</span>
<a name="l00419"></a>00419                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l00420"></a>00420 
<a name="l00421"></a>00421                         <span class="comment">// Could not add trice the same listener</span>
<a name="l00422"></a>00422                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00423"></a>00423                 }
<a name="l00424"></a>00424         }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426         <span class="comment">// Add the listener</span>
<a name="l00427"></a>00427         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#4504f0e0f3fb158d00b90c714d947bb6">Add</a>( CallbackObject );
<a name="l00428"></a>00428 
<a name="l00429"></a>00429         <span class="comment">// unlock the list</span>
<a name="l00430"></a>00430         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l00431"></a>00431 
<a name="l00432"></a>00432         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00433"></a>00433 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="30b58f15022ccc68fc521c4c34429892"></a><!-- doxytag: member="Omiscid::MsgSocket::GetMaxMessageSizeForTCP" ref="30b58f15022ccc68fc521c4c34429892" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int MsgSocket::GetMaxMessageSizeForTCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
size max for message on TCP 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>the size max accepted for exchange on TCP </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_tcp_client.html#6b5496b778d2e3389c0089315f726fa6">Omiscid::TcpClient</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01444">1444</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00526">Omiscid::TcpServer::GetMaxMessageSizeForTCP()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00073">Omiscid::TcpClient::GetMaxMessageSizeForTCP()</a>.<div class="fragment"><pre class="fragment"><a name="l01445"></a>01445 {
<a name="l01446"></a>01446         <span class="keywordflow">return</span> maxMessageSizeForTCP; 
<a name="l01447"></a>01447 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0c5b480cb6cfbe936453014348e203e"></a><!-- doxytag: member="Omiscid::MsgSocket::GetName" ref="b0c5b480cb6cfbe936453014348e203e" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a> MsgSocket::GetName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used to set names on <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> 
<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#5e22460fe080d9818cb6dd3accc0a121">Omiscid::Connector</a>, <a class="el" href="class_omiscid_1_1_service.html#8a23c9630d2db2128e36ada08fee6429">Omiscid::Service</a>, and <a class="el" href="class_omiscid_1_1_service_proxy.html#941d508da01ac820390cb154f693c2e1">Omiscid::ServiceProxy</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00177">177</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_simple_string_8cpp-source.html#l00903">Omiscid::SimpleString::IsEmpty()</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00116">Omiscid::Connector::ConnectTo()</a>, <a class="el" href="_control_client_8cpp-source.html#l00847">Omiscid::ControlClient::FindInOutput()</a>, <a class="el" href="_control_client_8cpp-source.html#l00829">Omiscid::ControlClient::FindInput()</a>, <a class="el" href="_control_client_8cpp-source.html#l00838">Omiscid::ControlClient::FindOutput()</a>, <a class="el" href="_control_client_8cpp-source.html#l00819">Omiscid::ControlClient::FindVariable()</a>, and <a class="el" href="_connector_8cpp-source.html#l00065">Omiscid::Connector::GetName()</a>.<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178 {
<a name="l00179"></a>00179         <span class="keywordflow">if</span> ( Name.<a class="code" href="class_omiscid_1_1_simple_string.html#b41ea981fc2ce4c775fe394876e05252">IsEmpty</a>() )
<a name="l00180"></a>00180         {
<a name="l00181"></a>00181                 <span class="keywordflow">return</span> DefaultMsgSocketName;
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183         <span class="keywordflow">return</span> Name;
<a name="l00184"></a>00184 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="11758f2a2dd4bb671849cb1856ee9a91"></a><!-- doxytag: member="Omiscid::MsgSocket::GetPeerPid" ref="11758f2a2dd4bb671849cb1856ee9a91" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned int MsgSocket::GetPeerPid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>the peer id : the service id of the other extremity of the socket </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01406">1406</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00402">Omiscid::Connector::AcceptConnection()</a>, <a class="el" href="_tcp_client_8cpp-source.html#l00062">Omiscid::TcpClient::GetListPeerId()</a>, <a class="el" href="_connector_8cpp-source.html#l00515">Omiscid::Connector::GetListPeerId()</a>, <a class="el" href="_tcp_client_8cpp-source.html#l00057">Omiscid::TcpClient::GetPeerId()</a>, <a class="el" href="_connector_8cpp-source.html#l00583">Omiscid::ClientConnection::GetPeerPid()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00922">Send()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00988">SendCuttedMsg()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01045">SendPreparedBuffer()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01110">SendTo()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00614">Stop()</a>.<div class="fragment"><pre class="fragment"><a name="l01407"></a>01407 {
<a name="l01408"></a>01408         <span class="keywordflow">return</span> peer_pid; 
<a name="l01409"></a>01409 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="abc7fca62eb753cff2f578a4fbbdfa79"></a><!-- doxytag: member="Omiscid::MsgSocket::GetPortNb" ref="abc7fca62eb753cff2f578a4fbbdfa79" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned short MsgSocket::GetPortNb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Access to Port number. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>the port number where the socket listen </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01371">1371</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00414">Omiscid::Socket::GetPortNb()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00521">Omiscid::TcpServer::GetTcpPort()</a>, and <a class="el" href="_udp_exchange_8cpp-source.html#l00255">Omiscid::UdpExchange::GetUdpPort()</a>.<div class="fragment"><pre class="fragment"><a name="l01372"></a>01372 {
<a name="l01373"></a>01373         <span class="keywordflow">return</span> socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#edce8a71802b89e05c32951570befbc5">GetPortNb</a>();
<a name="l01374"></a>01374 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c462f84f6ce4bf81a07af2a07513a3c1"></a><!-- doxytag: member="Omiscid::MsgSocket::GetServiceId" ref="c462f84f6ce4bf81a07af2a07513a3c1" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned int MsgSocket::GetServiceId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Access to the service Id. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>the service id </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#bdfed05c66557fe06690478fa51ea119">Omiscid::Connector</a>, <a class="el" href="class_omiscid_1_1_tcp_client.html#f8fd00b176887f718995949ff8f60b59">Omiscid::TcpClient</a>, <a class="el" href="class_omiscid_1_1_tcp_server.html#b09fd0870a17dde9afc671085b8f082f">Omiscid::TcpServer</a>, <a class="el" href="class_omiscid_1_1_udp_exchange.html#1b2c0f40387b81e5c9d7a66735c38a50">Omiscid::UdpExchange</a>, and <a class="el" href="class_omiscid_1_1_control_server.html#32c79d9b79eadee366a9ed07820d4ec1">Omiscid::ControlServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01401">1401</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00245">Omiscid::UdpExchange::GetServiceId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00516">Omiscid::TcpServer::GetServiceId()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00052">Omiscid::TcpClient::GetServiceId()</a>.<div class="fragment"><pre class="fragment"><a name="l01402"></a>01402 {
<a name="l01403"></a>01403         <span class="keywordflow">return</span> service_id; 
<a name="l01404"></a>01404 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="66d6616574ad4f410e424a1e12fe1106"></a><!-- doxytag: member="Omiscid::MsgSocket::GetSocket" ref="66d6616574ad4f410e424a1e12fe1106" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_socket.html">Socket</a> * MsgSocket::GetSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Access to the socket object. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> object used by this <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> object </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01386">1386</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00042">Omiscid::UdpExchange::Close()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00052">Omiscid::TcpServer::Close()</a>, <a class="el" href="_connector_8cpp-source.html#l00071">Omiscid::Connector::ProcessLyncSyncMsg()</a>, and <a class="el" href="_control_server_8cpp-source.html#l00156">Omiscid::ControlServer::StartServer()</a>.<div class="fragment"><pre class="fragment"><a name="l01387"></a>01387 {
<a name="l01388"></a>01388         <span class="keywordflow">return</span> socket; 
<a name="l01389"></a>01389 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c04b57b1d0c89fe9c24ee667ba838ddb"></a><!-- doxytag: member="Omiscid::MsgSocket::InitForTcpClient" ref="c04b57b1d0c89fe9c24ee667ba838ddb" args="(const SimpleString addr, int port)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MsgSocket::InitForTcpClient           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialization for TCP Client. 
<p>
Connection to a TCP server <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>[in] host where find the server </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>[in] port where listen the server </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00357">357</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00280">Omiscid::Socket::Connect()</a>, <a class="el" href="_msg_socket_8h-source.html#l00022">TCP_BUFFER_SIZE</a>, and <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>.
<p>
Referenced by <a class="el" href="_tcp_client_8cpp-source.html#l00021">Omiscid::TcpClient::ConnectToServer()</a>.<div class="fragment"><pre class="fragment"><a name="l00358"></a>00358 {
<a name="l00359"></a>00359         socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#b211f8e5b45761f775d2735652174c98">Connect</a>(addr, port);
<a name="l00360"></a>00360         bufferSize = <a class="code" href="_msg_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>;
<a name="l00361"></a>00361         buffer = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[bufferSize];
<a name="l00362"></a>00362         <span class="keywordflow">if</span> ( buffer == NULL )
<a name="l00363"></a>00363         {
<a name="l00364"></a>00364                 <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>( <span class="stringliteral">"Not enougth memory"</span> );
<a name="l00365"></a>00365         }
<a name="l00366"></a>00366         SendBuffer = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[<a class="code" href="_msg_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>];
<a name="l00367"></a>00367         <span class="keywordflow">if</span> ( SendBuffer == NULL )
<a name="l00368"></a>00368         {
<a name="l00369"></a>00369                 <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>( <span class="stringliteral">"Not enougth memory"</span> );
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371         start_tag = <span class="keyword">new</span> <span class="keywordtype">char</span>[tag_size+1];
<a name="l00372"></a>00372         <span class="keywordflow">if</span> ( start_tag == NULL )
<a name="l00373"></a>00373         {
<a name="l00374"></a>00374                 <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>( <span class="stringliteral">"Not enougth memory"</span> );
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376         kind = <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>;
<a name="l00377"></a>00377         connected = <span class="keyword">true</span>;
<a name="l00378"></a>00378         occupiedSize = 0;
<a name="l00379"></a>00379 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="91aca9a8ded8f7a4801aa4c6e462bdda"></a><!-- doxytag: member="Omiscid::MsgSocket::InitForTcpServer" ref="91aca9a8ded8f7a4801aa4c6e462bdda" args="(int port)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MsgSocket::InitForTcpServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialization for TCP Server. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>[in] port number where the server must listen (if null a free port is chosen) </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00381">381</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00122">Omiscid::Socket::Bind()</a>, <a class="el" href="_simple_string_8h-source.html#l00249">Omiscid::SimpleString::EmptyString</a>, <a class="el" href="_socket_8cpp-source.html#l00163">Omiscid::Socket::Listen()</a>, and <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00033">Omiscid::TcpServer::Create()</a>.<div class="fragment"><pre class="fragment"><a name="l00382"></a>00382 {
<a name="l00383"></a>00383         socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#309a0816cad7f62b0b3a3d9dafe03b89">Bind</a>(<a class="code" href="class_omiscid_1_1_simple_string.html#c6fd8dc249665e634760ba47fe32e983">SimpleString::EmptyString</a>, port);    
<a name="l00384"></a>00384         socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#4ddc75d91bf3ec294902523aa570357e">Listen</a>();
<a name="l00385"></a>00385         kind = <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>;
<a name="l00386"></a>00386         connected = <span class="keyword">true</span>;
<a name="l00387"></a>00387 
<a name="l00388"></a>00388         <span class="comment">//   unsigned short port_nb = socket-&gt;GetPortNb();</span>
<a name="l00389"></a>00389         <span class="comment">//   char hostname[256];</span>
<a name="l00390"></a>00390         <span class="comment">//   socket-&gt;GetHostName(hostname, 256);</span>
<a name="l00391"></a>00391 
<a name="l00392"></a>00392         <span class="comment">//   printf("Server Connected on : %s:%d", hostname, (int)port_nb);</span>
<a name="l00393"></a>00393 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="568d6346baef454c48105712e402d6bd"></a><!-- doxytag: member="Omiscid::MsgSocket::InitForUdpExchange" ref="568d6346baef454c48105712e402d6bd" args="(int port)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MsgSocket::InitForUdpExchange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialization for UDP Exchange. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>[in] port where wait for connections </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00396">396</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_socket_8cpp-source.html#l00122">Omiscid::Socket::Bind()</a>, <a class="el" href="_simple_string_8h-source.html#l00249">Omiscid::SimpleString::EmptyString</a>, <a class="el" href="_msg_socket_8h-source.html#l00022">TCP_BUFFER_SIZE</a>, <a class="el" href="_msg_socket_8h-source.html#l00152">UDP_EXCHANGE_KIND</a>, and <a class="el" href="_msg_socket_8h-source.html#l00023">UDP_MAX_MSG_SIZE</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00024">Omiscid::UdpExchange::Create()</a>.<div class="fragment"><pre class="fragment"><a name="l00397"></a>00397 {
<a name="l00398"></a>00398         socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#309a0816cad7f62b0b3a3d9dafe03b89">Bind</a>(<a class="code" href="class_omiscid_1_1_simple_string.html#c6fd8dc249665e634760ba47fe32e983">SimpleString::EmptyString</a>, port);    
<a name="l00399"></a>00399         bufferSize = <a class="code" href="_msg_socket_8h.html#02ded67c60c79f3a121a19a495bde2fe">TCP_BUFFER_SIZE</a>;
<a name="l00400"></a>00400         buffer = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[bufferSize];
<a name="l00401"></a>00401         buffer_udp_send = <span class="keyword">new</span> <span class="keywordtype">char</span>[<a class="code" href="_msg_socket_8h.html#ab35bfe248d0a277ab80183fcf9c8aa4">UDP_MAX_MSG_SIZE</a>];
<a name="l00402"></a>00402         kind = <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>;
<a name="l00403"></a>00403         connected = <span class="keyword">true</span>;
<a name="l00404"></a>00404         occupiedSize = 0;
<a name="l00405"></a>00405 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="643130a0e78dc5780e41571149ffb31c"></a><!-- doxytag: member="Omiscid::MsgSocket::IsConnected" ref="643130a0e78dc5780e41571149ffb31c" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::IsConnected           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Test if the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> is in usage. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>false if this object is no more useful (no more connected) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01391">1391</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00273">Omiscid::TcpServer::AddCallbackObject()</a>, <a class="el" href="_service_proxy_8cpp-source.html#l00426">Omiscid::ServiceProxy::AddRemoteVariableChangeListener()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00462">Omiscid::TcpServer::DisconnectPeerId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00422">Omiscid::TcpServer::FindClientFromId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00352">Omiscid::TcpServer::GetListPeerId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00207">Omiscid::TcpServer::GetNbConnections()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00330">Omiscid::TcpServer::RemoveAllCallbackObjects()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00300">Omiscid::TcpServer::RemoveCallbackObject()</a>, <a class="el" href="_service_proxy_8cpp-source.html#l00475">Omiscid::ServiceProxy::RemoveRemoteVariableChangeListener()</a>, <a class="el" href="_connector_8cpp-source.html#l00211">Omiscid::Connector::SendToAll()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00404">Omiscid::TcpServer::SetMaxMessageSizeForTCP()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00376">Omiscid::TcpServer::SetServiceId()</a>, <a class="el" href="_service_proxy_8cpp-source.html#l00354">Omiscid::ServiceProxy::SetVariableValue()</a>, and <a class="el" href="_service_proxy_8cpp-source.html#l00304">Omiscid::ServiceProxy::UpdateDescription()</a>.<div class="fragment"><pre class="fragment"><a name="l01392"></a>01392 {
<a name="l01393"></a>01393         <span class="keywordflow">return</span> connected;
<a name="l01394"></a>01394 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8763f358c828376a54834a2a7520a603"></a><!-- doxytag: member="Omiscid::MsgSocket::operator==" ref="8763f358c828376a54834a2a7520a603" args="(unsigned int peer_id) const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::operator==           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>peer_id</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Compare the peer id. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>peer_id</em>&nbsp;</td><td>[in] peer id to compare </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the peer id for this socket has the value 'peer_id' </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01465">1465</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.<div class="fragment"><pre class="fragment"><a name="l01466"></a>01466 {
<a name="l01467"></a>01467         <span class="keywordflow">return</span> peer_pid == peer_id; 
<a name="l01468"></a>01468 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ed776388f004399875e8629248d4f655"></a><!-- doxytag: member="Omiscid::MsgSocket::ReceivedSyncLinkMsg" ref="ed776388f004399875e8629248d4f655" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::ReceivedSyncLinkMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received the link message 
<p>
An link message is exchanged when the socket are connected. The extremity can then exchange their id <dl compact><dt><b>Returns:</b></dt><dd>true if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received an empty message </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01411">1411</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_reentrant_mutex_8cpp-source.html#l00046">Omiscid::ReentrantMutex::EnterMutex()</a>, and <a class="el" href="_reentrant_mutex_8cpp-source.html#l00069">Omiscid::ReentrantMutex::LeaveMutex()</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l01425">WaitSyncLinkMsg()</a>.<div class="fragment"><pre class="fragment"><a name="l01412"></a>01412 {
<a name="l01413"></a>01413         <span class="keywordtype">bool</span> tmpb;
<a name="l01414"></a>01414         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l01415"></a>01415         tmpb = receivedSyncLinkMsg;
<a name="l01416"></a>01416         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01417"></a>01417         <span class="keywordflow">return</span> tmpb;
<a name="l01418"></a>01418 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="749006fded14bc52f629ffa9cccdacf8"></a><!-- doxytag: member="Omiscid::MsgSocket::RemoveCallbackObject" ref="749006fded14bc52f629ffa9cccdacf8" args="(MsgSocketCallbackObject *CallbackObject)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::RemoveCallbackObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>CallbackObject</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove the callback for message reception. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>a</em>&nbsp;</td><td>callback object to remove from notification list </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#f22b8e86e1a4768b9f78a7fa2304b58d">Omiscid::Connector</a>, and <a class="el" href="class_omiscid_1_1_tcp_server.html#4e34be9756270406e5cad5ef1e6c988f">Omiscid::TcpServer</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00439">439</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00395">CallbackObjects</a>, <a class="el" href="_simple_list_8h-source.html#l00297">Omiscid::SimpleList&lt; TYPE &gt;::First()</a>, <a class="el" href="_simple_list_8h-source.html#l00358">Omiscid::SimpleList&lt; TYPE &gt;::GetCurrent()</a>, <a class="el" href="_simple_list_8h-source.html#l00672">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, <a class="el" href="_simple_list_8h-source.html#l00306">Omiscid::SimpleList&lt; TYPE &gt;::Next()</a>, <a class="el" href="_simple_list_8h-source.html#l00347">Omiscid::SimpleList&lt; TYPE &gt;::NotAtEnd()</a>, <a class="el" href="_simple_list_8h-source.html#l00367">Omiscid::SimpleList&lt; TYPE &gt;::RemoveCurrent()</a>, and <a class="el" href="_simple_list_8h-source.html#l00689">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Unlock()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00300">Omiscid::TcpServer::RemoveCallbackObject()</a>, and <a class="el" href="_connector_8cpp-source.html#l00375">Omiscid::Connector::RemoveCallbackObject()</a>.<div class="fragment"><pre class="fragment"><a name="l00440"></a>00440 {
<a name="l00441"></a>00441         <span class="comment">// lock the list</span>
<a name="l00442"></a>00442         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#b39c3c48e2d40bb2642cffe5ea547a11">Lock</a>();
<a name="l00443"></a>00443 
<a name="l00444"></a>00444         <span class="comment">// Is the Callback object already in the list ?</span>
<a name="l00445"></a>00445         <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#c7c4fea9592c48f7acdfe213d1516699">First</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#6b675c4924b15fb9659c039dec8e35e9">NotAtEnd</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#5f5bcce8d0d25343ee23ef38bc6afafb">Next</a>() )
<a name="l00446"></a>00446         {
<a name="l00447"></a>00447                 <span class="keywordflow">if</span> ( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#ca7e75d5e2ebbca79dad1cf5e788b16f">GetCurrent</a>() == CallbackObject )
<a name="l00448"></a>00448                 {
<a name="l00449"></a>00449                         <span class="comment">// Found ! Remove it</span>
<a name="l00450"></a>00450                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#0dfee47c8bd72141dfd9fb4cf9225cb5">RemoveCurrent</a>();
<a name="l00451"></a>00451 
<a name="l00452"></a>00452                         <span class="comment">// unlock the list</span>
<a name="l00453"></a>00453                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l00454"></a>00454 
<a name="l00455"></a>00455                         <span class="comment">// ok, we remove it</span>
<a name="l00456"></a>00456                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00457"></a>00457                 }
<a name="l00458"></a>00458         }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         <span class="comment">// unlock the list</span>
<a name="l00461"></a>00461         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l00462"></a>00462 
<a name="l00463"></a>00463         <span class="comment">// We did not find it</span>
<a name="l00464"></a>00464         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00465"></a>00465 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="01ceb5ec9a28d28fcf402acf5c35fbef"></a><!-- doxytag: member="Omiscid::MsgSocket::Run" ref="01ceb5ec9a28d28fcf402acf5c35fbef" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void FUNCTION_CALL_TYPE MsgSocket::Run           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
method call when the <a class="el" href="class_omiscid_1_1_thread.html">Thread</a> is started 
<p>
According to the kind of <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> :<ul>
<li>receive the message on UDP, on TCP,</li><li>accept the connection for TCP_SERVER </li></ul>

<p>
Implements <a class="el" href="class_omiscid_1_1_thread.html#9527b3c79a6302f29d0bbc774e707f53">Omiscid::Thread</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00581">581</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8cpp-source.html#l00915">AcceptConnection()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00213">Omiscid::OmiscidError()</a>, <a class="el" href="_thread_8cpp-source.html#l00157">Omiscid::Thread::StopPending()</a>, <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>, <a class="el" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>, and <a class="el" href="_msg_socket_8h-source.html#l00152">UDP_EXCHANGE_KIND</a>.<div class="fragment"><pre class="fragment"><a name="l00582"></a>00582 {
<a name="l00583"></a>00583         <span class="keywordflow">switch</span> (kind)
<a name="l00584"></a>00584         {
<a name="l00585"></a>00585         <span class="keywordflow">case</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b0ecdad184663d729a7c9ab6b9fcc73f5">TCP_SERVER_KIND</a>:
<a name="l00586"></a>00586                 <span class="keywordflow">while</span>(connected &amp;&amp; !<a class="code" href="class_omiscid_1_1_thread.html#a045d0e2f5dd7766af501cf988b8f2a4">StopPending</a>())
<a name="l00587"></a>00587                 {
<a name="l00588"></a>00588                         <span class="comment">//printf("MsgSocket::run : tcp_server loop\n");</span>
<a name="l00589"></a>00589                         <a class="code" href="class_omiscid_1_1_msg_socket.html#626bf84517ed66dd14358ba09da0dac4">AcceptConnection</a>();
<a name="l00590"></a>00590                 }
<a name="l00591"></a>00591                 <span class="keywordflow">break</span>;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593         <span class="keywordflow">case</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b37eed2ba19df9c46649c797a72cc2d7f">TCP_CLIENT_KIND</a>:
<a name="l00594"></a>00594                 <span class="keywordflow">while</span>(connected &amp;&amp; !<a class="code" href="class_omiscid_1_1_thread.html#a045d0e2f5dd7766af501cf988b8f2a4">StopPending</a>())
<a name="l00595"></a>00595                 {
<a name="l00596"></a>00596                         <span class="comment">//printf("MsgSocket::run : tcp_client loop\n");</span>
<a name="l00597"></a>00597                         Receive();
<a name="l00598"></a>00598                 }
<a name="l00599"></a>00599                 <span class="keywordflow">break</span>;
<a name="l00600"></a>00600 
<a name="l00601"></a>00601         <span class="keywordflow">case</span> <a class="code" href="class_omiscid_1_1_msg_socket.html#4d9ba56644652acfe0e4f6ade0e9659b26b29a312b497622aad9256945d6b8cb">UDP_EXCHANGE_KIND</a>:
<a name="l00602"></a>00602                 <span class="keywordflow">while</span>(connected &amp;&amp; !<a class="code" href="class_omiscid_1_1_thread.html#a045d0e2f5dd7766af501cf988b8f2a4">StopPending</a>())
<a name="l00603"></a>00603                 {
<a name="l00604"></a>00604                         ReceiveUdpExchange();
<a name="l00605"></a>00605                 }
<a name="l00606"></a>00606                 <span class="keywordflow">break</span>;
<a name="l00607"></a>00607 
<a name="l00608"></a>00608         <span class="keywordflow">default</span>:
<a name="l00609"></a>00609                 <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"run : unknown type of connection\n"</span>);
<a name="l00610"></a>00610                 <span class="keywordflow">break</span>;
<a name="l00611"></a>00611         }
<a name="l00612"></a>00612 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7496fe09ce10bd84eac5ea6e44c8bc31"></a><!-- doxytag: member="Omiscid::MsgSocket::Send" ref="7496fe09ce10bd84eac5ea6e44c8bc31" args="(int len, const char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int MsgSocket::Send           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a message (on TCP) by using the BIP protocol. 
<p>
add tag around data in buf before sending them <div class="fragment"><pre class="fragment">   * BIP/1.0 pid mid size\r\n
   * ... data ...
   * /r/n
   * </pre></div> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>[in] number of byte to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>[in] buffer to send </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of byte send (byte of data + tag) (-1 if error occured) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00922">922</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00395">CallbackObjects</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00060">Omiscid::MsgSocketCallbackObject::Disconnected()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00046">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00059">Omiscid::SimpleException::err</a>, <a class="el" href="_simple_list_8h-source.html#l00297">Omiscid::SimpleList&lt; TYPE &gt;::First()</a>, <a class="el" href="_simple_list_8h-source.html#l00358">Omiscid::SimpleList&lt; TYPE &gt;::GetCurrent()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01406">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00893">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00069">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_list_8h-source.html#l00672">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, <a class="el" href="_simple_exception_8h-source.html#l00058">Omiscid::SimpleException::msg</a>, <a class="el" href="_simple_list_8h-source.html#l00306">Omiscid::SimpleList&lt; TYPE &gt;::Next()</a>, <a class="el" href="_simple_list_8h-source.html#l00347">Omiscid::SimpleList&lt; TYPE &gt;::NotAtEnd()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00221">Omiscid::OmiscidTrace()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00268">PrepareBufferForBip()</a>, <a class="el" href="_socket_8cpp-source.html#l00341">Omiscid::Socket::Send()</a>, <a class="el" href="_simple_list_8h-source.html#l00689">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Unlock()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00338">WriteHeaderForBip()</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00211">Omiscid::Connector::SendToAll()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00058">Omiscid::TcpServer::SendToClient()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00029">Omiscid::TcpClient::SendToServer()</a>.<div class="fragment"><pre class="fragment"><a name="l00923"></a>00923 {
<a name="l00924"></a>00924         <span class="keywordtype">int</span> TotalLen;
<a name="l00925"></a>00925 
<a name="l00926"></a>00926         <span class="keywordflow">if</span>(len &gt; maxMessageSizeForTCP)
<a name="l00927"></a>00927         {
<a name="l00928"></a>00928                 <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"Message too big for TCP size=%d,  sizemax=%d\n"</span>, len, maxMessageSizeForTCP);
<a name="l00929"></a>00929                 <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>(<span class="stringliteral">"Message too big for TCP"</span>);
<a name="l00930"></a>00930         }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l00933"></a>00933         <span class="keywordflow">try</span>
<a name="l00934"></a>00934         {
<a name="l00935"></a>00935                 TotalLen = <a class="code" href="class_omiscid_1_1_msg_socket.html#fe2be9fbe6bf41d5cfd01842cd244bec">PrepareBufferForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, buf, len );
<a name="l00936"></a>00936                 <span class="keywordflow">if</span> ( TotalLen == -1 )
<a name="l00937"></a>00937                 {
<a name="l00938"></a>00938                         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l00939"></a>00939                         <span class="keywordflow">return</span> -1;
<a name="l00940"></a>00940                 }
<a name="l00941"></a>00941 
<a name="l00942"></a>00942                 <span class="comment">// We complete the header</span>
<a name="l00943"></a>00943                 <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, service_id, message_id );
<a name="l00944"></a>00944 
<a name="l00945"></a>00945                 <span class="comment">// Increase the number for the next message</span>
<a name="l00946"></a>00946                 message_id++;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948                 <span class="keywordflow">if</span> ( (TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(TotalLen, (<span class="keywordtype">char</span>*)SendBuffer)) == -1)
<a name="l00949"></a>00949                 {
<a name="l00950"></a>00950                         TotalLen = -1;
<a name="l00951"></a>00951                 }
<a name="l00952"></a>00952 
<a name="l00953"></a>00953 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00954"></a>00954 <span class="preprocessor"></span>                <span class="keywordflow">if</span> ( Debug &amp; DBG_SEND )
<a name="l00955"></a>00955                 {
<a name="l00956"></a>00956                         SendBuffer[TotalLen] = <span class="charliteral">'\0'</span>;
<a name="l00957"></a>00957                         fprintf( stderr, <span class="stringliteral">"MsgSocket::Send: %s (%d)\n"</span>, SendBuffer, TotalLen );
<a name="l00958"></a>00958                 }
<a name="l00959"></a>00959 <span class="preprocessor">#endif</span>
<a name="l00960"></a>00960 <span class="preprocessor"></span>
<a name="l00961"></a>00961                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l00962"></a>00962                 <span class="keywordflow">return</span> TotalLen;
<a name="l00963"></a>00963         }
<a name="l00964"></a>00964         <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l00965"></a>00965         {
<a name="l00966"></a>00966                 <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d\n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#c4a307138a16850413564c3dc7103ea9">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l00967"></a>00967                 <span class="keywordflow">if</span> ( connected )
<a name="l00968"></a>00968                 {
<a name="l00969"></a>00969                         <span class="comment">// Send disconnected message</span>
<a name="l00970"></a>00970                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#b39c3c48e2d40bb2642cffe5ea547a11">Lock</a>();
<a name="l00971"></a>00971                         <span class="comment">// Send info to all listener</span>
<a name="l00972"></a>00972                         <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#c7c4fea9592c48f7acdfe213d1516699">First</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#6b675c4924b15fb9659c039dec8e35e9">NotAtEnd</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#5f5bcce8d0d25343ee23ef38bc6afafb">Next</a>() )
<a name="l00973"></a>00973                         {
<a name="l00974"></a>00974                                 <span class="keywordflow">try</span>
<a name="l00975"></a>00975                                 {
<a name="l00976"></a>00976                                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#ca7e75d5e2ebbca79dad1cf5e788b16f">GetCurrent</a>()-&gt;<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#dcc6582e5b3b1624eec40983321e0d38">Disconnected</a>(*<span class="keyword">this</span>,<a class="code" href="class_omiscid_1_1_msg_socket.html#11758f2a2dd4bb671849cb1856ee9a91">GetPeerPid</a>());
<a name="l00977"></a>00977                                 }
<a name="l00978"></a>00978                                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {}      <span class="comment">// Discard it...</span>
<a name="l00979"></a>00979                         }
<a name="l00980"></a>00980                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l00981"></a>00981                         connected = <span class="keyword">false</span>;
<a name="l00982"></a>00982                 }
<a name="l00983"></a>00983                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l00984"></a>00984                 <span class="keywordflow">return</span> -1;
<a name="l00985"></a>00985         }
<a name="l00986"></a>00986 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="4a2314b70a47858c24edbaa8636bcbe6"></a><!-- doxytag: member="Omiscid::MsgSocket::SendCuttedMsg" ref="4a2314b70a47858c24edbaa8636bcbe6" args="(int *tab_len, const char **tab_buf, int nb_buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int MsgSocket::SendCuttedMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int *&nbsp;</td>
          <td class="mdname" nowrap> <em>tab_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char **&nbsp;</td>
          <td class="mdname" nowrap> <em>tab_buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nb_buf</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a message in several part (on TCP) by using the BIP protocol. 
<p>
The parts of the message are sent the one per one, the all message is put between BIP tag. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tab_len</em>&nbsp;</td><td>[in] array of buffer size : the size of each buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tab_buf</em>&nbsp;</td><td>[in] array of buffer : the buffers to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nb_buf</em>&nbsp;</td><td>[in] the number of buffer to send : the number of buffer in the array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of byte send (byte of data + tag) (-1 if error occured) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00988">988</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00395">CallbackObjects</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00060">Omiscid::MsgSocketCallbackObject::Disconnected()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00046">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00059">Omiscid::SimpleException::err</a>, <a class="el" href="_simple_list_8h-source.html#l00297">Omiscid::SimpleList&lt; TYPE &gt;::First()</a>, <a class="el" href="_simple_list_8h-source.html#l00358">Omiscid::SimpleList&lt; TYPE &gt;::GetCurrent()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01406">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00893">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00069">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_list_8h-source.html#l00672">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, <a class="el" href="_simple_exception_8h-source.html#l00058">Omiscid::SimpleException::msg</a>, <a class="el" href="_simple_list_8h-source.html#l00306">Omiscid::SimpleList&lt; TYPE &gt;::Next()</a>, <a class="el" href="_simple_list_8h-source.html#l00347">Omiscid::SimpleList&lt; TYPE &gt;::NotAtEnd()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00221">Omiscid::OmiscidTrace()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00291">PrepareBufferForBipFromCuttedMsg()</a>, <a class="el" href="_socket_8cpp-source.html#l00341">Omiscid::Socket::Send()</a>, <a class="el" href="_simple_list_8h-source.html#l00689">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Unlock()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00338">WriteHeaderForBip()</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00080">Omiscid::TcpServer::SendToClient()</a>.<div class="fragment"><pre class="fragment"><a name="l00989"></a>00989 {
<a name="l00990"></a>00990         <span class="keywordtype">int</span> TotalLen;
<a name="l00991"></a>00991 
<a name="l00992"></a>00992         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l00993"></a>00993         <span class="keywordflow">try</span>
<a name="l00994"></a>00994         {
<a name="l00995"></a>00995                 TotalLen = <a class="code" href="class_omiscid_1_1_msg_socket.html#0e59a668c2605cd4fae73fdb679dd615">PrepareBufferForBipFromCuttedMsg</a>( (<span class="keywordtype">char</span>*)SendBuffer, tab_length, tab_buf, nb_buf);
<a name="l00996"></a>00996                 <span class="keywordflow">if</span> ( TotalLen == -1 )
<a name="l00997"></a>00997                 {
<a name="l00998"></a>00998                         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l00999"></a>00999                         <span class="keywordflow">return</span> -1;
<a name="l01000"></a>01000                 }
<a name="l01001"></a>01001                 <span class="comment">// We complete the header</span>
<a name="l01002"></a>01002                 <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>( (<span class="keywordtype">char</span>*)SendBuffer, service_id, message_id );
<a name="l01003"></a>01003 
<a name="l01004"></a>01004 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01005"></a>01005 <span class="preprocessor"></span>                <span class="keywordflow">if</span> ( Debug &amp; DBG_SEND )
<a name="l01006"></a>01006                 {
<a name="l01007"></a>01007                         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"MsgSocket::SendPreparedBuffer %s\n"</span>, SendBuffer );
<a name="l01008"></a>01008                 }
<a name="l01009"></a>01009 <span class="preprocessor">#endif</span>
<a name="l01010"></a>01010 <span class="preprocessor"></span>
<a name="l01011"></a>01011                 <span class="comment">// Increase the number for the next message</span>
<a name="l01012"></a>01012                 ++message_id;
<a name="l01013"></a>01013 
<a name="l01014"></a>01014                 <span class="keywordflow">if</span> ( (TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(TotalLen, (<span class="keywordtype">char</span>*)SendBuffer)) == -1)
<a name="l01015"></a>01015                 {
<a name="l01016"></a>01016                         TotalLen = -1;
<a name="l01017"></a>01017                 }
<a name="l01018"></a>01018                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01019"></a>01019                 <span class="keywordflow">return</span> TotalLen;
<a name="l01020"></a>01020         }
<a name="l01021"></a>01021         <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l01022"></a>01022         {
<a name="l01023"></a>01023                 <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d\n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#c4a307138a16850413564c3dc7103ea9">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l01024"></a>01024                 <span class="keywordflow">if</span> ( connected )
<a name="l01025"></a>01025                 {
<a name="l01026"></a>01026                         <span class="comment">// Send disconnected message</span>
<a name="l01027"></a>01027                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#b39c3c48e2d40bb2642cffe5ea547a11">Lock</a>();
<a name="l01028"></a>01028                         <span class="comment">// Send info to all listener</span>
<a name="l01029"></a>01029                         <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#c7c4fea9592c48f7acdfe213d1516699">First</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#6b675c4924b15fb9659c039dec8e35e9">NotAtEnd</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#5f5bcce8d0d25343ee23ef38bc6afafb">Next</a>() )
<a name="l01030"></a>01030                         {
<a name="l01031"></a>01031                                 <span class="keywordflow">try</span>
<a name="l01032"></a>01032                                 {
<a name="l01033"></a>01033                                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#ca7e75d5e2ebbca79dad1cf5e788b16f">GetCurrent</a>()-&gt;<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#dcc6582e5b3b1624eec40983321e0d38">Disconnected</a>(*<span class="keyword">this</span>, <a class="code" href="class_omiscid_1_1_msg_socket.html#11758f2a2dd4bb671849cb1856ee9a91">GetPeerPid</a>());
<a name="l01034"></a>01034                                 }
<a name="l01035"></a>01035                                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l01036"></a>01036                         }
<a name="l01037"></a>01037                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l01038"></a>01038                         connected = <span class="keyword">false</span>;      
<a name="l01039"></a>01039                 }
<a name="l01040"></a>01040                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01041"></a>01041                 <span class="keywordflow">return</span> -1;
<a name="l01042"></a>01042         }
<a name="l01043"></a>01043 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b80c9ed1145f7d4e42240f6b8de09c0f"></a><!-- doxytag: member="Omiscid::MsgSocket::SendPreparedBuffer" ref="b80c9ed1145f7d4e42240f6b8de09c0f" args="(int len, char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int MsgSocket::SendPreparedBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a preformated BIP message (on TCP) by using the BIP protocol. 
<p>
add tag at the bigning of buf and send it <div class="fragment"><pre class="fragment">   * BIP/1.0 pid mid size\r\n
   * ... data ...
   * /r/n
   * </pre></div> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>[in] number of byte to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>[in,out] buffer to modify and send </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of byte send (byte of data + tag) (-1 if error occured) </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01045">1045</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00395">CallbackObjects</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00060">Omiscid::MsgSocketCallbackObject::Disconnected()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00046">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00059">Omiscid::SimpleException::err</a>, <a class="el" href="_simple_list_8h-source.html#l00297">Omiscid::SimpleList&lt; TYPE &gt;::First()</a>, <a class="el" href="_simple_list_8h-source.html#l00358">Omiscid::SimpleList&lt; TYPE &gt;::GetCurrent()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01406">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00893">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00069">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_list_8h-source.html#l00672">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, <a class="el" href="_simple_exception_8h-source.html#l00058">Omiscid::SimpleException::msg</a>, <a class="el" href="_simple_list_8h-source.html#l00306">Omiscid::SimpleList&lt; TYPE &gt;::Next()</a>, <a class="el" href="_simple_list_8h-source.html#l00347">Omiscid::SimpleList&lt; TYPE &gt;::NotAtEnd()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00213">Omiscid::OmiscidError()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00221">Omiscid::OmiscidTrace()</a>, <a class="el" href="_socket_8cpp-source.html#l00341">Omiscid::Socket::Send()</a>, <a class="el" href="_simple_list_8h-source.html#l00689">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Unlock()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00338">WriteHeaderForBip()</a>.<div class="fragment"><pre class="fragment"><a name="l01046"></a>01046 {
<a name="l01047"></a>01047         <span class="keywordflow">if</span>(l_buffer == NULL)
<a name="l01048"></a>01048         {
<a name="l01049"></a>01049                 <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"SendPreparedBuffer : NULL mesg\n"</span> );
<a name="l01050"></a>01050                 <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>(<span class="stringliteral">"Message NULL for TCP"</span>);
<a name="l01051"></a>01051         }
<a name="l01052"></a>01052 
<a name="l01053"></a>01053         <span class="keywordflow">if</span>(len &gt; maxMessageSizeForTCP)
<a name="l01054"></a>01054         {
<a name="l01055"></a>01055                 <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"Message too big for TCP size=%d,  sizemax=%d\n"</span>, len, maxMessageSizeForTCP);
<a name="l01056"></a>01056                 <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>(<span class="stringliteral">"Message too big for TCP"</span>);
<a name="l01057"></a>01057         }
<a name="l01058"></a>01058 
<a name="l01059"></a>01059         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l01060"></a>01060         <span class="keywordflow">try</span>
<a name="l01061"></a>01061         {
<a name="l01062"></a>01062                 <span class="comment">// Here we've got a full buffer and we can (must) write our header at the in at the beginning !</span>
<a name="l01063"></a>01063                 <a class="code" href="class_omiscid_1_1_msg_socket.html#4cf50d6658d62b2d4302c81fa634a89e">WriteHeaderForBip</a>(l_buffer, service_id, message_id );
<a name="l01064"></a>01064 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01065"></a>01065 <span class="preprocessor"></span>                <span class="keywordflow">if</span> ( Debug &amp; DBG_SEND )
<a name="l01066"></a>01066                 {
<a name="l01067"></a>01067                         <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"MsgSocket::SendPreparedBuffer %s\n"</span>, l_buffer );
<a name="l01068"></a>01068                 }
<a name="l01069"></a>01069 <span class="preprocessor">#endif</span>
<a name="l01070"></a>01070 <span class="preprocessor"></span>
<a name="l01071"></a>01071                 message_id++;
<a name="l01072"></a>01072 
<a name="l01073"></a>01073                 <span class="comment">//socket-&gt;Send(strlen(start_tag), start_tag);</span>
<a name="l01074"></a>01074                 <span class="keywordtype">int</span> res;
<a name="l01075"></a>01075                 <span class="keywordflow">if</span>((res = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#97f88b33e0a6288cb8b1a86e8ead640c">Send</a>(len, l_buffer)) != -1) 
<a name="l01076"></a>01076                 {
<a name="l01077"></a>01077                         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01078"></a>01078                         <span class="keywordflow">return</span> res;             
<a name="l01079"></a>01079                 }       
<a name="l01080"></a>01080                 <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"Erreur Send (-1)\n"</span> );
<a name="l01081"></a>01081                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01082"></a>01082                 <span class="keywordflow">return</span> -1;
<a name="l01083"></a>01083 
<a name="l01084"></a>01084         }
<a name="l01085"></a>01085         <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l01086"></a>01086         {
<a name="l01087"></a>01087                 <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d\n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#c4a307138a16850413564c3dc7103ea9">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l01088"></a>01088                 <span class="keywordflow">if</span> ( connected )
<a name="l01089"></a>01089                 {
<a name="l01090"></a>01090                         <span class="comment">// Send disconnected message</span>
<a name="l01091"></a>01091                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#b39c3c48e2d40bb2642cffe5ea547a11">Lock</a>();
<a name="l01092"></a>01092                         <span class="comment">// Send info to all listener</span>
<a name="l01093"></a>01093                         <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#c7c4fea9592c48f7acdfe213d1516699">First</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#6b675c4924b15fb9659c039dec8e35e9">NotAtEnd</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#5f5bcce8d0d25343ee23ef38bc6afafb">Next</a>() )
<a name="l01094"></a>01094                         {
<a name="l01095"></a>01095                                 <span class="keywordflow">try</span>
<a name="l01096"></a>01096                                 {
<a name="l01097"></a>01097                                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#ca7e75d5e2ebbca79dad1cf5e788b16f">GetCurrent</a>()-&gt;<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#dcc6582e5b3b1624eec40983321e0d38">Disconnected</a>(*<span class="keyword">this</span>, <a class="code" href="class_omiscid_1_1_msg_socket.html#11758f2a2dd4bb671849cb1856ee9a91">GetPeerPid</a>());
<a name="l01098"></a>01098                                 }
<a name="l01099"></a>01099                                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l01100"></a>01100                         }
<a name="l01101"></a>01101                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l01102"></a>01102                         connected = <span class="keyword">false</span>;
<a name="l01103"></a>01103                 }
<a name="l01104"></a>01104                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01105"></a>01105                 <span class="keywordflow">return</span> -1;
<a name="l01106"></a>01106         }
<a name="l01107"></a>01107 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="5c449b68e25f5cf173d0a69a699a975b"></a><!-- doxytag: member="Omiscid::MsgSocket::SendTo" ref="5c449b68e25f5cf173d0a69a699a975b" args="(int len, const char *buf, UdpConnection *udp_dest)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int MsgSocket::SendTo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_omiscid_1_1_udp_connection.html">UdpConnection</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>udp_dest</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a message (on UDP) by using BIP protocol <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>[in] number of byte to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>[in] buffer to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>udp_dest</em>&nbsp;</td><td>[in] the destination for the message </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of byte send (-1 if error occured) </dd></dl>

<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_udp_exchange.html#e41aa7e950ccad40424e0a98d557d637">Omiscid::UdpExchange</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01110">1110</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00086">Omiscid::UdpConnection::addr</a>, <a class="el" href="_msg_socket_8h-source.html#l00395">CallbackObjects</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00060">Omiscid::MsgSocketCallbackObject::Disconnected()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00046">Omiscid::ReentrantMutex::EnterMutex()</a>, <a class="el" href="_simple_exception_8h-source.html#l00059">Omiscid::SimpleException::err</a>, <a class="el" href="_simple_list_8h-source.html#l00297">Omiscid::SimpleList&lt; TYPE &gt;::First()</a>, <a class="el" href="_simple_list_8h-source.html#l00358">Omiscid::SimpleList&lt; TYPE &gt;::GetCurrent()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01406">GetPeerPid()</a>, <a class="el" href="_simple_string_8cpp-source.html#l00893">Omiscid::SimpleString::GetStr()</a>, <a class="el" href="_reentrant_mutex_8cpp-source.html#l00069">Omiscid::ReentrantMutex::LeaveMutex()</a>, <a class="el" href="_simple_list_8h-source.html#l00672">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, <a class="el" href="_simple_exception_8h-source.html#l00058">Omiscid::SimpleException::msg</a>, <a class="el" href="_simple_list_8h-source.html#l00306">Omiscid::SimpleList&lt; TYPE &gt;::Next()</a>, <a class="el" href="_simple_list_8h-source.html#l00347">Omiscid::SimpleList&lt; TYPE &gt;::NotAtEnd()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00213">Omiscid::OmiscidError()</a>, <a class="el" href="_system_2_system_2_config_8h-source.html#l00221">Omiscid::OmiscidTrace()</a>, <a class="el" href="_socket_8cpp-source.html#l00364">Omiscid::Socket::SendTo()</a>, <a class="el" href="_msg_socket_8h-source.html#l00023">UDP_MAX_MSG_SIZE</a>, and <a class="el" href="_simple_list_8h-source.html#l00689">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Unlock()</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00048">Omiscid::UdpExchange::SendTo()</a>.<div class="fragment"><pre class="fragment"><a name="l01111"></a>01111 {
<a name="l01112"></a>01112         <span class="comment">//   OmiscidTrace( "in MsgSocket::SendTo\n");</span>
<a name="l01113"></a>01113         <span class="comment">//   OmiscidTrace( "send to pid : %u\n", dest-&gt;pid);</span>
<a name="l01114"></a>01114         <span class="keywordflow">if</span>(len &gt; <a class="code" href="_msg_socket_8h.html#ab35bfe248d0a277ab80183fcf9c8aa4">UDP_MAX_MSG_SIZE</a>){
<a name="l01115"></a>01115                 <a class="code" href="namespace_omiscid.html#64d7a55752c68825ea9a198a56fdab86">OmiscidError</a>( <span class="stringliteral">"Message too big for UDP size=%d,  sizemax=%d\n"</span>, len, <a class="code" href="_msg_socket_8h.html#ab35bfe248d0a277ab80183fcf9c8aa4">UDP_MAX_MSG_SIZE</a>);
<a name="l01116"></a>01116                 <span class="keywordflow">throw</span> <a class="code" href="class_omiscid_1_1_msg_socket_exception.html">MsgSocketException</a>(<span class="stringliteral">"Message too big for UDP"</span>);
<a name="l01117"></a>01117         }
<a name="l01118"></a>01118 
<a name="l01119"></a>01119         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#c70aaab4722b292f1ecdb9ec5ff69647">EnterMutex</a>();
<a name="l01120"></a>01120         <span class="keywordflow">if</span> ( buffer_udp_send == NULL )
<a name="l01121"></a>01121         {
<a name="l01122"></a>01122                 buffer_udp_send = <span class="keyword">new</span> <span class="keywordtype">char</span>[2048];
<a name="l01123"></a>01123                 <span class="keywordflow">if</span> ( buffer_udp_send == NULL )
<a name="l01124"></a>01124                 {
<a name="l01125"></a>01125                         protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01126"></a>01126                         <span class="keywordflow">return</span> 0;
<a name="l01127"></a>01127                 }
<a name="l01128"></a>01128         }
<a name="l01129"></a>01129         <span class="keywordflow">try</span>
<a name="l01130"></a>01130         {
<a name="l01131"></a>01131                 <span class="keyword">struct </span>sockaddr_in* destptr = &amp;(dest-&gt;addr);
<a name="l01132"></a>01132 
<a name="l01133"></a>01133                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total = tag_size+len+tag_end_size;
<a name="l01134"></a>01134 
<a name="l01135"></a>01135                 sprintf(buffer_udp_send, tag_str, service_id, message_id, len);
<a name="l01136"></a>01136                 ++message_id;
<a name="l01137"></a>01137                 sprintf((buffer_udp_send+total-tag_end_size), tag_end);
<a name="l01138"></a>01138                 memcpy(buffer_udp_send+tag_size, buf, len);
<a name="l01139"></a>01139 
<a name="l01140"></a>01140                 <span class="keywordtype">int</span> TotalLen = socket-&gt;<a class="code" href="class_omiscid_1_1_socket.html#325ef1bedf42b839bec08d776905e05e">SendTo</a>(total, buffer_udp_send, destptr);
<a name="l01141"></a>01141                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01142"></a>01142                 <span class="keywordflow">return</span> TotalLen;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144                 <span class="comment">//      socket-&gt;SendTo(strlen(start_tag), start_tag, destptr);      </span>
<a name="l01145"></a>01145                 <span class="comment">//      socket-&gt;SendTo(len, buf, destptr);      </span>
<a name="l01146"></a>01146                 <span class="comment">//      socket-&gt;SendTo(tag_end_size, tag_end, destptr);</span>
<a name="l01147"></a>01147 
<a name="l01148"></a>01148         }
<a name="l01149"></a>01149         <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp; e)
<a name="l01150"></a>01150         {
<a name="l01151"></a>01151                 <a class="code" href="namespace_omiscid.html#75386ddb9b14af103045f0df7c2b2429">OmiscidTrace</a>( <span class="stringliteral">"SocketException: %s %d \n"</span>, e.<a class="code" href="class_omiscid_1_1_simple_exception.html#bf3693dcd188f280e72bc861c19188bb">msg</a>.<a class="code" href="class_omiscid_1_1_simple_string.html#c4a307138a16850413564c3dc7103ea9">GetStr</a>(), e.<a class="code" href="class_omiscid_1_1_simple_exception.html#25a4d280190281495a5f85fa4dca1319">err</a>);
<a name="l01152"></a>01152                 <span class="keywordflow">if</span> ( connected )
<a name="l01153"></a>01153                 {
<a name="l01154"></a>01154                         <span class="comment">// Send disconnected message</span>
<a name="l01155"></a>01155                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#b39c3c48e2d40bb2642cffe5ea547a11">Lock</a>();
<a name="l01156"></a>01156                         <span class="comment">// Send info to all listener</span>
<a name="l01157"></a>01157                         <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#c7c4fea9592c48f7acdfe213d1516699">First</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#6b675c4924b15fb9659c039dec8e35e9">NotAtEnd</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#5f5bcce8d0d25343ee23ef38bc6afafb">Next</a>() )
<a name="l01158"></a>01158                         {
<a name="l01159"></a>01159                                 <span class="keywordflow">try</span>
<a name="l01160"></a>01160                                 {
<a name="l01161"></a>01161                                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#ca7e75d5e2ebbca79dad1cf5e788b16f">GetCurrent</a>()-&gt;<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#dcc6582e5b3b1624eec40983321e0d38">Disconnected</a>(*<span class="keyword">this</span>,<a class="code" href="class_omiscid_1_1_msg_socket.html#11758f2a2dd4bb671849cb1856ee9a91">GetPeerPid</a>());
<a name="l01162"></a>01162                                 }
<a name="l01163"></a>01163                                 <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l01164"></a>01164                         }
<a name="l01165"></a>01165                         <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l01166"></a>01166                         connected = <span class="keyword">false</span>;      
<a name="l01167"></a>01167                 }
<a name="l01168"></a>01168                 protectSend.<a class="code" href="class_omiscid_1_1_reentrant_mutex.html#b836768d7dc90e08a7c136ea780df2f2">LeaveMutex</a>();
<a name="l01169"></a>01169                 <span class="keywordflow">return</span> -1;
<a name="l01170"></a>01170         }
<a name="l01171"></a>01171 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="dcae5a3be1bbfd31d4cbbe820d68a970"></a><!-- doxytag: member="Omiscid::MsgSocket::SetCallbackSyncLink" ref="dcae5a3be1bbfd31d4cbbe820d68a970" args="(Callback_SyncLink cr, void *user_data1=NULL, void *user_data2=NULL)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MsgSocket::SetCallbackSyncLink           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_msg_socket.html#755a9ab6299c74f203aec3ae5a4a4c47">Callback_SyncLink</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>user_data1</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>user_data2</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
define callback function called in receive 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cr</em>&nbsp;</td><td>the callback call on receive message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data1</em>&nbsp;</td><td>pointer on data (will be found in the callback parameter) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data2</em>&nbsp;</td><td>pointer on data (will be found in the callback parameter) </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00479">479</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_message_8h-source.html#l00078">Omiscid::Message::buffer</a>, <a class="el" href="_msg_socket_8h-source.html#l00400">callbackSyncLinkData</a>, <a class="el" href="_msg_socket_8h-source.html#l00399">callbackSyncLinkFct</a>, <a class="el" href="_mutex_8cpp-source.html#l00042">Omiscid::Mutex::EnterMutex()</a>, <a class="el" href="_mutex_8cpp-source.html#l00065">Omiscid::Mutex::LeaveMutex()</a>, <a class="el" href="_message_8h-source.html#l00079">Omiscid::Message::len</a>, <a class="el" href="_msg_socket_8h-source.html#l00038">Omiscid::MsgSocketCallBackData::Msg</a>, <a class="el" href="_msg_socket_8h-source.html#l00398">mutex</a>, <a class="el" href="_msg_socket_8h-source.html#l00039">Omiscid::MsgSocketCallBackData::userData1</a>, and <a class="el" href="_msg_socket_8h-source.html#l00040">Omiscid::MsgSocketCallBackData::userData2</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00116">Omiscid::Connector::ConnectTo()</a>, and <a class="el" href="_connector_8cpp-source.html#l00038">Omiscid::Connector::Create()</a>.<div class="fragment"><pre class="fragment"><a name="l00480"></a>00480 {
<a name="l00481"></a>00481         <a class="code" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">mutex</a>.<a class="code" href="class_omiscid_1_1_mutex.html#8caff9254f412a46c84075261e325743">EnterMutex</a>();
<a name="l00482"></a>00482 
<a name="l00483"></a>00483         <a class="code" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">callbackSyncLinkFct</a> = cr;
<a name="l00484"></a>00484 
<a name="l00485"></a>00485         <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#8280558340d705cb00e23e2a7e46cf11">Msg</a>.<a class="code" href="class_omiscid_1_1_message.html#957b3b27097afaa7c59ac0e0812c33e9">len</a> = 0;
<a name="l00486"></a>00486         <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#8280558340d705cb00e23e2a7e46cf11">Msg</a>.<a class="code" href="class_omiscid_1_1_message.html#6d1fc92e7bcb8093a192605ce05ccb0c">buffer</a> = NULL;
<a name="l00487"></a>00487         <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#17ba8ff15c9b3774e5d87614ff90e0a1">userData1</a> = user_data1;
<a name="l00488"></a>00488         <a class="code" href="class_omiscid_1_1_msg_socket.html#bb8e5097944097a27947a933ca86b2af">callbackSyncLinkData</a>.<a class="code" href="class_omiscid_1_1_msg_socket_call_back_data.html#02be2c2528533e57fa4ddaf5b76a97a8">userData2</a> = user_data2;
<a name="l00489"></a>00489 
<a name="l00490"></a>00490         <a class="code" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">mutex</a>.<a class="code" href="class_omiscid_1_1_mutex.html#478cbb03b7704d5c9909e40165748b28">LeaveMutex</a>();
<a name="l00491"></a>00491 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e23f86137b974c4b6aea0d07997a0bc3"></a><!-- doxytag: member="Omiscid::MsgSocket::SetName" ref="e23f86137b974c4b6aea0d07997a0bc3" args="(const SimpleString NewName)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MsgSocket::SetName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_omiscid_1_1_simple_string.html">SimpleString</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>NewName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used to set names on <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> 
<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#5723d5976e777a330a152ec8f13bbbe4">Omiscid::Connector</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00172">172</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_connector_8cpp-source.html#l00116">Omiscid::Connector::ConnectTo()</a>, and <a class="el" href="_connector_8cpp-source.html#l00051">Omiscid::Connector::SetName()</a>.<div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 {
<a name="l00174"></a>00174         Name = NewName;
<a name="l00175"></a>00175 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7567f7b5736b8363e464cec76a978276"></a><!-- doxytag: member="Omiscid::MsgSocket::SetServiceId" ref="7567f7b5736b8363e464cec76a978276" args="(unsigned int pid)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MsgSocket::SetServiceId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pid</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the service Id. 
<p>
Define the id used by the BIP protocol to identifies peer in message exchange 
<p>
Reimplemented in <a class="el" href="class_omiscid_1_1_connector.html#f08cf8ae1470bc37400406a97938feb5">Omiscid::Connector</a>, <a class="el" href="class_omiscid_1_1_tcp_client.html#63530c7269bc484f39cdda729bf4e8c3">Omiscid::TcpClient</a>, <a class="el" href="class_omiscid_1_1_tcp_server.html#6843802ccb0192190d48ebb5b3a2efb8">Omiscid::TcpServer</a>, and <a class="el" href="class_omiscid_1_1_udp_exchange.html#0eef33ee246d7dd66736ceb9552e92f4">Omiscid::UdpExchange</a>.
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01396">1396</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00227">Omiscid::UdpExchange::SetServiceId()</a>, <a class="el" href="_tcp_server_8cpp-source.html#l00376">Omiscid::TcpServer::SetServiceId()</a>, and <a class="el" href="_tcp_client_8cpp-source.html#l00034">Omiscid::TcpClient::SetServiceId()</a>.<div class="fragment"><pre class="fragment"><a name="l01397"></a>01397 {
<a name="l01398"></a>01398         service_id = pid; 
<a name="l01399"></a>01399 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="36d29279121e5b48c35df617c095734b"></a><!-- doxytag: member="Omiscid::MsgSocket::Stop" ref="36d29279121e5b48c35df617c095734b" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MsgSocket::Stop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stop the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a>. 
<p>
stop the thread used for reception, or to accept connection and set the <a class="el" href="class_omiscid_1_1_msg_socket.html">MsgSocket</a> as disconnected 
<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l00614">614</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_msg_socket_8h-source.html#l00395">CallbackObjects</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00060">Omiscid::MsgSocketCallbackObject::Disconnected()</a>, <a class="el" href="_simple_list_8h-source.html#l00297">Omiscid::SimpleList&lt; TYPE &gt;::First()</a>, <a class="el" href="_simple_list_8h-source.html#l00358">Omiscid::SimpleList&lt; TYPE &gt;::GetCurrent()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01406">GetPeerPid()</a>, <a class="el" href="_simple_list_8h-source.html#l00672">Omiscid::MutexedSimpleList&lt; TYPE &gt;::Lock()</a>, <a class="el" href="_simple_list_8h-source.html#l00306">Omiscid::SimpleList&lt; TYPE &gt;::Next()</a>, and <a class="el" href="_simple_list_8h-source.html#l00347">Omiscid::SimpleList&lt; TYPE &gt;::NotAtEnd()</a>.
<p>
Referenced by <a class="el" href="_udp_exchange_8cpp-source.html#l00042">Omiscid::UdpExchange::Close()</a>, <a class="el" href="_connector_8cpp-source.html#l00027">Omiscid::Connector::~Connector()</a>, <a class="el" href="_control_client_8cpp-source.html#l00313">Omiscid::ControlClient::~ControlClient()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00136">~MsgSocket()</a>.<div class="fragment"><pre class="fragment"><a name="l00615"></a>00615 {
<a name="l00616"></a>00616         <span class="keywordflow">if</span> ( connected )
<a name="l00617"></a>00617         {
<a name="l00618"></a>00618                 <span class="comment">// Send disconnected message</span>
<a name="l00619"></a>00619                 <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#b39c3c48e2d40bb2642cffe5ea547a11">Lock</a>();
<a name="l00620"></a>00620                 <span class="comment">// Send info to all listener</span>
<a name="l00621"></a>00621                 <span class="keywordflow">for</span>( <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#c7c4fea9592c48f7acdfe213d1516699">First</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#6b675c4924b15fb9659c039dec8e35e9">NotAtEnd</a>(); <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#5f5bcce8d0d25343ee23ef38bc6afafb">Next</a>() )
<a name="l00622"></a>00622                 {
<a name="l00623"></a>00623                         <span class="keywordflow">try</span>
<a name="l00624"></a>00624                         {
<a name="l00625"></a>00625                                 <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_simple_list.html#ca7e75d5e2ebbca79dad1cf5e788b16f">GetCurrent</a>()-&gt;<a class="code" href="class_omiscid_1_1_msg_socket_callback_object.html#dcc6582e5b3b1624eec40983321e0d38">Disconnected</a>(*<span class="keyword">this</span>, <a class="code" href="class_omiscid_1_1_msg_socket.html#11758f2a2dd4bb671849cb1856ee9a91">GetPeerPid</a>());
<a name="l00626"></a>00626                         }
<a name="l00627"></a>00627                         <span class="keywordflow">catch</span>(<a class="code" href="class_omiscid_1_1_socket_exception.html">SocketException</a>&amp;) {} <span class="comment">// Discard it</span>
<a name="l00628"></a>00628                 }
<a name="l00629"></a>00629                 <a class="code" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">CallbackObjects</a>.<a class="code" href="class_omiscid_1_1_mutexed_simple_list.html#2d5434530a5fb2db5190483c41dd9761">Unlock</a>();
<a name="l00630"></a>00630                 connected = <span class="keyword">false</span>;
<a name="l00631"></a>00631         }
<a name="l00632"></a>00632         <a class="code" href="class_omiscid_1_1_thread.html#904f3d716a910c28bb28833a9f575832">Thread::StopThread</a>();
<a name="l00633"></a>00633 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="3ea7ed453da5945b9268aaf374059388"></a><!-- doxytag: member="Omiscid::MsgSocket::SyncLinkMsgSent" ref="3ea7ed453da5945b9268aaf374059388" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::SyncLinkMsgSent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
test if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has sent the link message 
<p>
An link message is exchanged when the socket are connected. The extremity can then exchange their id <dl compact><dt><b>Returns:</b></dt><dd>true if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received an empty message </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01439">1439</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l00493">SendSyncLinkMsg()</a>.<div class="fragment"><pre class="fragment"><a name="l01440"></a>01440 {
<a name="l01441"></a>01441         <span class="keywordflow">return</span> sendSyncLinkMsg; 
<a name="l01442"></a>01442 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7d87ebb3ed18bb10f3074e2730feb9e6"></a><!-- doxytag: member="Omiscid::MsgSocket::WaitSyncLinkMsg" ref="7d87ebb3ed18bb10f3074e2730feb9e6" args="(unsigned int TimeToWait=250)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MsgSocket::WaitSyncLinkMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>TimeToWait</em> = <code>250</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
wait for a synclink message 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>TimeToWait</em>&nbsp;</td><td>the max time to wait in ms (default 250 ms) </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the <a class="el" href="class_omiscid_1_1_socket.html">Socket</a> has received a SyncLink message before timeout </dd></dl>

<p>
Definition at line <a class="el" href="_msg_socket_8cpp-source.html#l01425">1425</a> of file <a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a>.
<p>
References <a class="el" href="_elapsed_time_8cpp-source.html#l00035">Omiscid::ElapsedTime::Get()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01411">ReceivedSyncLinkMsg()</a>, and <a class="el" href="_thread_8cpp-source.html#l00142">Omiscid::Thread::Sleep()</a>.<div class="fragment"><pre class="fragment"><a name="l01426"></a>01426 {
<a name="l01427"></a>01427         <a class="code" href="class_omiscid_1_1_elapsed_time.html">ElapsedTime</a> CountWaitedTime;
<a name="l01428"></a>01428         <span class="keywordflow">while</span>( connected == <span class="keyword">true</span> )
<a name="l01429"></a>01429         {
<a name="l01430"></a>01430                 <span class="keywordflow">if</span> ( <a class="code" href="class_omiscid_1_1_msg_socket.html#ed776388f004399875e8629248d4f655">ReceivedSyncLinkMsg</a>() || CountWaitedTime.<a class="code" href="class_omiscid_1_1_elapsed_time.html#c85de4171158cb4d39eea7819609c440">Get</a>() &gt;= TimeToWait )
<a name="l01431"></a>01431                 {
<a name="l01432"></a>01432                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01433"></a>01433                 }
<a name="l01434"></a>01434                 <a class="code" href="class_omiscid_1_1_thread.html#78678cf0e10de6fcec7ea20faf1a2c5c">Thread::Sleep</a>(10);
<a name="l01435"></a>01435         }
<a name="l01436"></a>01436         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01437"></a>01437 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="deba601f8dc26650cf4168a4bcc2c03a"></a><!-- doxytag: member="Omiscid::MsgSocket::callbackData" ref="deba601f8dc26650cf4168a4bcc2c03a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_msg_socket_call_back_data.html">MsgSocketCallBackData</a> <a class="el" href="class_omiscid_1_1_msg_socket.html#deba601f8dc26650cf4168a4bcc2c03a">Omiscid::MsgSocket::callbackData</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
structure given to the callback methods 
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00396">396</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0d5c96d03589cdf47a3803ac3365249d"></a><!-- doxytag: member="Omiscid::MsgSocket::CallbackObjects" ref="0d5c96d03589cdf47a3803ac3365249d" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_mutexed_simple_list.html">MutexedSimpleList</a>&lt;<a class="el" href="class_omiscid_1_1_msg_socket_callback_object.html">MsgSocketCallbackObject</a>*&gt; <a class="el" href="class_omiscid_1_1_msg_socket.html#0d5c96d03589cdf47a3803ac3365249d">Omiscid::MsgSocket::CallbackObjects</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
callback call when messages arrive 
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00395">395</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l00408">AddCallbackObject()</a>, <a class="el" href="_connector_8cpp-source.html#l00116">Omiscid::Connector::ConnectTo()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00467">RemoveAllCallbackObjects()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00439">RemoveCallbackObject()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00922">Send()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l00988">SendCuttedMsg()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01045">SendPreparedBuffer()</a>, <a class="el" href="_msg_socket_8cpp-source.html#l01110">SendTo()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00614">Stop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="eafc599eec5aca8cfeea9727bf984f46"></a><!-- doxytag: member="Omiscid::MsgSocket::callbackSyncLinkFct" ref="eafc599eec5aca8cfeea9727bf984f46" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_msg_socket.html#755a9ab6299c74f203aec3ae5a4a4c47">Callback_SyncLink</a> <a class="el" href="class_omiscid_1_1_msg_socket.html#eafc599eec5aca8cfeea9727bf984f46">Omiscid::MsgSocket::callbackSyncLinkFct</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
callback call when SyncLink messages arrive 
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00399">399</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.
<p>
Referenced by <a class="el" href="_msg_socket_8cpp-source.html#l00479">SetCallbackSyncLink()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="f8de8404f66db44e0a1beed0d48abb7f"></a><!-- doxytag: member="Omiscid::MsgSocket::mutex" ref="f8de8404f66db44e0a1beed0d48abb7f" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_omiscid_1_1_mutex.html">Mutex</a> <a class="el" href="class_omiscid_1_1_msg_socket.html#f8de8404f66db44e0a1beed0d48abb7f">Omiscid::MsgSocket::mutex</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
mutex to protect the callback access 
<p>
Definition at line <a class="el" href="_msg_socket_8h-source.html#l00398">398</a> of file <a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a>.
<p>
Referenced by <a class="el" href="_tcp_server_8cpp-source.html#l00227">Omiscid::TcpServer::AcceptConnection()</a>, and <a class="el" href="_msg_socket_8cpp-source.html#l00479">SetCallbackSyncLink()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Com/Com/<a class="el" href="_msg_socket_8h-source.html">MsgSocket.h</a><li>Com/<a class="el" href="_msg_socket_8cpp-source.html">MsgSocket.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Sep 22 11:48:39 2006 for OMiSCID(aka O3MiSCID) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
